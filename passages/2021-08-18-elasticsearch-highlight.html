<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Elasticsearch-é«˜äº®æŸ¥è¯¢ | Zenghr</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script type="text/javascript" src="/scripts/baidu-analytics.js" async=""></script>
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <meta name="description" content="æ—¥å¸¸ç”Ÿæ´»ä¸­æˆ‘ä»¬ä½¿ç”¨æœç´¢å·¥å…·å°è¯•æŸ¥è¯¢ä¸€äº›ä¿¡æ¯çš„æ—¶å€™ï¼Œå¸¸å¸¸å¯ä»¥çœ‹åˆ°è¿”å›çš„ç»“æœé›†ä¸­å’Œæˆ‘ä»¬æŸ¥è¯¢æ¡ä»¶ç›¸ç¬¦åˆçš„å­—æ®µè¢«ç‰¹æ®Šçš„é¢œè‰²æ‰€æ ‡è®°ï¼Œè¿™å°±æ˜¯ç»“æœé«˜äº®æ˜¾ç¤ºã€‚é€šè¿‡é«˜äº®æ˜¾ç¤ºç”¨æˆ·å¯ä»¥æ˜æ˜¾çš„å‘ç°æŸ¥è¯¢åŒ¹é…çš„ä½ç½®ï¼ŒElasticsearch ä½¿ç”¨ highlight æ¥å®ç°æœç´¢ç»“æœä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µçªå‡ºæ˜¾ç¤º">
    <meta name="twitter:title" content="Elasticsearch-é«˜äº®æŸ¥è¯¢">
    <meta name="twitter:description" content="æ—¥å¸¸ç”Ÿæ´»ä¸­æˆ‘ä»¬ä½¿ç”¨æœç´¢å·¥å…·å°è¯•æŸ¥è¯¢ä¸€äº›ä¿¡æ¯çš„æ—¶å€™ï¼Œå¸¸å¸¸å¯ä»¥çœ‹åˆ°è¿”å›çš„ç»“æœé›†ä¸­å’Œæˆ‘ä»¬æŸ¥è¯¢æ¡ä»¶ç›¸ç¬¦åˆçš„å­—æ®µè¢«ç‰¹æ®Šçš„é¢œè‰²æ‰€æ ‡è®°ï¼Œè¿™å°±æ˜¯ç»“æœé«˜äº®æ˜¾ç¤ºã€‚é€šè¿‡é«˜äº®æ˜¾ç¤ºç”¨æˆ·å¯ä»¥æ˜æ˜¾çš„å‘ç°æŸ¥è¯¢åŒ¹é…çš„ä½ç½®ï¼ŒElasticsearch ä½¿ç”¨ highlight æ¥å®ç°æœç´¢ç»“æœä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µçªå‡ºæ˜¾ç¤º">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="https://blog.zenghr.cn/passages/2021-08-18-elasticsearch-highlight.html">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Elasticsearch-é«˜äº®æŸ¥è¯¢">
    <meta property="og:description" content="æ—¥å¸¸ç”Ÿæ´»ä¸­æˆ‘ä»¬ä½¿ç”¨æœç´¢å·¥å…·å°è¯•æŸ¥è¯¢ä¸€äº›ä¿¡æ¯çš„æ—¶å€™ï¼Œå¸¸å¸¸å¯ä»¥çœ‹åˆ°è¿”å›çš„ç»“æœé›†ä¸­å’Œæˆ‘ä»¬æŸ¥è¯¢æ¡ä»¶ç›¸ç¬¦åˆçš„å­—æ®µè¢«ç‰¹æ®Šçš„é¢œè‰²æ‰€æ ‡è®°ï¼Œè¿™å°±æ˜¯ç»“æœé«˜äº®æ˜¾ç¤ºã€‚é€šè¿‡é«˜äº®æ˜¾ç¤ºç”¨æˆ·å¯ä»¥æ˜æ˜¾çš„å‘ç°æŸ¥è¯¢åŒ¹é…çš„ä½ç½®ï¼ŒElasticsearch ä½¿ç”¨ highlight æ¥å®ç°æœç´¢ç»“æœä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µçªå‡ºæ˜¾ç¤º">
    <meta property="og:url" content="https://blog.zenghr.cn/passages/2021-08-18-elasticsearch-highlight.html">
    <meta property="article:author" content="zenghr">
    <meta property="article:published_time" content="2021-08-18 19:00">
    <meta itemprop="name" content="Elasticsearch-é«˜äº®æŸ¥è¯¢">
    <meta itemprop="description" content="æ—¥å¸¸ç”Ÿæ´»ä¸­æˆ‘ä»¬ä½¿ç”¨æœç´¢å·¥å…·å°è¯•æŸ¥è¯¢ä¸€äº›ä¿¡æ¯çš„æ—¶å€™ï¼Œå¸¸å¸¸å¯ä»¥çœ‹åˆ°è¿”å›çš„ç»“æœé›†ä¸­å’Œæˆ‘ä»¬æŸ¥è¯¢æ¡ä»¶ç›¸ç¬¦åˆçš„å­—æ®µè¢«ç‰¹æ®Šçš„é¢œè‰²æ‰€æ ‡è®°ï¼Œè¿™å°±æ˜¯ç»“æœé«˜äº®æ˜¾ç¤ºã€‚é€šè¿‡é«˜äº®æ˜¾ç¤ºç”¨æˆ·å¯ä»¥æ˜æ˜¾çš„å‘ç°æŸ¥è¯¢åŒ¹é…çš„ä½ç½®ï¼ŒElasticsearch ä½¿ç”¨ highlight æ¥å®ç°æœç´¢ç»“æœä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µçªå‡ºæ˜¾ç¤º">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="google-site-verification" content="YaZkTUj_yooTpG-N5B8hieXvHDRpHs7xfqTLvGl6nHs">
    
    <link rel="preload" href="/assets/css/0.styles.65ca67a0.css" as="style"><link rel="preload" href="/assets/js/app.5e7679fc.js" as="script"><link rel="preload" href="/assets/js/2.60b63780.js" as="script"><link rel="preload" href="/assets/js/1.60b780b9.js" as="script"><link rel="preload" href="/assets/js/99.111aa838.js" as="script"><link rel="preload" href="/assets/js/25.941e0d92.js" as="script"><link rel="prefetch" href="/assets/js/100.27fd0710.js"><link rel="prefetch" href="/assets/js/101.7cee7fb4.js"><link rel="prefetch" href="/assets/js/102.445bab02.js"><link rel="prefetch" href="/assets/js/103.92058a0d.js"><link rel="prefetch" href="/assets/js/104.f79fb32f.js"><link rel="prefetch" href="/assets/js/11.f291db2e.js"><link rel="prefetch" href="/assets/js/12.dfb89d4a.js"><link rel="prefetch" href="/assets/js/13.3b0c33b9.js"><link rel="prefetch" href="/assets/js/14.001f3b63.js"><link rel="prefetch" href="/assets/js/15.2c8543a3.js"><link rel="prefetch" href="/assets/js/16.924f53e3.js"><link rel="prefetch" href="/assets/js/17.5b9e33e4.js"><link rel="prefetch" href="/assets/js/18.a3e8df31.js"><link rel="prefetch" href="/assets/js/19.96edc929.js"><link rel="prefetch" href="/assets/js/20.65c8b301.js"><link rel="prefetch" href="/assets/js/21.fddb6954.js"><link rel="prefetch" href="/assets/js/22.0eec8bdc.js"><link rel="prefetch" href="/assets/js/23.d6c27937.js"><link rel="prefetch" href="/assets/js/24.40706275.js"><link rel="prefetch" href="/assets/js/26.097efd17.js"><link rel="prefetch" href="/assets/js/27.ac140e43.js"><link rel="prefetch" href="/assets/js/28.c5a80cba.js"><link rel="prefetch" href="/assets/js/29.2775ea20.js"><link rel="prefetch" href="/assets/js/3.0af23bf3.js"><link rel="prefetch" href="/assets/js/30.d3c5ed83.js"><link rel="prefetch" href="/assets/js/31.ff97b289.js"><link rel="prefetch" href="/assets/js/32.db0928c7.js"><link rel="prefetch" href="/assets/js/33.5b15c0cf.js"><link rel="prefetch" href="/assets/js/34.d2aeb07b.js"><link rel="prefetch" href="/assets/js/35.3d93b657.js"><link rel="prefetch" href="/assets/js/36.8efedfea.js"><link rel="prefetch" href="/assets/js/37.dcfa6d5b.js"><link rel="prefetch" href="/assets/js/38.1278c188.js"><link rel="prefetch" href="/assets/js/39.1b478cc3.js"><link rel="prefetch" href="/assets/js/4.ccf14627.js"><link rel="prefetch" href="/assets/js/40.1c6e2de5.js"><link rel="prefetch" href="/assets/js/41.af40a07e.js"><link rel="prefetch" href="/assets/js/42.bd443516.js"><link rel="prefetch" href="/assets/js/43.19179eba.js"><link rel="prefetch" href="/assets/js/44.10d5c3ae.js"><link rel="prefetch" href="/assets/js/45.6d252d67.js"><link rel="prefetch" href="/assets/js/46.c9ad3637.js"><link rel="prefetch" href="/assets/js/47.bded9724.js"><link rel="prefetch" href="/assets/js/48.616fe6fa.js"><link rel="prefetch" href="/assets/js/49.eb1d52e3.js"><link rel="prefetch" href="/assets/js/5.40e75f15.js"><link rel="prefetch" href="/assets/js/50.ac97b80a.js"><link rel="prefetch" href="/assets/js/51.0dc7a9e4.js"><link rel="prefetch" href="/assets/js/52.984aba80.js"><link rel="prefetch" href="/assets/js/53.91b16aa6.js"><link rel="prefetch" href="/assets/js/54.2a5b86b7.js"><link rel="prefetch" href="/assets/js/55.78ca1cb8.js"><link rel="prefetch" href="/assets/js/56.cc812032.js"><link rel="prefetch" href="/assets/js/57.1602798b.js"><link rel="prefetch" href="/assets/js/58.f79e4e51.js"><link rel="prefetch" href="/assets/js/59.8eaf9642.js"><link rel="prefetch" href="/assets/js/6.13997d50.js"><link rel="prefetch" href="/assets/js/60.9af83626.js"><link rel="prefetch" href="/assets/js/61.89d361c4.js"><link rel="prefetch" href="/assets/js/62.f69947d3.js"><link rel="prefetch" href="/assets/js/63.91d77a14.js"><link rel="prefetch" href="/assets/js/64.36d5220c.js"><link rel="prefetch" href="/assets/js/65.b0aeba2a.js"><link rel="prefetch" href="/assets/js/66.c251ab11.js"><link rel="prefetch" href="/assets/js/67.ac7d6d29.js"><link rel="prefetch" href="/assets/js/68.8ed2a1c3.js"><link rel="prefetch" href="/assets/js/69.aee1d9e2.js"><link rel="prefetch" href="/assets/js/7.f4a9084a.js"><link rel="prefetch" href="/assets/js/70.73d33a7d.js"><link rel="prefetch" href="/assets/js/71.bc0a303b.js"><link rel="prefetch" href="/assets/js/72.0ee398ed.js"><link rel="prefetch" href="/assets/js/73.34424b61.js"><link rel="prefetch" href="/assets/js/74.df44d300.js"><link rel="prefetch" href="/assets/js/75.7860c0a6.js"><link rel="prefetch" href="/assets/js/76.633624c0.js"><link rel="prefetch" href="/assets/js/77.4d3072db.js"><link rel="prefetch" href="/assets/js/78.065baa0d.js"><link rel="prefetch" href="/assets/js/79.3d7b5e16.js"><link rel="prefetch" href="/assets/js/8.c4da25e5.js"><link rel="prefetch" href="/assets/js/80.f81a484a.js"><link rel="prefetch" href="/assets/js/81.7a5ec7c6.js"><link rel="prefetch" href="/assets/js/82.f7d78f84.js"><link rel="prefetch" href="/assets/js/83.8a7b90a6.js"><link rel="prefetch" href="/assets/js/84.881252c8.js"><link rel="prefetch" href="/assets/js/85.bcd54d0d.js"><link rel="prefetch" href="/assets/js/86.91aac814.js"><link rel="prefetch" href="/assets/js/87.49b0ea88.js"><link rel="prefetch" href="/assets/js/88.4b9be97e.js"><link rel="prefetch" href="/assets/js/89.ac049c97.js"><link rel="prefetch" href="/assets/js/90.eeca43f2.js"><link rel="prefetch" href="/assets/js/91.d0165456.js"><link rel="prefetch" href="/assets/js/92.49f7e0b1.js"><link rel="prefetch" href="/assets/js/93.9f214d31.js"><link rel="prefetch" href="/assets/js/94.45919c44.js"><link rel="prefetch" href="/assets/js/95.a02e2520.js"><link rel="prefetch" href="/assets/js/96.45c16ceb.js"><link rel="prefetch" href="/assets/js/97.842b4fcd.js"><link rel="prefetch" href="/assets/js/98.8219d440.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e77459f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.65ca67a0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Zenghr</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  æœ€æ–°
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java åŸºç¡€ä¸é¢å‘å¯¹è±¡</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2021-04-09-java-lan-basic.html" class="nav-link">
  Java åŸºç¡€çŸ¥è¯†
</a></li><li class="dropdown-subitem"><a href="/passages/2021-04-09-java-basic-oop.html" class="nav-link">
  Java é¢å‘å¯¹è±¡
</a></li></ul></li><li class="dropdown-item"><h4>Javaè¿›é˜¶ - é›†åˆæ¡†æ¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2021-04-25-java-collection-frame.html" class="nav-link">
  Java é›†åˆæ¡†æ¶
</a></li></ul></li><li class="dropdown-item"><h4>Javaè¿›é˜¶ - IOæ¡†æ¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2021-05-05-java-io-basic.html" class="nav-link">
  Java I/OçŸ¥è¯†è¯¦è§£
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring" class="dropdown-title"><span class="title">Spring</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/passages/2021-07-21-activiti7-note.html" class="nav-link">
  Activity7 ç³»åˆ—
</a></li><li class="dropdown-item"><!----> <a href="/passages/2021-08-18-springboot-argument-resolver.html" class="nav-link">
  SpringBoot ç³»åˆ—
</a></li><li class="dropdown-item"><!----> <a href="/passages/2021-07-27-spring-cloud-alibaba.html" class="nav-link">
  Spring Cloud åŸºç¡€
</a></li></ul></div></div><div class="nav-item"><a href="/passages/go-catalog.html" class="nav-link">
  Golang
</a></div><div class="nav-item"><a href="/passages/2020-08-12-kubernetes-deploy-ready.html" class="nav-link">
  Kubernetes
</a></div><div class="nav-item"><a href="/passages/2020-02-25-nginx-install.html" class="nav-link">
  Linuxç³»åˆ—
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¼€å‘ç¯å¢ƒ" class="dropdown-title"><span class="title">å¼€å‘ç¯å¢ƒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/passages/tool-list-overview.html" class="nav-link">
  å¼€å‘å·¥å…·
</a></li><li class="dropdown-item"><!----> <a href="/passages/2021-06-28-git-common-cmd.html" class="nav-link">
  git ç¯å¢ƒ
</a></li><li class="dropdown-item"><h4>æ•°æ®åº“ç³»åˆ—</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2021-06-29-mysql-manage-auth.html" class="nav-link">
  mysql ç¯å¢ƒ
</a></li><li class="dropdown-subitem"><a href="/passages/2021-08-02-redis-overview.html" class="nav-link">
  Redis çŸ¥è¯†ä½“ç³»
</a></li><li class="dropdown-subitem"><a href="/passages/2021-08-15-mongo-overview.html" class="nav-link">
  Mongo çŸ¥è¯†ä½“ç³»
</a></li><li class="dropdown-subitem"><a href="/passages/2021-08-06-elasticsearch.html" class="nav-link">
  Elasticsearch çŸ¥è¯†ä½“ç³»
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¼€å‘æŒ‡å—" class="dropdown-title"><span class="title">å¼€å‘æŒ‡å—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/passages/code-spec-alibaba.html" class="nav-link">
  ä»£ç è§„èŒƒ
</a></li><li class="dropdown-item"><!----> <a href="/passages/dev-pattern-overview.html" class="nav-link">
  è®¾è®¡æ¨¡å¼è¯¦è§£
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å…¶å®ƒ" class="dropdown-title"><span class="title">å…¶å®ƒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/passages/2020-01-18-first-blog.html" class="nav-link">
  ç”Ÿæ´»é—²è°ˆ
</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">
  å‹æƒ…é“¾æ¥
</a></li></ul></div></div> <a href="https://github.com/zenghr0820/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  æœ€æ–°
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java åŸºç¡€ä¸é¢å‘å¯¹è±¡</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2021-04-09-java-lan-basic.html" class="nav-link">
  Java åŸºç¡€çŸ¥è¯†
</a></li><li class="dropdown-subitem"><a href="/passages/2021-04-09-java-basic-oop.html" class="nav-link">
  Java é¢å‘å¯¹è±¡
</a></li></ul></li><li class="dropdown-item"><h4>Javaè¿›é˜¶ - é›†åˆæ¡†æ¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2021-04-25-java-collection-frame.html" class="nav-link">
  Java é›†åˆæ¡†æ¶
</a></li></ul></li><li class="dropdown-item"><h4>Javaè¿›é˜¶ - IOæ¡†æ¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2021-05-05-java-io-basic.html" class="nav-link">
  Java I/OçŸ¥è¯†è¯¦è§£
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring" class="dropdown-title"><span class="title">Spring</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/passages/2021-07-21-activiti7-note.html" class="nav-link">
  Activity7 ç³»åˆ—
</a></li><li class="dropdown-item"><!----> <a href="/passages/2021-08-18-springboot-argument-resolver.html" class="nav-link">
  SpringBoot ç³»åˆ—
</a></li><li class="dropdown-item"><!----> <a href="/passages/2021-07-27-spring-cloud-alibaba.html" class="nav-link">
  Spring Cloud åŸºç¡€
</a></li></ul></div></div><div class="nav-item"><a href="/passages/go-catalog.html" class="nav-link">
  Golang
</a></div><div class="nav-item"><a href="/passages/2020-08-12-kubernetes-deploy-ready.html" class="nav-link">
  Kubernetes
</a></div><div class="nav-item"><a href="/passages/2020-02-25-nginx-install.html" class="nav-link">
  Linuxç³»åˆ—
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¼€å‘ç¯å¢ƒ" class="dropdown-title"><span class="title">å¼€å‘ç¯å¢ƒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/passages/tool-list-overview.html" class="nav-link">
  å¼€å‘å·¥å…·
</a></li><li class="dropdown-item"><!----> <a href="/passages/2021-06-28-git-common-cmd.html" class="nav-link">
  git ç¯å¢ƒ
</a></li><li class="dropdown-item"><h4>æ•°æ®åº“ç³»åˆ—</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2021-06-29-mysql-manage-auth.html" class="nav-link">
  mysql ç¯å¢ƒ
</a></li><li class="dropdown-subitem"><a href="/passages/2021-08-02-redis-overview.html" class="nav-link">
  Redis çŸ¥è¯†ä½“ç³»
</a></li><li class="dropdown-subitem"><a href="/passages/2021-08-15-mongo-overview.html" class="nav-link">
  Mongo çŸ¥è¯†ä½“ç³»
</a></li><li class="dropdown-subitem"><a href="/passages/2021-08-06-elasticsearch.html" class="nav-link">
  Elasticsearch çŸ¥è¯†ä½“ç³»
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¼€å‘æŒ‡å—" class="dropdown-title"><span class="title">å¼€å‘æŒ‡å—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/passages/code-spec-alibaba.html" class="nav-link">
  ä»£ç è§„èŒƒ
</a></li><li class="dropdown-item"><!----> <a href="/passages/dev-pattern-overview.html" class="nav-link">
  è®¾è®¡æ¨¡å¼è¯¦è§£
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å…¶å®ƒ" class="dropdown-title"><span class="title">å…¶å®ƒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/passages/2020-01-18-first-blog.html" class="nav-link">
  ç”Ÿæ´»é—²è°ˆ
</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">
  å‹æƒ…é“¾æ¥
</a></li></ul></div></div> <a href="https://github.com/zenghr0820/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å·¥å…·æ¸…å•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/passages/tool-list-overview.html" class="sidebar-link">Overview</a></li><li><a href="/passages/2021-04-01-idea-crack-2018.html" class="sidebar-link">IDEå·¥å…·ç ´è§£</a></li><li><a href="/passages/2021-06-30-idea-jrebel-config.html" class="sidebar-link">IDE JRebel æ’ä»¶ä½¿ç”¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Mysql</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/passages/2021-06-29-mysql-manage-auth.html" class="sidebar-link">mysql åˆ›å»ºç”¨æˆ·å¹¶èµ‹æƒ</a></li><li><a href="/passages/2021-07-06-group-by-error.html" class="sidebar-link">mysqlé«˜ç‰ˆæœ¬group-byé—®é¢˜</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Git</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/passages/2021-06-28-git-common-cmd.html" class="sidebar-link">git å¸¸ç”¨å‘½ä»¤</a></li><li><a href="/passages/2021-06-30-git-branch-manage.html" class="sidebar-link">git ä¸€ä¸ªä»“åº“ç®¡ç†å¤šä¸ªé¡¹ç›®</a></li><li><a href="/passages/2021-08-18-git-ignore-file.html" class="sidebar-link">git-å¿½ç•¥å·²æäº¤æ–‡ä»¶çš„ä¿®æ”¹</a></li><li><a href="/passages/2022-02-23-git-stash-note.html" class="sidebar-link">git stashæäº¤å½“å‰ä¿®æ”¹åˆ°å…¶ä»–åˆ†æ”¯</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Redis</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/passages/2021-08-02-redis-overview.html" class="sidebar-link">Redis-çŸ¥è¯†ä½“ç³»</a></li><li><a href="/passages/2021-08-02-redis-base-desc.html" class="sidebar-link">Rediså…¥é—¨-Redisæ¦‚å¿µ</a></li><li><a href="/passages/2021-08-02-redis-base-struct.html" class="sidebar-link">Rediså…¥é—¨-äº”ç§æ•°æ®ç±»å‹</a></li><li><a href="/passages/2021-08-02-redis-rdb-aof.html" class="sidebar-link">Redisè¿›é˜¶-æŒä¹…åŒ–æ•™ç¨‹</a></li><li><a href="/passages/2021-08-02-redis-memory.html" class="sidebar-link">Redisè¿›é˜¶-å†…å­˜æ·˜æ±°æœºåˆ¶</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Mongo</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/passages/2021-08-15-mongo-overview.html" class="sidebar-link">Mongo-çŸ¥è¯†ä½“ç³»</a></li><li><a href="/passages/2021-08-15-mongo-introduce.html" class="sidebar-link">Mongo-ä»‹ç»</a></li><li><a href="/passages/2021-08-19-mongo-install.html" class="sidebar-link">Mongo-ç¯å¢ƒæ­å»º</a></li><li><a href="/passages/2021-08-27-mongo-springboot.html" class="sidebar-link">Mongo-SpringBooté›†æˆ</a></li><li><a href="/passages/2021-08-27-mongo-geospatial.html" class="sidebar-link">Mongo-åœ°ç†ç©ºé—´æŸ¥è¯¢</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Elasticsearch</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/passages/2021-08-06-elasticsearch.html" class="sidebar-link">Elasticsearch-çŸ¥è¯†ä½“ç³»</a></li><li><a href="/passages/2021-08-06-elasticsearch-introduce.html" class="sidebar-link">Elasticsearch-åŸºç¡€æ¦‚å¿µ</a></li><li><a href="/passages/2021-08-06-elasticsearch-env.html" class="sidebar-link">Elasticsearch-ç¯å¢ƒæ­å»º</a></li><li><a href="/passages/2021-08-07-elasticsearch-basic-course.html" class="sidebar-link">Elasticsearch-åŸºç¡€æ•™ç¨‹</a></li><li><a href="/passages/2021-08-16-elasticsearch-ik.html" class="sidebar-link">Elasticsearch-å®‰è£…ä¸­æ–‡åˆ†è¯å™¨</a></li><li><a href="/passages/2021-08-18-elasticsearch-integrate-springboot.html" class="sidebar-link">Elasticsearch-SpringBootæ•´åˆ</a></li><li><a href="/passages/2021-08-18-elasticsearch-highlight.html" aria-current="page" class="active sidebar-link">Elasticsearch-é«˜äº®æŸ¥è¯¢</a></li><li><a href="/passages/2021-08-19-elasticsearch-complex-query.html" class="sidebar-link">Elasticsearch-å¤æ‚æŸ¥è¯¢</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç–‘éš¾æ‚ç—‡</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/passages/2022-01-11-mac-jdk8-slow-solution.html" class="sidebar-link">Macå®‰è£…JDK8å¯åŠ¨é¡¹ç›®æ…¢è§£å†³æ–¹æ¡ˆ</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="elasticsearch-é«˜äº®æŸ¥è¯¢"><a href="#elasticsearch-é«˜äº®æŸ¥è¯¢" class="header-anchor">#</a> Elasticsearch é«˜äº®æŸ¥è¯¢</h1> <p>æ—¥å¸¸ç”Ÿæ´»ä¸­æˆ‘ä»¬ä½¿ç”¨æœç´¢å·¥å…·å°è¯•æŸ¥è¯¢ä¸€äº›ä¿¡æ¯çš„æ—¶å€™ï¼Œå¸¸å¸¸å¯ä»¥çœ‹åˆ°è¿”å›çš„ç»“æœé›†ä¸­å’Œæˆ‘ä»¬æŸ¥è¯¢æ¡ä»¶ç›¸ç¬¦åˆçš„å­—æ®µè¢«ç‰¹æ®Šçš„é¢œè‰²æ‰€æ ‡è®°ï¼Œè¿™å°±æ˜¯ç»“æœé«˜äº®æ˜¾ç¤ºã€‚é€šè¿‡é«˜äº®æ˜¾ç¤ºç”¨æˆ·å¯ä»¥æ˜æ˜¾çš„å‘ç°æŸ¥è¯¢åŒ¹é…çš„ä½ç½®ï¼ŒElasticsearch ä½¿ç”¨ <code>highlight</code> æ¥å®ç°æœç´¢ç»“æœä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µçªå‡ºæ˜¾ç¤º</p> <h2 id="ä¾‹å­ğŸŒ°"><a href="#ä¾‹å­ğŸŒ°" class="header-anchor">#</a> ä¾‹å­ğŸŒ°</h2> <p>ä¸¾ä¸ªğŸŒ° - <em>æŸ¥è¯¢ æ”»ç•¥ä¸­å¸¦ä¸Šæµ·çš„æ•°æ® - å¤šå­—æ®µåŒ¹é…</em></p> <h3 id="æ˜ å°„ç»“æ„"><a href="#æ˜ å°„ç»“æ„" class="header-anchor">#</a> æ˜ å°„ç»“æ„</h3> <p>ä¸‹é¢æ˜¯ä¾‹å­æ‰€ä½¿ç”¨çš„æ˜ å°„ç»“æ„</p> <blockquote><p>æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨äº† <code>IK</code> åˆ†è¯å™¨ï¼Œå¦‚éœ€äº†è§£ IK åˆ†è¯å™¨è¯·çœ‹ <a href="/passages/2021-08-16-elasticsearch-ik.html">Elasticsearch ä¸­æ–‡åˆ†è¯å™¨</a></p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;_doc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;subTitle&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;store&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_max_word&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;summary&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;store&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_max_word&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;store&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_max_word&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ‰§è¡Œå¦‚ä¸‹è¯·æ±‚ä¹‹åä¼šå¾—åˆ°è¿”å›å†…å®¹ï¼Œåœ¨ <code>hits</code> ä¸­é™¤äº†å¸¸è§„æ•°æ®å¤–ï¼Œè¿˜ä¼šæœ‰ <strong><code>highlight</code></strong> å¯¹è±¡</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;multi_match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ä¸Šæµ·&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;subTitle&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;summary&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;highlight&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;pre_tags&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;b&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;post_tags&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;/b&gt;&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;subTitle&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;summary&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;pre_tags&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;b&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;post_tags&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;/b&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;number_of_fragments&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;fragment_size&quot;</span><span class="token operator">:</span> <span class="token number">10</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿”å›çš„ç»“æœé‡Œé¢æ¯ä¸ª hit å¤šäº†ä¸€ä¸ªç±»ä¼¼è¿™æ ·éƒ¨åˆ†ï¼š</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;strategy_es&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">2.4005952</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
          <span class="token property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;æ‡’äººåƒè´§æŒ‡å— | è½»æ¾åƒéåœ°é“ä¸Šæµ·å°åƒ&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;subTitle&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;è½»æ¾åƒéåœ°é“ä¸Šæµ·å°åƒ&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;summary&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;å»ä¸€ä¸ªåœ°æ–¹æ—…è¡Œå½“ç„¶è¦å°å°å½“åœ°çš„ç‰¹è‰²ç¾é£Ÿï¼Œä¸ç„¶æ€»è§‰å¾—è¿™è¶Ÿæ—…è¡Œä¸å®Œæ•´ã€‚ä½†æ˜¯å¯¹äºä¸ç†Ÿæ‚‰ä¸Šæµ·çš„æ¸¸å®¢æ¥è¯´ï¼Œâ€œå“ªäº›æ˜¯è€ä¸Šæµ·å°åƒï¼Ÿå»å“ªé‡Œèƒ½åƒåˆ°åœ°é“çš„ï¼Ÿâ€è¿™äº›éƒ½æ˜¯å¤´ç–¼çš„é—®é¢˜ã€‚è¿™ç¯‡æ”»ç•¥å°†ä¼šç»™å¤§å®¶ä»‹ç»è€ä¸Šæµ·å°åƒï¼Œæ¨èä¸€äº›è€å­—å·ï¼Œå¹¶é™„ä¸Šå‘¨è¾¹æ¸¸ç©å°Tips&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;highlight&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;summary&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;ä½†æ˜¯å¯¹äºä¸ç†Ÿæ‚‰&lt;b&gt;ä¸Šæµ·&lt;/b&gt;çš„æ¸¸å®¢æ¥è¯´&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;ï¼Œâ€œå“ªäº›æ˜¯è€&lt;b&gt;ä¸Šæµ·&lt;/b&gt;å°åƒï¼Ÿ&quot;</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;subTitle&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;è½»æ¾åƒéåœ°é“&lt;em&gt;ä¸Šæµ·&lt;/em&gt;å°åƒ&quot;</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;æ‡’äººåƒè´§æŒ‡å— | è½»æ¾åƒéåœ°é“&lt;b&gt;ä¸Šæµ·&lt;/b&gt;å°åƒ&quot;</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="é«˜äº®è®¾ç½®"><a href="#é«˜äº®è®¾ç½®" class="header-anchor">#</a> é«˜äº®è®¾ç½®</h2> <p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬é¢„è®¾äº† é«˜äº®å…³é”®å­— çš„HTMLæ ‡ç­¾è¿›è¡ŒåŒ…è£¹ï¼Œä¸‹é¢æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹é«˜äº® <strong>highlight</strong> çš„å‚æ•°å®šä¹‰ï¼Œä¸‹é¢çš„å‚æ•°å¯ä»¥è®¾ç½®åœ¨ <code>highlight</code> çš„ä¸‹ä¸€çº§æ­¤æ—¶ä¸º <strong>å…¨å±€è®¾ç½®</strong>ï¼Œä¹Ÿå¯ä»¥è®¾ç½®åœ¨å­—æ®µçš„ä¸‹ä¸€çº§ï¼Œæ­¤æ—¶ä¸º <strong>å­—æ®µè®¾ç½®</strong></p> <blockquote><p>å•ä¸ªå­—æ®µçš„è®¾ç½®ä¼˜å…ˆçº§é«˜äºå…¨å±€è®¾ç½®</p></blockquote> <h3 id="number-of-fragments"><a href="#number-of-fragments" class="header-anchor">#</a> number_of_fragments</h3> <p>è¦è¿”å›çš„æœ€å¤§ç‰‡æ®µæ•°ï¼Œå¦‚æœç‰‡æ®µæ•°è®¾ç½®ä¸º 0ï¼Œåˆ™ä¸è¿”å›ä»»ä½•ç‰‡æ®µï¼Œ<strong>è€Œæ˜¯çªå‡ºæ˜¾ç¤ºå¹¶è¿”å›æ•´ä¸ªå­—æ®µå†…å®¹</strong>ã€‚</p> <p>å½“æ‚¨éœ€è¦çªå‡ºæ˜¾ç¤ºæ ‡é¢˜æˆ–åœ°å€ç­‰çŸ­æ–‡æœ¬æ—¶ï¼Œè¿™ä¼šå¾ˆæ–¹ä¾¿ï¼Œä½†ä¸éœ€è¦åˆ†æ®µã€‚å¦‚æœ<code>number_of_fragments</code> ä¸º 0ï¼Œ<code>fragment_size</code>åˆ™å¿½ç•¥ã€‚é»˜è®¤ä¸º 5</p> <p>ä¾‹å¦‚ä¸Šé¢ğŸ‘†æˆ‘ä»¬è®¾ç½®äº† <em>number_of_fragments: 2</em> ï¼Œé‚£ä¹ˆ summary å­—æ®µè¿”å›äº†ä¸¤æ®µæ•°æ®</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;summary&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;ä½†æ˜¯å¯¹äºä¸ç†Ÿæ‚‰&lt;b&gt;ä¸Šæµ·&lt;/b&gt;çš„æ¸¸å®¢æ¥è¯´&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;ï¼Œâ€œå“ªäº›æ˜¯è€&lt;b&gt;ä¸Šæµ·&lt;/b&gt;å°åƒï¼Ÿ&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœè®¾ç½®æˆ 0 ï¼Œå°±è¿”å›åŸæœ¬æ•°æ®</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;summary&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;å»ä¸€ä¸ªåœ°æ–¹æ—…è¡Œå½“ç„¶è¦å°å°å½“åœ°çš„ç‰¹è‰²ç¾é£Ÿï¼Œä¸ç„¶æ€»è§‰å¾—è¿™è¶Ÿæ—…è¡Œä¸å®Œæ•´ã€‚ä½†æ˜¯å¯¹äºä¸ç†Ÿæ‚‰&lt;b&gt;ä¸Šæµ·&lt;/b&gt;çš„æ¸¸å®¢æ¥è¯´ï¼Œâ€œå“ªäº›æ˜¯è€&lt;b&gt;ä¸Šæµ·&lt;/b&gt;å°åƒï¼Ÿå»å“ªé‡Œèƒ½åƒåˆ°åœ°é“çš„ï¼Ÿâ€è¿™äº›éƒ½æ˜¯å¤´ç–¼çš„é—®é¢˜ã€‚è¿™ç¯‡æ”»ç•¥å°†ä¼šç»™å¤§å®¶ä»‹ç»è€&lt;b&gt;ä¸Šæµ·&lt;/b&gt;å°åƒï¼Œæ¨èä¸€äº›è€å­—å·ï¼Œå¹¶é™„ä¸Šå‘¨è¾¹æ¸¸ç©å°Tips&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="fragment-size"><a href="#fragment-size" class="header-anchor">#</a> fragment_size</h3> <p>ä¸€æ®µ fragment åŒ…å«å¤šå°‘ä¸ªå­—ç¬¦ï¼ˆä»¥å­—ç¬¦ä¸ºå•ä½ï¼‰é»˜è®¤ä¸º 100</p> <h3 id="pre-tags"><a href="#pre-tags" class="header-anchor">#</a> pre_tags</h3> <p>æ ‡è®° highlight çš„å¼€å§‹æ ‡ç­¾ï¼Œä¾‹å¦‚ä¸Šé¢çš„ <code>&lt;b&gt;</code> æ ‡ç­¾</p> <h3 id="post-tags"><a href="#post-tags" class="header-anchor">#</a> post_tags</h3> <p>æ ‡è®° highlight çš„ç»“æŸæ ‡ç­¾ï¼Œä¾‹å¦‚ä¸Šé¢çš„ <code>&lt;/b&gt;</code> æ ‡ç­¾</p> <blockquote><p>ç³»ç»Ÿé¢„è®¾çš„æ ‡ç­¾ä¸º <code>&lt;em&gt;</code></p></blockquote> <h3 id="order"><a href="#order" class="header-anchor">#</a> order</h3> <p>orderæ§åˆ¶äº†è¿”å›å¯¹è±¡ä¸­ <code>highlight</code> ç‰‡æ®µçš„æ’åºã€‚ä¸‹é¢ä¾‹å­ä¸­è¿”å›çš„é«˜äº®ç‰‡æ®µå°†ä¼šæ ¹æ®åˆ†æ•°é¡ºåºè¾“å‡ºã€‚å‡å¦‚è®¾ç½®äº†noneåˆ™æ˜¯æŒ‰ç…§é¡ºåºè¾“å‡º</p> <div class="custom-block tip"><p>æœ€å‡†ç¡®çš„æ–‡æ¡£è¿˜æ˜¯å®˜ç½‘ï¼Œæ›´å¤šçš„å‚æ•°è¯·å‚è€ƒ<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-highlighting.html#highlighting-settings" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p></div> <h2 id="java-ä»£ç å®ç°é«˜äº®æŸ¥è¯¢"><a href="#java-ä»£ç å®ç°é«˜äº®æŸ¥è¯¢" class="header-anchor">#</a> Java ä»£ç å®ç°é«˜äº®æŸ¥è¯¢</h2> <div class="custom-block tip"><p>åœ¨è¿™é‡Œæˆ‘ä»¬å°±ä¸ä»‹ç» Elasticsearch å’Œ SpringBoot çš„é›†æˆï¼Œå¦‚æœä¸ä¼šè¯·çœ‹ä¸Šä¸€ç¯‡æ–‡ç«  <a href="/passages/2021-08-18-elasticsearch-integrate-springboot.html">SpringBoot é›†æˆ Elasticsearch</a></p></div> <table><thead><tr><th>æ¡†æ¶</th> <th>ç‰ˆæœ¬</th></tr></thead> <tbody><tr><td>SpringBoot</td> <td>2.5.3</td></tr> <tr><td>Elasticsearch</td> <td>7.14.0</td></tr> <tr><td>Spring Data Elasticsearch</td> <td>4.2.3</td></tr></tbody></table> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">ElasticsearchRestTemplate</span> restTemplate<span class="token punctuation">;</span>
<span class="token comment">// ----------------------------------------------</span>
<span class="token comment">// æ„å»ºæŸ¥è¯¢å¯¹è±¡</span>
<span class="token class-name">NativeSearchQueryBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NativeSearchQueryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è·å–å­—æ®µ</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;subTitle&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;summary&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å¤šå­—æ®µåŒ¹é…</span>
<span class="token class-name">MultiMatchQueryBuilder</span> multiMatchQueryBuilder <span class="token operator">=</span>
    <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">multiMatchQuery</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸Šæµ·&quot;</span><span class="token punctuation">,</span> fields<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è®¾ç½®é«˜äº®</span>
<span class="token class-name">HighlightBuilder</span> highlightBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HighlightBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    highlightBuilder<span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span>field<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

highlightBuilder<span class="token punctuation">.</span><span class="token function">requireFieldMatch</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¦‚æœè¦å¤šä¸ªå­—æ®µé«˜äº®,è¿™é¡¹è¦ä¸ºfalse</span>
highlightBuilder<span class="token punctuation">.</span><span class="token function">preTags</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;span style='color:red'&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é«˜äº®è®¾ç½®</span>
highlightBuilder<span class="token punctuation">.</span><span class="token function">postTags</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/span&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
highlightBuilder<span class="token punctuation">.</span><span class="token function">numOfFragments</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å›ç»“æœæœ€å¤šå¯ä»¥åŒ…å«å‡ æ®µä¸è¿ç»­çš„æ–‡å­—ã€‚é»˜è®¤æ˜¯5, è¿™é‡Œä¸åˆ†æ®µæ˜¾ç¤º</span>

<span class="token comment">// åˆ†é¡µ</span>
<span class="token class-name">Pageable</span> pageable <span class="token operator">=</span> <span class="token class-name">PageRequest</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span>
                                   <span class="token class-name">Sort<span class="token punctuation">.</span>Direction</span><span class="token punctuation">.</span><span class="token constant">ASC</span><span class="token punctuation">,</span> <span class="token string">&quot;_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è®¾ç½®åˆ†é¡µå‚æ•°</span>

<span class="token comment">// å°è£…æŸ¥è¯¢</span>
builder<span class="token punctuation">.</span><span class="token function">withQuery</span><span class="token punctuation">(</span>multiMatchQueryBuilder<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">withPageable</span><span class="token punctuation">(</span>pageable<span class="token punctuation">)</span> <span class="token comment">// å°è£…åˆ†é¡µ</span>
    <span class="token punctuation">.</span><span class="token function">withHighlightBuilder</span><span class="token punctuation">(</span>highlightBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">NativeSearchQuery</span> searchQuery <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å‘èµ·æ£€ç´¢è¯·æ±‚</span>
<span class="token comment">// å‚æ•°ï¼šæŸ¥è¯¢æ¡ä»¶å¯¹è±¡ï¼Œè¿”å›æ³›å‹ï¼Œç´¢å¼•åç§°</span>
<span class="token class-name">SearchHits</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Strategy</span><span class="token punctuation">&gt;</span></span> searchHits <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>searchQuery<span class="token punctuation">,</span> <span class="token class-name">Strategy</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">IndexCoordinates</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;strategy_es&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ... è¾“å‡ºé«˜äº®å†…å®¹</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zenghr0820/blog/edit/master/docs/å¼€å‘ç¯å¢ƒ/06.Elasticsearch/07.Elasticsearch-é«˜äº®æŸ¥è¯¢.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/passages/2021-08-18-elasticsearch-integrate-springboot.html" class="prev">
        Elasticsearch-SpringBootæ•´åˆ
      </a></span> <span class="next"><a href="/passages/2021-08-19-elasticsearch-complex-query.html">
        Elasticsearch-å¤æ‚æŸ¥è¯¢
      </a>
      â†’
    </span></p></div> <aside class="page-sidebar"><div class="page-side-toolbar"><div class="option-box-toc-fixed"><div class="toc-container-sidebar"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:650px"><div style="font-weight:bold;text-align:center;">Elasticsearch-é«˜äº®æŸ¥è¯¢</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#ä¾‹å­ğŸŒ°" class="toc-sidebar-link">ä¾‹å­ğŸŒ°</a> <ul class="toc-sidebar-sub-headers"><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#æ˜ å°„ç»“æ„" class="toc-sidebar-link">æ˜ å°„ç»“æ„</a></li></ul></li><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#é«˜äº®è®¾ç½®" class="toc-sidebar-link">é«˜äº®è®¾ç½®</a> <ul class="toc-sidebar-sub-headers"><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#number-of-fragments" class="toc-sidebar-link">numberoffragments</a></li><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#fragment-size" class="toc-sidebar-link">fragment_size</a></li><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#pre-tags" class="toc-sidebar-link">pre_tags</a></li><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#post-tags" class="toc-sidebar-link">post_tags</a></li><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#order" class="toc-sidebar-link">order</a></li></ul></li><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#java-ä»£ç å®ç°é«˜äº®æŸ¥è¯¢" class="toc-sidebar-link">Java ä»£ç å®ç°é«˜äº®æŸ¥è¯¢</a> <ul class="toc-sidebar-sub-headers"></ul></li></ul></div></div></div></div></div> <div class="option-box option-box-toc-over"><img src="/toc.png" class="nozoom" style="pointer-events: none; width: 20px"> <span class="show-txt">ç›®å½•</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:550px"><div style="font-weight:bold;text-align:center;">Elasticsearch-é«˜äº®æŸ¥è¯¢</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#ä¾‹å­ğŸŒ°" class="toc-sidebar-link">ä¾‹å­ğŸŒ°</a> <ul class="toc-sidebar-sub-headers"><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#æ˜ å°„ç»“æ„" class="toc-sidebar-link">æ˜ å°„ç»“æ„</a></li></ul></li><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#é«˜äº®è®¾ç½®" class="toc-sidebar-link">é«˜äº®è®¾ç½®</a> <ul class="toc-sidebar-sub-headers"><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#number-of-fragments" class="toc-sidebar-link">numberoffragments</a></li><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#fragment-size" class="toc-sidebar-link">fragment_size</a></li><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#pre-tags" class="toc-sidebar-link">pre_tags</a></li><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#post-tags" class="toc-sidebar-link">post_tags</a></li><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#order" class="toc-sidebar-link">order</a></li></ul></li><li><a href="/passages/2021-08-18-elasticsearch-highlight.html#java-ä»£ç å®ç°é«˜äº®æŸ¥è¯¢" class="toc-sidebar-link">Java ä»£ç å®ç°é«˜äº®æŸ¥è¯¢</a> <ul class="toc-sidebar-sub-headers"></ul></li></ul></div></div></div></div></div> <div class="option-box"><a title="ç‚¹å‡»åˆ‡æ¢å…¨å±" style="text-align: center; padding-left: 2px;"><img src="/full.png" class="nozoom" style="pointer-events: none; width: 27px"> <span class="show-txt">å…¨å±çœ‹</span></a></div><div class="option-box"><a title="ç‚¹å‡»åˆ‡æ¢å…¨å±" style="text-align: center; padding-left: 2px;"><img src="/toggle.png" class="nozoom" style="pointer-events: none; width: 27px"> <span class="show-txt">ä¾§è¾¹æ </span></a></div><div class="option-box"><img src="/iphone.png" class="nozoom" style="pointer-events: none; width: 20px"> <span class="show-txt">æ‰‹æœºçœ‹</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:550px"><img height="180px" src="https://api.qrserver.com/v1/create-qr-code/?data=https://blog.zenghr.cn/passages/2021-08-18-elasticsearch-highlight.html" class="medium-zoom-image" style="margin: 10px;"></div></div></div></div><div class="option-box"><img src="/reward.png" class="nozoom" style="pointer-events: none; width: 20px"> <span class="show-txt">æ‰“èµ</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:550px"><img height="180px" src="/wechat.jpg" class="medium-zoom-image" style="margin: 10px;"></div></div></div></div><div class="option-box"><a title="Elasticsearch-SpringBootæ•´åˆ" href="/passages/2021-08-18-elasticsearch-integrate-springboot.html" style="text-align: center; padding-left: 2px;"><img src="/prev.png" class="nozoom" style="pointer-events: none; width: 27px"> <span class="show-txt">ä¸Šä¸€ç¯‡</span></a></div><div class="option-box"><a title="Elasticsearch-å¤æ‚æŸ¥è¯¢" href="/passages/2021-08-19-elasticsearch-complex-query.html" style="text-align: center; padding-left: 2px;"><img src="/next.png" class="nozoom" style="pointer-events: none; width: 27px"> <span class="show-txt">ä¸‹ä¸€ç¯‡</span></a></div></div></aside> </main></div><div class="global-ui"><div class="my-loader center" style="display:none;" data-v-354e1a9e><div class="my-loader-circle" data-v-354e1a9e></div></div><div class="my-popup" style="display:none;" data-v-5f98aac3><div class="my-popup-container" data-v-5f98aac3><div class="my-popup-exit" data-v-5f98aac3></div> <img src="" alt data-v-5f98aac3></div></div><!----><!----><div></div><div class="container" data-v-0178ff65><canvas id="live2d" width="280" height="250" class="live2d-right" data-v-0178ff65></canvas></div></div></div>
    <script src="/assets/js/app.5e7679fc.js" defer></script><script src="/assets/js/2.60b63780.js" defer></script><script src="/assets/js/1.60b780b9.js" defer></script><script src="/assets/js/99.111aa838.js" defer></script><script src="/assets/js/25.941e0d92.js" defer></script>
  </body>
</html>
