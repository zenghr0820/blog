import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as l,a as n,d as i,i as a,b as h,w as p,r,o}from"./app-BNF1hQAw.js";const k={},d={class:"hint-container warning"};function c(g,s){const t=r("RouteLink");return o(),l("div",null,[s[5]||(s[5]=n(`<h1 id="springcloud-alibaba-nacos" tabindex="-1"><a class="header-anchor" href="#springcloud-alibaba-nacos"><span>SpringCloud Alibaba Nacos</span></a></h1><p><strong>Nacos</strong> æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç† å¹³å°</p><p><strong>å‚è€ƒæ–‡æ¡£å¦‚ä¸‹ğŸ‘‡</strong></p><blockquote><p>Nacos å®˜ç½‘æ–‡æ¡£åœ°å€ï¼š<a href="https://nacos.io/zh-cn/docs/what-is-nacos.html" target="_blank" rel="noopener noreferrer">https://nacos.io/zh-cn/docs/what-is-nacos.html</a></p><p>Nacos Spring Cloud å¿«é€Ÿå¼€å§‹ï¼š<a href="https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html" target="_blank" rel="noopener noreferrer">https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html</a></p></blockquote><h2 id="nacos-æ­å»º" tabindex="-1"><a class="header-anchor" href="#nacos-æ­å»º"><span>Nacos æ­å»º</span></a></h2><p>æ ¹æ® Nacos å®˜ç½‘çš„ç‰ˆæœ¬é€‰æ‹©æè¿°ä¸­ï¼Œå¯ä»¥æ ¹æ® <a href="https://github.com/alibaba/nacos/releases" target="_blank" rel="noopener noreferrer">releases</a> ä¸­æ‰¾åˆ°æ¯ä¸ªç‰ˆæœ¬çš„ä»‹ç»ï¼ŒSpring Cloud ç‰ˆæœ¬å¯¹åº”å…³ç³»å¯ä»¥æŸ¥çœ‹ <a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">ç‰ˆæœ¬è¯´æ˜Wiki</a></p><h3 id="è·å–-nacos" tabindex="-1"><a class="header-anchor" href="#è·å–-nacos"><span>è·å– Nacos</span></a></h3><ul><li>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/alibaba/nacos/releases" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/nacos/releases</a></li><li>æ­å»ºæ–‡æ¡£ï¼š<a href="https://nacos.io/zh-cn/docs/quick-start.html" target="_blank" rel="noopener noreferrer">https://nacos.io/zh-cn/docs/quick-start.html</a></li></ul><h3 id="å¯åŠ¨ã€å…³é—­æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨ã€å…³é—­æœåŠ¡"><span>å¯åŠ¨ã€å…³é—­æœåŠ¡</span></a></h3><p><strong>Linux/Unix/Mac</strong></p><div class="language-sh" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Linux/Unix/Mac</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å¯åŠ¨å‘½ä»¤(standaloneä»£è¡¨ç€å•æœºæ¨¡å¼è¿è¡Œï¼Œéé›†ç¾¤æ¨¡å¼):</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">sh</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> startup.sh</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> standalone</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">sh</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> shutdown.sh</span></span></code></pre></div><p><strong>Window</strong></p><div class="language-sh" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å¯åŠ¨å‘½ä»¤(standaloneä»£è¡¨ç€å•æœºæ¨¡å¼è¿è¡Œï¼Œéé›†ç¾¤æ¨¡å¼):</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">startup.cmd</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> standalone</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">shutdown.cmd</span></span></code></pre></div><h3 id="è®¿é—®-nacos-åå°ç•Œé¢" tabindex="-1"><a class="header-anchor" href="#è®¿é—®-nacos-åå°ç•Œé¢"><span>è®¿é—® Nacos åå°ç•Œé¢</span></a></h3><p>å½“æˆ‘ä»¬çš„ Nacos è¿è¡Œèµ·æ¥æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—® <a href="http://127.0.0.1:8848/nacos" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8848/nacos</a> åœ°å€ï¼Œè¾“å…¥è´¦å·å¯†ç ï¼š<strong><code>nacos</code></strong> ç™»å½•ç³»ç»Ÿ</p><p><img src="https://media.zenghr.cn/blog/img/20210727/XOjON2.png" alt="XOjON2"></p><p><img src="https://media.zenghr.cn/blog/img/20210727/ZoWv68.png" alt="ZoWv68"></p><h2 id="ç¯å¢ƒè¯´æ˜" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒè¯´æ˜"><span>ç¯å¢ƒè¯´æ˜</span></a></h2><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p><strong>Spring Cloudï¼š</strong> 2020.0.3</p><p><strong>Nacosï¼š</strong> 14.2</p><p><strong>spring-cloud-alibabaï¼š</strong> 2021.1</p></div><p>å…³äº Nacos Spring Cloud çš„è¯¦ç»†æ–‡æ¡£è¯·å‚çœ‹ï¼š<a href="https://github.com/spring-cloud-incubator/spring-cloud-alibaba/wiki/Nacos-config" target="_blank" rel="noopener noreferrer">Nacos Config</a> å’Œ <a href="https://github.com/spring-cloud-incubator/spring-cloud-alibaba/wiki/Nacos-discovery" target="_blank" rel="noopener noreferrer">Nacos Discovery</a>ã€‚</p><ul><li>é€šè¿‡ Nacos Server å’Œ spring-cloud-starter-alibaba-nacos-config å®ç°é…ç½®çš„åŠ¨æ€å˜æ›´ã€‚</li><li>é€šè¿‡ Nacos Server å’Œ spring-cloud-starter-alibaba-nacos-discovery å®ç°æœåŠ¡çš„æ³¨å†Œä¸å‘ç°ã€‚</li></ul><h2 id="æœåŠ¡å‘ç°æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡å‘ç°æ˜¯ä»€ä¹ˆ"><span>æœåŠ¡å‘ç°æ˜¯ä»€ä¹ˆ</span></a></h2><h3 id="æœåŠ¡æä¾›è€…ä¸æœåŠ¡æ¶ˆè´¹è€…" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡æä¾›è€…ä¸æœåŠ¡æ¶ˆè´¹è€…"><span>æœåŠ¡æä¾›è€…ä¸æœåŠ¡æ¶ˆè´¹è€…</span></a></h3><ul><li>æœåŠ¡æä¾›è€…ï¼šæœåŠ¡çš„è¢«è°ƒç”¨æ–¹ï¼ˆå³ï¼šä¸ºå…¶ä»–å¾®æœåŠ¡æä¾›æ¥å£çš„å¾®æœåŠ¡ï¼‰</li><li>æœåŠ¡æ¶ˆè´¹è€…ï¼šæœåŠ¡çš„è°ƒç”¨æ–¹ï¼ˆå³ï¼šè°ƒç”¨å…¶ä»–å¾®æœåŠ¡æ¥å£çš„å¾®æœåŠ¡ï¼‰</li></ul><h3 id="æœåŠ¡å‘ç°åŸç†" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡å‘ç°åŸç†"><span>æœåŠ¡å‘ç°åŸç†</span></a></h3><ul><li>æœåŠ¡å‘ç°æœºåˆ¶å°±æ˜¯é€šè¿‡ä¸€ä¸ªä¸­é—´ä»¶å»è®°å½•æœåŠ¡æä¾›è€…çš„ipåœ°å€ï¼ŒæœåŠ¡åä»¥åŠå¿ƒè·³ç­‰æ•°æ®ï¼ˆæ¯”å¦‚ç”¨mysqlå»å­˜å‚¨è¿™äº›ä¿¡æ¯ï¼‰ï¼Œç„¶åæœåŠ¡æ¶ˆè´¹è€…ä¼šå»è¿™ä¸ªä¸­é—´å¹³å°å»æŸ¥è¯¢ç›¸å…³ä¿¡æ¯ï¼Œç„¶åå†å»è®¿é—®å¯¹åº”çš„åœ°å€ï¼Œè¿™å°±æ˜¯æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°ã€‚</li><li>å½“ç”¨æˆ·åœ°å€å‘ç”Ÿäº†å˜åŒ–ä¹Ÿæ²¡æœ‰å½±å“ï¼Œå› ä¸ºæœåŠ¡æä¾›æ–¹ä¿®æ”¹äº†ç”¨æˆ·åœ°å€ï¼Œåœ¨ä¸­é—´ä»¶ä¸­ä¼šè¢«æ›´æ–°ï¼Œå½“æœåŠ¡æ¶ˆè´¹æ–¹å»è®¿é—®ä¸­é—´ä»¶æ—¶å°±èƒ½åŠæ—¶è·å–æœ€æ–°çš„ç”¨æˆ·åœ°å€ï¼Œå°±ä¸ä¼šå‡ºç°ç”¨æˆ·åœ°å€å‘ç”Ÿå˜åŒ–å¯¼è‡´æœåŠ¡æ‰¾ä¸åˆ°</li></ul><h2 id="å¯åŠ¨æœåŠ¡å‘ç°" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨æœåŠ¡å‘ç°"><span>å¯åŠ¨æœåŠ¡å‘ç°</span></a></h2><p>æˆ‘ä»¬é€šè¿‡ spring-cloud-starter-alibaba-nacos-discovery æ¥å®ç°æœåŠ¡æ³¨å†Œå’Œå‘ç°</p>`,28)),i("div",d,[s[4]||(s[4]=i("p",{class:"hint-container-title"},"æ³¨æ„",-1)),i("p",null,[s[1]||(s[1]=a("æ³¨æ„ï¼šå¦‚æœä½ çš„ Spring Cloud ç‰ˆæœ¬æ˜¯ 2020ï¼Œé‚£ä¹ˆ é…ç½®æ–‡ä»¶ ")),s[2]||(s[2]=i("strong",null,"bootstrap.yml",-1)),s[3]||(s[3]=a(" å°†ä¼šä¸èµ·ä½œç”¨ï¼Œä¼šå¯¼è‡´ nacos çš„é…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ç­‰é…ç½®å¤±æ•ˆï¼Œéœ€è¦æ·»åŠ ä¾èµ–ï¼Œè¯¦ç»†æ–¹æ¡ˆè¯·çœ‹ ")),h(t,{to:"/passages/2021-07-27-spring-cloud-error.html#spring-cloud-2020-bootstrap-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%A4%B1%E6%95%88"},{default:p(()=>s[0]||(s[0]=[a("Spring Cloud è¶Ÿå‘è®°å½•")])),_:1})])]),s[6]||(s[6]=n(`<h3 id="æ·»åŠ ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ ä¾èµ–"><span>æ·»åŠ ä¾èµ–</span></a></h3><div class="language-xml" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">&lt;!-- nacos æœåŠ¡å‘ç° --&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><blockquote><p>æ›´å¤šç‰ˆæœ¬å¯¹åº”å…³ç³»å‚è€ƒï¼š<a href="https://github.com/spring-cloud-incubator/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">ç‰ˆæœ¬è¯´æ˜ Wiki</a></p></blockquote><h3 id="æ·»åŠ é…ç½®" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ é…ç½®"><span>æ·»åŠ é…ç½®</span></a></h3><p>é€šè¿‡ Nacos çš„æœåŠ¡æ³¨å†Œå‘ç°åŠŸèƒ½å°†å…¶æœåŠ¡æ³¨å†Œåˆ° Nacos server ä¸Š</p><p><strong>åœ¨ <code>bootstrap.yml</code> ä¸­é…ç½® Nacos server çš„åœ°å€</strong></p><div class="language-yaml" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  cloud</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    nacos</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      discovery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        server-addr</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">127.0.0.1:8848</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  application</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    name</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">mall-order</span></span></code></pre></div><blockquote><p>æ³¨æ„ï¼šéœ€è¦é…ç½® application.name å±æ€§ï¼Œå› ä¸º Nacos æ³¨å†ŒæœåŠ¡é»˜è®¤å– <strong>\${spring.application.name}</strong> çš„å€¼</p></blockquote><h3 id="æ·»åŠ æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ æ³¨è§£"><span>æ·»åŠ æ³¨è§£</span></a></h3><p><strong>æ—©æœŸåœ¨å¯åŠ¨ç±»ä¸Šéœ€è¦åŠ ä¸Š @EnableDiscoveryClientæ³¨è§£ï¼Œç°åœ¨å·²ç»å¯ä»¥ä¸éœ€è¦åŠ äº†</strong></p><p><img src="https://media.zenghr.cn/blog/img/20210727/Hpj6v9.png" alt="Hpj6v9"></p><h2 id="å¯åŠ¨é…ç½®ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨é…ç½®ç®¡ç†"><span>å¯åŠ¨é…ç½®ç®¡ç†</span></a></h2><p>æˆ‘ä»¬é€šè¿‡ Nacos Server å’Œ <strong>spring-cloud-starter-alibaba-nacos-config</strong> å®ç°é…ç½®çš„åŠ¨æ€å˜æ›´</p><h3 id="æ·»åŠ ä¾èµ–-1" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ ä¾èµ–-1"><span>æ·»åŠ ä¾èµ–</span></a></h3><div class="language-xml" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">&lt;!-- nacos é…ç½®ä¸­å¿ƒ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;spring-cloud-starter-alibaba-nacos-config&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><blockquote><p>æ›´å¤šç‰ˆæœ¬å¯¹åº”å…³ç³»å‚è€ƒï¼š<a href="https://github.com/spring-cloud-incubator/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">ç‰ˆæœ¬è¯´æ˜ Wiki</a></p></blockquote><h3 id="æ·»åŠ é…ç½®-1" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ é…ç½®-1"><span>æ·»åŠ é…ç½®</span></a></h3><p><strong>åœ¨ <code>bootstrap.properties</code> ä¸­é…ç½® Nacos server çš„åœ°å€å’Œåº”ç”¨å</strong></p><div class="language-yaml" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  cloud</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    nacos</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      discovery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        server-addr</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">127.0.0.1:8848</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      config</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        server-addr</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">127.0.0.1:8848</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        file-extension</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">yaml</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  application</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    name</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">mall-order</span></span></code></pre></div><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>è¯´æ˜ï¼šä¹‹æ‰€ä»¥éœ€è¦é…ç½® <code>spring.application.name</code> ï¼Œæ˜¯å› ä¸ºå®ƒæ˜¯æ„æˆ Nacos é…ç½®ç®¡ç† <code>dataId</code>å­—æ®µçš„ä¸€éƒ¨åˆ†</p><p><strong>dataId = \${prefix}-\${spring.profiles.active}.\${file-extension}</strong></p></div><ul><li><strong>prefixï¼š</strong> é»˜è®¤ä¸º <code>spring.application.name</code> çš„å€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®é¡¹ <code>spring.cloud.nacos.config.prefix</code>æ¥é…ç½®ã€‚</li><li><strong>spring.profiles.activeï¼š</strong> å³ä¸ºå½“å‰ç¯å¢ƒå¯¹åº”çš„ profileï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒ <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-profiles.html#boot-features-profiles" target="_blank" rel="noopener noreferrer">Spring Bootæ–‡æ¡£</a>ã€‚ <strong>æ³¨æ„ï¼šå½“ spring.profiles.active ä¸ºç©ºæ—¶ï¼Œå¯¹åº”çš„è¿æ¥ç¬¦ <code>-</code> ä¹Ÿå°†ä¸å­˜åœ¨ï¼ŒdataId çš„æ‹¼æ¥æ ¼å¼å˜æˆ <code>\${prefix}.\${file-extension}</code></strong></li><li><strong>file-exetensionï¼š</strong> ä¸ºé…ç½®å†…å®¹çš„æ•°æ®æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡é…ç½®é¡¹ <code>spring.cloud.nacos.config.file-extension</code> æ¥é…ç½®ã€‚ç›®å‰åªæ”¯æŒ <code>properties</code> å’Œ <code>yaml</code> ç±»å‹ã€‚</li></ul><blockquote><p>å³ï¼Œé‡‡ç”¨ä¸Šè¿°é…ç½®ï¼Œ<code>nacosconfig</code> ä¼šä» Nacos Server è¯»å– Data Id ä¸º <code>nacosconfig.yaml</code> çš„é…ç½®ã€‚</p></blockquote><h3 id="nacos-æ§åˆ¶å°æ·»åŠ é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#nacos-æ§åˆ¶å°æ·»åŠ é…ç½®æ–‡ä»¶"><span>Nacos æ§åˆ¶å°æ·»åŠ é…ç½®æ–‡ä»¶</span></a></h3><p>åœ¨ Nacos æ§åˆ¶å°æ·»åŠ ä¸€ä¸ªæ–°çš„é…ç½®ï¼Œå…¶ä¸­ï¼š</p><ul><li>Data Idï¼š<code>nacosconfig</code></li><li>Groupï¼š<code>DEFAULT_GROUP</code></li><li>é…ç½®æ ¼å¼ï¼š<code>YAML</code></li></ul><p><img src="https://media.zenghr.cn/blog/img/20210727/JnlTaf.png" alt="JnlTaf"></p><p><img src="https://media.zenghr.cn/blog/img/20210727/hlPcGj.png" alt="hlPcGj"></p><h3 id="è¯»å–-nacos-å˜é‡é…ç½®" tabindex="-1"><a class="header-anchor" href="#è¯»å–-nacos-å˜é‡é…ç½®"><span>è¯»å– Nacos å˜é‡é…ç½®</span></a></h3><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RefreshScope</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RestController</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ConfigController</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Logger</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> logger </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getLogger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ConfigController</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Value</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;\${order.name:test}&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">value</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;/config&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> method</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> RequestMethod</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GET</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> index</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;get order config value from nacos: {}&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, name);</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> name;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><ul><li><strong>RefreshScopeï¼š</strong> å®ç°é…ç½®è‡ªåŠ¨æ›´æ–°ï¼Œåœ¨ nacos ä¸­ä¿®æ”¹äº†é…ç½®ï¼Œä¼šåŠ¨æ€æ›´æ–°æ•°æ®</li></ul>`,30))])}const y=e(k,[["render",c]]),C=JSON.parse('{"path":"/spring/spring-cloud/02.SpringCloud-Alibaba-Nacos.html","title":"SpringCloud Alibaba Nacos","lang":"zh-CN","frontmatter":{"title":"SpringCloud Alibaba Nacos","date":"2021-07-27T20:11:00.000Z","re":"2021-07-27-spring-cloud-alibaba-nacos","category":["Spring","SpringCloud"],"description":"SpringCloud Alibaba Nacos Nacos æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç† å¹³å° å‚è€ƒæ–‡æ¡£å¦‚ä¸‹ğŸ‘‡ Nacos å®˜ç½‘æ–‡æ¡£åœ°å€ï¼šhttps://nacos.io/zh-cn/docs/what-is-nacos.html Nacos Spring Cloud å¿«é€Ÿå¼€å§‹ï¼šhttps://nac...","permalink":"/passages/2021-07-27-spring-cloud-alibaba-nacos.html","head":[["meta",{"property":"og:url","content":"https://blog.zenghr.cn/passages/2021-07-27-spring-cloud-alibaba-nacos.html"}],["meta",{"property":"og:site_name","content":"Zenghr"}],["meta",{"property":"og:title","content":"SpringCloud Alibaba Nacos"}],["meta",{"property":"og:description","content":"SpringCloud Alibaba Nacos Nacos æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç† å¹³å° å‚è€ƒæ–‡æ¡£å¦‚ä¸‹ğŸ‘‡ Nacos å®˜ç½‘æ–‡æ¡£åœ°å€ï¼šhttps://nacos.io/zh-cn/docs/what-is-nacos.html Nacos Spring Cloud å¿«é€Ÿå¼€å§‹ï¼šhttps://nac..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://media.zenghr.cn/blog/img/20210727/XOjON2.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-07T20:13:02.000Z"}],["meta",{"property":"article:published_time","content":"2021-07-27T20:11:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-07T20:13:02.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"SpringCloud Alibaba Nacos\\",\\"image\\":[\\"https://media.zenghr.cn/blog/img/20210727/XOjON2.png\\",\\"https://media.zenghr.cn/blog/img/20210727/ZoWv68.png\\",\\"https://media.zenghr.cn/blog/img/20210727/Hpj6v9.png\\",\\"https://media.zenghr.cn/blog/img/20210727/JnlTaf.png\\",\\"https://media.zenghr.cn/blog/img/20210727/hlPcGj.png\\"],\\"datePublished\\":\\"2021-07-27T20:11:00.000Z\\",\\"dateModified\\":\\"2025-04-07T20:13:02.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zenghr\\"}]}"]]},"git":{"createdTime":1744056782000,"updatedTime":1744056782000,"contributors":[{"name":"zenghr","username":"zenghr","email":"zenghr","commits":1,"url":"https://github.com/zenghr"}]},"readingTime":{"minutes":4.3,"words":1290},"filePathRelative":"spring/spring-cloud/02.SpringCloud-Alibaba-Nacos.md","localizedDate":"2021å¹´7æœˆ27æ—¥","excerpt":"\\n<p><strong>Nacos</strong> æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç† å¹³å°</p>\\n<p><strong>å‚è€ƒæ–‡æ¡£å¦‚ä¸‹ğŸ‘‡</strong></p>\\n<blockquote>\\n<p>Nacos å®˜ç½‘æ–‡æ¡£åœ°å€ï¼š<a href=\\"https://nacos.io/zh-cn/docs/what-is-nacos.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://nacos.io/zh-cn/docs/what-is-nacos.html</a></p>\\n<p>Nacos Spring Cloud å¿«é€Ÿå¼€å§‹ï¼š<a href=\\"https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html</a></p>\\n</blockquote>","autoDesc":true}');export{y as comp,C as data};
