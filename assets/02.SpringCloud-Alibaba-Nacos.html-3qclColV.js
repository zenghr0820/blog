import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as l,a as n,d as i,i as a,b as h,w as p,r,o}from"./app-BNF1hQAw.js";const k={},d={class:"hint-container warning"};function c(g,s){const t=r("RouteLink");return o(),l("div",null,[s[5]||(s[5]=n(`<h1 id="springcloud-alibaba-nacos" tabindex="-1"><a class="header-anchor" href="#springcloud-alibaba-nacos"><span>SpringCloud Alibaba Nacos</span></a></h1><p><strong>Nacos</strong> 是阿里巴巴开源的一个更易于构建云原生应用的动态服务发现、配置管理和服务管理 平台</p><p><strong>参考文档如下👇</strong></p><blockquote><p>Nacos 官网文档地址：<a href="https://nacos.io/zh-cn/docs/what-is-nacos.html" target="_blank" rel="noopener noreferrer">https://nacos.io/zh-cn/docs/what-is-nacos.html</a></p><p>Nacos Spring Cloud 快速开始：<a href="https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html" target="_blank" rel="noopener noreferrer">https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html</a></p></blockquote><h2 id="nacos-搭建" tabindex="-1"><a class="header-anchor" href="#nacos-搭建"><span>Nacos 搭建</span></a></h2><p>根据 Nacos 官网的版本选择描述中，可以根据 <a href="https://github.com/alibaba/nacos/releases" target="_blank" rel="noopener noreferrer">releases</a> 中找到每个版本的介绍，Spring Cloud 版本对应关系可以查看 <a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">版本说明Wiki</a></p><h3 id="获取-nacos" tabindex="-1"><a class="header-anchor" href="#获取-nacos"><span>获取 Nacos</span></a></h3><ul><li>下载地址：<a href="https://github.com/alibaba/nacos/releases" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/nacos/releases</a></li><li>搭建文档：<a href="https://nacos.io/zh-cn/docs/quick-start.html" target="_blank" rel="noopener noreferrer">https://nacos.io/zh-cn/docs/quick-start.html</a></li></ul><h3 id="启动、关闭服务" tabindex="-1"><a class="header-anchor" href="#启动、关闭服务"><span>启动、关闭服务</span></a></h3><p><strong>Linux/Unix/Mac</strong></p><div class="language-sh" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Linux/Unix/Mac</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 启动命令(standalone代表着单机模式运行，非集群模式):</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">sh</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> startup.sh</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> standalone</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">sh</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> shutdown.sh</span></span></code></pre></div><p><strong>Window</strong></p><div class="language-sh" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 启动命令(standalone代表着单机模式运行，非集群模式):</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">startup.cmd</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> standalone</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">shutdown.cmd</span></span></code></pre></div><h3 id="访问-nacos-后台界面" tabindex="-1"><a class="header-anchor" href="#访问-nacos-后台界面"><span>访问 Nacos 后台界面</span></a></h3><p>当我们的 Nacos 运行起来时，我们可以访问 <a href="http://127.0.0.1:8848/nacos" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8848/nacos</a> 地址，输入账号密码：<strong><code>nacos</code></strong> 登录系统</p><p><img src="https://media.zenghr.cn/blog/img/20210727/XOjON2.png" alt="XOjON2"></p><p><img src="https://media.zenghr.cn/blog/img/20210727/ZoWv68.png" alt="ZoWv68"></p><h2 id="环境说明" tabindex="-1"><a class="header-anchor" href="#环境说明"><span>环境说明</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p><strong>Spring Cloud：</strong> 2020.0.3</p><p><strong>Nacos：</strong> 14.2</p><p><strong>spring-cloud-alibaba：</strong> 2021.1</p></div><p>关于 Nacos Spring Cloud 的详细文档请参看：<a href="https://github.com/spring-cloud-incubator/spring-cloud-alibaba/wiki/Nacos-config" target="_blank" rel="noopener noreferrer">Nacos Config</a> 和 <a href="https://github.com/spring-cloud-incubator/spring-cloud-alibaba/wiki/Nacos-discovery" target="_blank" rel="noopener noreferrer">Nacos Discovery</a>。</p><ul><li>通过 Nacos Server 和 spring-cloud-starter-alibaba-nacos-config 实现配置的动态变更。</li><li>通过 Nacos Server 和 spring-cloud-starter-alibaba-nacos-discovery 实现服务的注册与发现。</li></ul><h2 id="服务发现是什么" tabindex="-1"><a class="header-anchor" href="#服务发现是什么"><span>服务发现是什么</span></a></h2><h3 id="服务提供者与服务消费者" tabindex="-1"><a class="header-anchor" href="#服务提供者与服务消费者"><span>服务提供者与服务消费者</span></a></h3><ul><li>服务提供者：服务的被调用方（即：为其他微服务提供接口的微服务）</li><li>服务消费者：服务的调用方（即：调用其他微服务接口的微服务）</li></ul><h3 id="服务发现原理" tabindex="-1"><a class="header-anchor" href="#服务发现原理"><span>服务发现原理</span></a></h3><ul><li>服务发现机制就是通过一个中间件去记录服务提供者的ip地址，服务名以及心跳等数据（比如用mysql去存储这些信息），然后服务消费者会去这个中间平台去查询相关信息，然后再去访问对应的地址，这就是服务注册和服务发现。</li><li>当用户地址发生了变化也没有影响，因为服务提供方修改了用户地址，在中间件中会被更新，当服务消费方去访问中间件时就能及时获取最新的用户地址，就不会出现用户地址发生变化导致服务找不到</li></ul><h2 id="启动服务发现" tabindex="-1"><a class="header-anchor" href="#启动服务发现"><span>启动服务发现</span></a></h2><p>我们通过 spring-cloud-starter-alibaba-nacos-discovery 来实现服务注册和发现</p>`,28)),i("div",d,[s[4]||(s[4]=i("p",{class:"hint-container-title"},"注意",-1)),i("p",null,[s[1]||(s[1]=a("注意：如果你的 Spring Cloud 版本是 2020，那么 配置文件 ")),s[2]||(s[2]=i("strong",null,"bootstrap.yml",-1)),s[3]||(s[3]=a(" 将会不起作用，会导致 nacos 的配置管理、服务发现等配置失效，需要添加依赖，详细方案请看 ")),h(t,{to:"/passages/2021-07-27-spring-cloud-error.html#spring-cloud-2020-bootstrap-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%A4%B1%E6%95%88"},{default:p(()=>s[0]||(s[0]=[a("Spring Cloud 趟坑记录")])),_:1})])]),s[6]||(s[6]=n(`<h3 id="添加依赖" tabindex="-1"><a class="header-anchor" href="#添加依赖"><span>添加依赖</span></a></h3><div class="language-xml" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">&lt;!-- nacos 服务发现 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><blockquote><p>更多版本对应关系参考：<a href="https://github.com/spring-cloud-incubator/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">版本说明 Wiki</a></p></blockquote><h3 id="添加配置" tabindex="-1"><a class="header-anchor" href="#添加配置"><span>添加配置</span></a></h3><p>通过 Nacos 的服务注册发现功能将其服务注册到 Nacos server 上</p><p><strong>在 <code>bootstrap.yml</code> 中配置 Nacos server 的地址</strong></p><div class="language-yaml" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  cloud</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    nacos</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      discovery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        server-addr</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">127.0.0.1:8848</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  application</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    name</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">mall-order</span></span></code></pre></div><blockquote><p>注意：需要配置 application.name 属性，因为 Nacos 注册服务默认取 <strong>\${spring.application.name}</strong> 的值</p></blockquote><h3 id="添加注解" tabindex="-1"><a class="header-anchor" href="#添加注解"><span>添加注解</span></a></h3><p><strong>早期在启动类上需要加上 @EnableDiscoveryClient注解，现在已经可以不需要加了</strong></p><p><img src="https://media.zenghr.cn/blog/img/20210727/Hpj6v9.png" alt="Hpj6v9"></p><h2 id="启动配置管理" tabindex="-1"><a class="header-anchor" href="#启动配置管理"><span>启动配置管理</span></a></h2><p>我们通过 Nacos Server 和 <strong>spring-cloud-starter-alibaba-nacos-config</strong> 实现配置的动态变更</p><h3 id="添加依赖-1" tabindex="-1"><a class="header-anchor" href="#添加依赖-1"><span>添加依赖</span></a></h3><div class="language-xml" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">&lt;!-- nacos 配置中心 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;spring-cloud-starter-alibaba-nacos-config&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><blockquote><p>更多版本对应关系参考：<a href="https://github.com/spring-cloud-incubator/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">版本说明 Wiki</a></p></blockquote><h3 id="添加配置-1" tabindex="-1"><a class="header-anchor" href="#添加配置-1"><span>添加配置</span></a></h3><p><strong>在 <code>bootstrap.properties</code> 中配置 Nacos server 的地址和应用名</strong></p><div class="language-yaml" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  cloud</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    nacos</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      discovery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        server-addr</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">127.0.0.1:8848</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      config</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        server-addr</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">127.0.0.1:8848</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        file-extension</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">yaml</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  application</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    name</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">mall-order</span></span></code></pre></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>说明：之所以需要配置 <code>spring.application.name</code> ，是因为它是构成 Nacos 配置管理 <code>dataId</code>字段的一部分</p><p><strong>dataId = \${prefix}-\${spring.profiles.active}.\${file-extension}</strong></p></div><ul><li><strong>prefix：</strong> 默认为 <code>spring.application.name</code> 的值，也可以通过配置项 <code>spring.cloud.nacos.config.prefix</code>来配置。</li><li><strong>spring.profiles.active：</strong> 即为当前环境对应的 profile，详情可以参考 <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-profiles.html#boot-features-profiles" target="_blank" rel="noopener noreferrer">Spring Boot文档</a>。 <strong>注意：当 spring.profiles.active 为空时，对应的连接符 <code>-</code> 也将不存在，dataId 的拼接格式变成 <code>\${prefix}.\${file-extension}</code></strong></li><li><strong>file-exetension：</strong> 为配置内容的数据格式，可以通过配置项 <code>spring.cloud.nacos.config.file-extension</code> 来配置。目前只支持 <code>properties</code> 和 <code>yaml</code> 类型。</li></ul><blockquote><p>即，采用上述配置，<code>nacosconfig</code> 会从 Nacos Server 读取 Data Id 为 <code>nacosconfig.yaml</code> 的配置。</p></blockquote><h3 id="nacos-控制台添加配置文件" tabindex="-1"><a class="header-anchor" href="#nacos-控制台添加配置文件"><span>Nacos 控制台添加配置文件</span></a></h3><p>在 Nacos 控制台添加一个新的配置，其中：</p><ul><li>Data Id：<code>nacosconfig</code></li><li>Group：<code>DEFAULT_GROUP</code></li><li>配置格式：<code>YAML</code></li></ul><p><img src="https://media.zenghr.cn/blog/img/20210727/JnlTaf.png" alt="JnlTaf"></p><p><img src="https://media.zenghr.cn/blog/img/20210727/hlPcGj.png" alt="hlPcGj"></p><h3 id="读取-nacos-变量配置" tabindex="-1"><a class="header-anchor" href="#读取-nacos-变量配置"><span>读取 Nacos 变量配置</span></a></h3><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RefreshScope</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RestController</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ConfigController</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Logger</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> logger </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getLogger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ConfigController</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Value</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;\${order.name:test}&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">value</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;/config&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> method</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> RequestMethod</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">GET</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> index</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;get order config value from nacos: {}&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, name);</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> name;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><ul><li><strong>RefreshScope：</strong> 实现配置自动更新，在 nacos 中修改了配置，会动态更新数据</li></ul>`,30))])}const y=e(k,[["render",c]]),C=JSON.parse('{"path":"/spring/spring-cloud/02.SpringCloud-Alibaba-Nacos.html","title":"SpringCloud Alibaba Nacos","lang":"zh-CN","frontmatter":{"title":"SpringCloud Alibaba Nacos","date":"2021-07-27T20:11:00.000Z","re":"2021-07-27-spring-cloud-alibaba-nacos","category":["Spring","SpringCloud"],"description":"SpringCloud Alibaba Nacos Nacos 是阿里巴巴开源的一个更易于构建云原生应用的动态服务发现、配置管理和服务管理 平台 参考文档如下👇 Nacos 官网文档地址：https://nacos.io/zh-cn/docs/what-is-nacos.html Nacos Spring Cloud 快速开始：https://nac...","permalink":"/passages/2021-07-27-spring-cloud-alibaba-nacos.html","head":[["meta",{"property":"og:url","content":"https://blog.zenghr.cn/passages/2021-07-27-spring-cloud-alibaba-nacos.html"}],["meta",{"property":"og:site_name","content":"Zenghr"}],["meta",{"property":"og:title","content":"SpringCloud Alibaba Nacos"}],["meta",{"property":"og:description","content":"SpringCloud Alibaba Nacos Nacos 是阿里巴巴开源的一个更易于构建云原生应用的动态服务发现、配置管理和服务管理 平台 参考文档如下👇 Nacos 官网文档地址：https://nacos.io/zh-cn/docs/what-is-nacos.html Nacos Spring Cloud 快速开始：https://nac..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://media.zenghr.cn/blog/img/20210727/XOjON2.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-07T20:13:02.000Z"}],["meta",{"property":"article:published_time","content":"2021-07-27T20:11:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-07T20:13:02.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"SpringCloud Alibaba Nacos\\",\\"image\\":[\\"https://media.zenghr.cn/blog/img/20210727/XOjON2.png\\",\\"https://media.zenghr.cn/blog/img/20210727/ZoWv68.png\\",\\"https://media.zenghr.cn/blog/img/20210727/Hpj6v9.png\\",\\"https://media.zenghr.cn/blog/img/20210727/JnlTaf.png\\",\\"https://media.zenghr.cn/blog/img/20210727/hlPcGj.png\\"],\\"datePublished\\":\\"2021-07-27T20:11:00.000Z\\",\\"dateModified\\":\\"2025-04-07T20:13:02.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zenghr\\"}]}"]]},"git":{"createdTime":1744056782000,"updatedTime":1744056782000,"contributors":[{"name":"zenghr","username":"zenghr","email":"zenghr","commits":1,"url":"https://github.com/zenghr"}]},"readingTime":{"minutes":4.3,"words":1290},"filePathRelative":"spring/spring-cloud/02.SpringCloud-Alibaba-Nacos.md","localizedDate":"2021年7月27日","excerpt":"\\n<p><strong>Nacos</strong> 是阿里巴巴开源的一个更易于构建云原生应用的动态服务发现、配置管理和服务管理 平台</p>\\n<p><strong>参考文档如下👇</strong></p>\\n<blockquote>\\n<p>Nacos 官网文档地址：<a href=\\"https://nacos.io/zh-cn/docs/what-is-nacos.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://nacos.io/zh-cn/docs/what-is-nacos.html</a></p>\\n<p>Nacos Spring Cloud 快速开始：<a href=\\"https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html</a></p>\\n</blockquote>","autoDesc":true}');export{y as comp,C as data};
