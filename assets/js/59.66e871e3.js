(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{407:function(a,t,s){"use strict";s.r(t);var n=s(2),r=Object(n.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"springcloud-alibaba-nacos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#springcloud-alibaba-nacos"}},[a._v("#")]),a._v(" SpringCloud Alibaba Nacos")]),a._v(" "),t("p",[t("strong",[a._v("Nacos")]),a._v(" æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç† å¹³å°")]),a._v(" "),t("p",[t("strong",[a._v("å‚è€ƒæ–‡æ¡£å¦‚ä¸‹ğŸ‘‡")])]),a._v(" "),t("blockquote",[t("p",[a._v("Nacos å®˜ç½‘æ–‡æ¡£åœ°å€ï¼š"),t("a",{attrs:{href:"https://nacos.io/zh-cn/docs/what-is-nacos.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://nacos.io/zh-cn/docs/what-is-nacos.html"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("Nacos Spring Cloud å¿«é€Ÿå¼€å§‹ï¼š"),t("a",{attrs:{href:"https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html"),t("OutboundLink")],1)])]),a._v(" "),t("h2",{attrs:{id:"nacos-æ­å»º"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nacos-æ­å»º"}},[a._v("#")]),a._v(" Nacos æ­å»º")]),a._v(" "),t("p",[a._v("æ ¹æ® Nacos å®˜ç½‘çš„ç‰ˆæœ¬é€‰æ‹©æè¿°ä¸­ï¼Œå¯ä»¥æ ¹æ® "),t("a",{attrs:{href:"https://github.com/alibaba/nacos/releases",target:"_blank",rel:"noopener noreferrer"}},[a._v("releases"),t("OutboundLink")],1),a._v(" ä¸­æ‰¾åˆ°æ¯ä¸ªç‰ˆæœ¬çš„ä»‹ç»ï¼ŒSpring Cloud ç‰ˆæœ¬å¯¹åº”å…³ç³»å¯ä»¥æŸ¥çœ‹ "),t("a",{attrs:{href:"https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E",target:"_blank",rel:"noopener noreferrer"}},[a._v("ç‰ˆæœ¬è¯´æ˜Wiki"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"è·å–-nacos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è·å–-nacos"}},[a._v("#")]),a._v(" è·å– Nacos")]),a._v(" "),t("ul",[t("li",[a._v("ä¸‹è½½åœ°å€ï¼š"),t("a",{attrs:{href:"https://github.com/alibaba/nacos/releases",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/alibaba/nacos/releases"),t("OutboundLink")],1)]),a._v(" "),t("li",[a._v("æ­å»ºæ–‡æ¡£ï¼š"),t("a",{attrs:{href:"https://nacos.io/zh-cn/docs/quick-start.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://nacos.io/zh-cn/docs/quick-start.html"),t("OutboundLink")],1)])]),a._v(" "),t("h3",{attrs:{id:"å¯åŠ¨ã€å…³é—­æœåŠ¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¯åŠ¨ã€å…³é—­æœåŠ¡"}},[a._v("#")]),a._v(" å¯åŠ¨ã€å…³é—­æœåŠ¡")]),a._v(" "),t("p",[t("strong",[a._v("Linux/Unix/Mac")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Linux/Unix/Mac")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# å¯åŠ¨å‘½ä»¤(standaloneä»£è¡¨ç€å•æœºæ¨¡å¼è¿è¡Œï¼Œéé›†ç¾¤æ¨¡å¼):")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" startup.sh "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" standalone\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" shutdown.sh\n")])])]),t("p",[t("strong",[a._v("Window")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# å¯åŠ¨å‘½ä»¤(standaloneä»£è¡¨ç€å•æœºæ¨¡å¼è¿è¡Œï¼Œéé›†ç¾¤æ¨¡å¼):")]),a._v("\nstartup.cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" standalone\nshutdown.cmd\n")])])]),t("h3",{attrs:{id:"è®¿é—®-nacos-åå°ç•Œé¢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è®¿é—®-nacos-åå°ç•Œé¢"}},[a._v("#")]),a._v(" è®¿é—® Nacos åå°ç•Œé¢")]),a._v(" "),t("p",[a._v("å½“æˆ‘ä»¬çš„ Nacos è¿è¡Œèµ·æ¥æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—® "),t("a",{attrs:{href:"http://127.0.0.1:8848/nacos",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://127.0.0.1:8848/nacos"),t("OutboundLink")],1),a._v(" åœ°å€ï¼Œè¾“å…¥è´¦å·å¯†ç ï¼š"),t("strong",[t("code",[a._v("nacos")])]),a._v(" ç™»å½•ç³»ç»Ÿ")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://media.zenghr.cn/blog/img/20210727/XOjON2.png",alt:"XOjON2"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://media.zenghr.cn/blog/img/20210727/ZoWv68.png",alt:"ZoWv68"}})]),a._v(" "),t("h2",{attrs:{id:"ç¯å¢ƒè¯´æ˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¯å¢ƒè¯´æ˜"}},[a._v("#")]),a._v(" ç¯å¢ƒè¯´æ˜")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",[t("strong",[a._v("Spring Cloudï¼š")]),a._v(" 2020.0.3")]),a._v(" "),t("p",[t("strong",[a._v("Nacosï¼š")]),a._v(" 14.2")]),a._v(" "),t("p",[t("strong",[a._v("spring-cloud-alibabaï¼š")]),a._v(" 2021.1")])]),a._v(" "),t("p",[a._v("å…³äº Nacos Spring Cloud çš„è¯¦ç»†æ–‡æ¡£è¯·å‚çœ‹ï¼š"),t("a",{attrs:{href:"https://github.com/spring-cloud-incubator/spring-cloud-alibaba/wiki/Nacos-config",target:"_blank",rel:"noopener noreferrer"}},[a._v("Nacos Config"),t("OutboundLink")],1),a._v(" å’Œ "),t("a",{attrs:{href:"https://github.com/spring-cloud-incubator/spring-cloud-alibaba/wiki/Nacos-discovery",target:"_blank",rel:"noopener noreferrer"}},[a._v("Nacos Discovery"),t("OutboundLink")],1),a._v("ã€‚")]),a._v(" "),t("ul",[t("li",[a._v("é€šè¿‡ Nacos Server å’Œ spring-cloud-starter-alibaba-nacos-config å®ç°é…ç½®çš„åŠ¨æ€å˜æ›´ã€‚")]),a._v(" "),t("li",[a._v("é€šè¿‡ Nacos Server å’Œ spring-cloud-starter-alibaba-nacos-discovery å®ç°æœåŠ¡çš„æ³¨å†Œä¸å‘ç°ã€‚")])]),a._v(" "),t("h2",{attrs:{id:"æœåŠ¡å‘ç°æ˜¯ä»€ä¹ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æœåŠ¡å‘ç°æ˜¯ä»€ä¹ˆ"}},[a._v("#")]),a._v(" æœåŠ¡å‘ç°æ˜¯ä»€ä¹ˆ")]),a._v(" "),t("h3",{attrs:{id:"æœåŠ¡æä¾›è€…ä¸æœåŠ¡æ¶ˆè´¹è€…"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æœåŠ¡æä¾›è€…ä¸æœåŠ¡æ¶ˆè´¹è€…"}},[a._v("#")]),a._v(" æœåŠ¡æä¾›è€…ä¸æœåŠ¡æ¶ˆè´¹è€…")]),a._v(" "),t("ul",[t("li",[a._v("æœåŠ¡æä¾›è€…ï¼šæœåŠ¡çš„è¢«è°ƒç”¨æ–¹ï¼ˆå³ï¼šä¸ºå…¶ä»–å¾®æœåŠ¡æä¾›æ¥å£çš„å¾®æœåŠ¡ï¼‰")]),a._v(" "),t("li",[a._v("æœåŠ¡æ¶ˆè´¹è€…ï¼šæœåŠ¡çš„è°ƒç”¨æ–¹ï¼ˆå³ï¼šè°ƒç”¨å…¶ä»–å¾®æœåŠ¡æ¥å£çš„å¾®æœåŠ¡ï¼‰")])]),a._v(" "),t("h3",{attrs:{id:"æœåŠ¡å‘ç°åŸç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æœåŠ¡å‘ç°åŸç†"}},[a._v("#")]),a._v(" æœåŠ¡å‘ç°åŸç†")]),a._v(" "),t("ul",[t("li",[a._v("æœåŠ¡å‘ç°æœºåˆ¶å°±æ˜¯é€šè¿‡ä¸€ä¸ªä¸­é—´ä»¶å»è®°å½•æœåŠ¡æä¾›è€…çš„ipåœ°å€ï¼ŒæœåŠ¡åä»¥åŠå¿ƒè·³ç­‰æ•°æ®ï¼ˆæ¯”å¦‚ç”¨mysqlå»å­˜å‚¨è¿™äº›ä¿¡æ¯ï¼‰ï¼Œç„¶åæœåŠ¡æ¶ˆè´¹è€…ä¼šå»è¿™ä¸ªä¸­é—´å¹³å°å»æŸ¥è¯¢ç›¸å…³ä¿¡æ¯ï¼Œç„¶åå†å»è®¿é—®å¯¹åº”çš„åœ°å€ï¼Œè¿™å°±æ˜¯æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°ã€‚")]),a._v(" "),t("li",[a._v("å½“ç”¨æˆ·åœ°å€å‘ç”Ÿäº†å˜åŒ–ä¹Ÿæ²¡æœ‰å½±å“ï¼Œå› ä¸ºæœåŠ¡æä¾›æ–¹ä¿®æ”¹äº†ç”¨æˆ·åœ°å€ï¼Œåœ¨ä¸­é—´ä»¶ä¸­ä¼šè¢«æ›´æ–°ï¼Œå½“æœåŠ¡æ¶ˆè´¹æ–¹å»è®¿é—®ä¸­é—´ä»¶æ—¶å°±èƒ½åŠæ—¶è·å–æœ€æ–°çš„ç”¨æˆ·åœ°å€ï¼Œå°±ä¸ä¼šå‡ºç°ç”¨æˆ·åœ°å€å‘ç”Ÿå˜åŒ–å¯¼è‡´æœåŠ¡æ‰¾ä¸åˆ°")])]),a._v(" "),t("h2",{attrs:{id:"å¯åŠ¨æœåŠ¡å‘ç°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¯åŠ¨æœåŠ¡å‘ç°"}},[a._v("#")]),a._v(" å¯åŠ¨æœåŠ¡å‘ç°")]),a._v(" "),t("p",[a._v("æˆ‘ä»¬é€šè¿‡ spring-cloud-starter-alibaba-nacos-discovery æ¥å®ç°æœåŠ¡æ³¨å†Œå’Œå‘ç°")]),a._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[a._v("WARNING")]),a._v(" "),t("p",[a._v("æ³¨æ„ï¼šå¦‚æœä½ çš„ Spring Cloud ç‰ˆæœ¬æ˜¯ 2020ï¼Œé‚£ä¹ˆ é…ç½®æ–‡ä»¶ "),t("strong",[a._v("bootstrap.yml")]),a._v(" å°†ä¼šä¸èµ·ä½œç”¨ï¼Œä¼šå¯¼è‡´ nacos çš„é…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ç­‰é…ç½®å¤±æ•ˆï¼Œéœ€è¦æ·»åŠ ä¾èµ–ï¼Œè¯¦ç»†æ–¹æ¡ˆè¯·çœ‹ "),t("RouterLink",{attrs:{to:"/passages/2021-07-27-spring-cloud-error.html#spring-cloud-2020-bootstrap-é…ç½®æ–‡ä»¶å¤±æ•ˆ"}},[a._v("Spring Cloud è¶Ÿå‘è®°å½•")])],1)]),a._v(" "),t("h3",{attrs:{id:"æ·»åŠ ä¾èµ–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ·»åŠ ä¾èµ–"}},[a._v("#")]),a._v(" æ·»åŠ ä¾èµ–")]),a._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- nacos æœåŠ¡å‘ç° --\x3e")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("com.alibaba.cloud"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("spring-cloud-starter-alibaba-nacos-discovery"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("æ›´å¤šç‰ˆæœ¬å¯¹åº”å…³ç³»å‚è€ƒï¼š"),t("a",{attrs:{href:"https://github.com/spring-cloud-incubator/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E",target:"_blank",rel:"noopener noreferrer"}},[a._v("ç‰ˆæœ¬è¯´æ˜ Wiki"),t("OutboundLink")],1)])]),a._v(" "),t("h3",{attrs:{id:"æ·»åŠ é…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ·»åŠ é…ç½®"}},[a._v("#")]),a._v(" æ·»åŠ é…ç½®")]),a._v(" "),t("p",[a._v("é€šè¿‡ Nacos çš„æœåŠ¡æ³¨å†Œå‘ç°åŠŸèƒ½å°†å…¶æœåŠ¡æ³¨å†Œåˆ° Nacos server ä¸Š")]),a._v(" "),t("p",[t("strong",[a._v("åœ¨ "),t("code",[a._v("bootstrap.yml")]),a._v(" ä¸­é…ç½® Nacos server çš„åœ°å€")])]),a._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("cloud")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("nacos")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("discovery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("server-addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 127.0.0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8848")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("application")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" mall"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("order\n")])])]),t("blockquote",[t("p",[a._v("æ³¨æ„ï¼šéœ€è¦é…ç½® application.name å±æ€§ï¼Œå› ä¸º Nacos æ³¨å†ŒæœåŠ¡é»˜è®¤å– "),t("strong",[a._v("${spring.application.name}")]),a._v(" çš„å€¼")])]),a._v(" "),t("h3",{attrs:{id:"æ·»åŠ æ³¨è§£"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ·»åŠ æ³¨è§£"}},[a._v("#")]),a._v(" æ·»åŠ æ³¨è§£")]),a._v(" "),t("p",[t("strong",[a._v("æ—©æœŸåœ¨å¯åŠ¨ç±»ä¸Šéœ€è¦åŠ ä¸Š @EnableDiscoveryClientæ³¨è§£ï¼Œç°åœ¨å·²ç»å¯ä»¥ä¸éœ€è¦åŠ äº†")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://media.zenghr.cn/blog/img/20210727/Hpj6v9.png",alt:"Hpj6v9"}})]),a._v(" "),t("h2",{attrs:{id:"å¯åŠ¨é…ç½®ç®¡ç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¯åŠ¨é…ç½®ç®¡ç†"}},[a._v("#")]),a._v(" å¯åŠ¨é…ç½®ç®¡ç†")]),a._v(" "),t("p",[a._v("æˆ‘ä»¬é€šè¿‡ Nacos Server å’Œ "),t("strong",[a._v("spring-cloud-starter-alibaba-nacos-config")]),a._v(" å®ç°é…ç½®çš„åŠ¨æ€å˜æ›´")]),a._v(" "),t("h3",{attrs:{id:"æ·»åŠ ä¾èµ–-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ·»åŠ ä¾èµ–-2"}},[a._v("#")]),a._v(" æ·»åŠ ä¾èµ–")]),a._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- nacos é…ç½®ä¸­å¿ƒ --\x3e")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("com.alibaba.cloud"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("spring-cloud-starter-alibaba-nacos-config"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("æ›´å¤šç‰ˆæœ¬å¯¹åº”å…³ç³»å‚è€ƒï¼š"),t("a",{attrs:{href:"https://github.com/spring-cloud-incubator/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E",target:"_blank",rel:"noopener noreferrer"}},[a._v("ç‰ˆæœ¬è¯´æ˜ Wiki"),t("OutboundLink")],1)])]),a._v(" "),t("h3",{attrs:{id:"æ·»åŠ é…ç½®-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ·»åŠ é…ç½®-2"}},[a._v("#")]),a._v(" æ·»åŠ é…ç½®")]),a._v(" "),t("p",[t("strong",[a._v("åœ¨ "),t("code",[a._v("bootstrap.properties")]),a._v(" ä¸­é…ç½® Nacos server çš„åœ°å€å’Œåº”ç”¨å")])]),a._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("cloud")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("nacos")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("discovery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("server-addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 127.0.0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8848")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("config")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("server-addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 127.0.0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8848")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("file-extension")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" yaml\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("application")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" mall"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("order\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",[a._v("è¯´æ˜ï¼šä¹‹æ‰€ä»¥éœ€è¦é…ç½® "),t("code",[a._v("spring.application.name")]),a._v(" ï¼Œæ˜¯å› ä¸ºå®ƒæ˜¯æ„æˆ Nacos é…ç½®ç®¡ç† "),t("code",[a._v("dataId")]),a._v("å­—æ®µçš„ä¸€éƒ¨åˆ†")]),a._v(" "),t("p",[t("strong",[a._v("dataId = ${prefix}-${spring.profiles.active}.${file-extension}")])])]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("prefixï¼š")]),a._v("  é»˜è®¤ä¸º "),t("code",[a._v("spring.application.name")]),a._v(" çš„å€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®é¡¹ "),t("code",[a._v("spring.cloud.nacos.config.prefix")]),a._v("æ¥é…ç½®ã€‚")]),a._v(" "),t("li",[t("strong",[a._v("spring.profiles.activeï¼š")]),a._v(" å³ä¸ºå½“å‰ç¯å¢ƒå¯¹åº”çš„ profileï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒ "),t("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-profiles.html#boot-features-profiles",target:"_blank",rel:"noopener noreferrer"}},[a._v("Spring Bootæ–‡æ¡£"),t("OutboundLink")],1),a._v("ã€‚ "),t("strong",[a._v("æ³¨æ„ï¼šå½“ spring.profiles.active ä¸ºç©ºæ—¶ï¼Œå¯¹åº”çš„è¿æ¥ç¬¦ "),t("code",[a._v("-")]),a._v(" ä¹Ÿå°†ä¸å­˜åœ¨ï¼ŒdataId çš„æ‹¼æ¥æ ¼å¼å˜æˆ "),t("code",[a._v("${prefix}.${file-extension}")])])]),a._v(" "),t("li",[t("strong",[a._v("file-exetensionï¼š")]),a._v(" ä¸ºé…ç½®å†…å®¹çš„æ•°æ®æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡é…ç½®é¡¹ "),t("code",[a._v("spring.cloud.nacos.config.file-extension")]),a._v(" æ¥é…ç½®ã€‚ç›®å‰åªæ”¯æŒ "),t("code",[a._v("properties")]),a._v(" å’Œ "),t("code",[a._v("yaml")]),a._v(" ç±»å‹ã€‚")])]),a._v(" "),t("blockquote",[t("p",[a._v("å³ï¼Œé‡‡ç”¨ä¸Šè¿°é…ç½®ï¼Œ"),t("code",[a._v("nacosconfig")]),a._v(" ä¼šä» Nacos Server è¯»å– Data Id ä¸º "),t("code",[a._v("nacosconfig.yaml")]),a._v(" çš„é…ç½®ã€‚")])]),a._v(" "),t("h3",{attrs:{id:"nacos-æ§åˆ¶å°æ·»åŠ é…ç½®æ–‡ä»¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nacos-æ§åˆ¶å°æ·»åŠ é…ç½®æ–‡ä»¶"}},[a._v("#")]),a._v(" Nacos æ§åˆ¶å°æ·»åŠ é…ç½®æ–‡ä»¶")]),a._v(" "),t("p",[a._v("åœ¨ Nacos æ§åˆ¶å°æ·»åŠ ä¸€ä¸ªæ–°çš„é…ç½®ï¼Œå…¶ä¸­ï¼š")]),a._v(" "),t("ul",[t("li",[a._v("Data Idï¼š"),t("code",[a._v("nacosconfig")])]),a._v(" "),t("li",[a._v("Groupï¼š"),t("code",[a._v("DEFAULT_GROUP")])]),a._v(" "),t("li",[a._v("é…ç½®æ ¼å¼ï¼š"),t("code",[a._v("YAML")])])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://media.zenghr.cn/blog/img/20210727/JnlTaf.png",alt:"JnlTaf"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://media.zenghr.cn/blog/img/20210727/hlPcGj.png",alt:"hlPcGj"}})]),a._v(" "),t("h3",{attrs:{id:"è¯»å–-nacos-å˜é‡é…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¯»å–-nacos-å˜é‡é…ç½®"}},[a._v("#")]),a._v(" è¯»å– Nacos å˜é‡é…ç½®")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@RefreshScope")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@RestController")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ConfigController")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("final")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Logger")]),a._v(" logger "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("LoggerFactory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getLogger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ConfigController")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"${order.name:test}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@RequestMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("value "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/config"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" method "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("RequestMethod")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("GET")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("index")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        logger"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"get order config value from nacos: {}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("ul",[t("li",[t("strong",[a._v("RefreshScopeï¼š")]),a._v(" å®ç°é…ç½®è‡ªåŠ¨æ›´æ–°ï¼Œåœ¨ nacos ä¸­ä¿®æ”¹äº†é…ç½®ï¼Œä¼šåŠ¨æ€æ›´æ–°æ•°æ®")])])])}),[],!1,null,null,null);t.default=r.exports}}]);