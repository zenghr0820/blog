(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{410:function(a,t,s){"use strict";s.r(t);var n=s(2),r=Object(n.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"spring-cloud-趟坑记录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-cloud-趟坑记录"}},[a._v("#")]),a._v(" Spring Cloud 趟坑记录")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",[a._v("本文记录一些在使用 Spring Cloud 中的一些踩坑记录，防止以后再遇到")])]),a._v(" "),t("h2",{attrs:{id:"spring-cloud-2020-bootstrap-配置文件失效"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-cloud-2020-bootstrap-配置文件失效"}},[a._v("#")]),a._v(" Spring Cloud 2020 bootstrap 配置文件失效")]),a._v(" "),t("p",[a._v("在使用 nacos-config 读取 nacos 配置时，发现bootstrap.yml一直不生效")]),a._v(" "),t("h3",{attrs:{id:"查找原因"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查找原因"}},[a._v("#")]),a._v(" 查找原因")]),a._v(" "),t("p",[a._v("从 Spring Boot 2.4 版本开始，配置文件加载方式进行了重构，默认不加载 "),t("strong",[a._v("bootstrap.yml")]),a._v(" 配置文件")]),a._v(" "),t("h3",{attrs:{id:"解决方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[a._v("#")]),a._v(" 解决方案")]),a._v(" "),t("p",[a._v("引入依赖解决问题")]),a._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("org.springframework.cloud"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("spring-cloud-starter-bootstrap"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),t("h2",{attrs:{id:"springcloud-2020版本-gateway-nacos-服务报错503-service-unavailable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#springcloud-2020版本-gateway-nacos-服务报错503-service-unavailable"}},[a._v("#")]),a._v(" SpringCloud 2020版本 Gateway + Nacos，服务报错503 Service Unavailable")]),a._v(" "),t("p",[a._v("由于 "),t("strong",[a._v("SpringCloud 2020")]),a._v(" 弃用了 Ribbon，因此 Alibaba 在 "),t("strong",[t("code",[a._v("2021 版本 nacos")])]),a._v(" 中删除了 Ribbon的 jar 包，因此无法通过"),t("strong",[a._v("lb路由到指定微服务，出现了503情况")])]),a._v(" "),t("p",[a._v("所以只需要引入 "),t("strong",[a._v("springcloud loadbalancer")]),a._v(" 包即可")]),a._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!--客户端负载均衡loadbalancer--\x3e")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("org.springframework.cloud"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("spring-cloud-starter-loadbalancer"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),t("h2",{attrs:{id:"no-feign-client-for-loadbalancing-defined-did-you-forget-to-include-spring-cloud-starter-loadbalancer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#no-feign-client-for-loadbalancing-defined-did-you-forget-to-include-spring-cloud-starter-loadbalancer"}},[a._v("#")]),a._v(" No Feign Client for loadBalancing defined. Did you forget to include spring-cloud-starter-loadbalancer?")]),a._v(" "),t("p",[a._v("出错原因也是因为缺少 负载均衡的包，所以导入  "),t("strong",[a._v("springcloud loadbalancer")]),a._v(" 包即可")])])}),[],!1,null,null,null);t.default=r.exports}}]);