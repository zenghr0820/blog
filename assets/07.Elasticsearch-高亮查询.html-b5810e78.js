import{_ as i}from"./plugin-vue_export-helper-c27b6911.js";import{r as p,o as l,c as u,d as n,e as s,b as a,w as o,a as t}from"./app-1b7382bc.js";const r={},d=t('<h1 id="elasticsearch-é«˜äº®æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#elasticsearch-é«˜äº®æŸ¥è¯¢" aria-hidden="true">#</a> Elasticsearch é«˜äº®æŸ¥è¯¢</h1><p>æ—¥å¸¸ç”Ÿæ´»ä¸­æˆ‘ä»¬ä½¿ç”¨æœç´¢å·¥å…·å°è¯•æŸ¥è¯¢ä¸€äº›ä¿¡æ¯çš„æ—¶å€™ï¼Œå¸¸å¸¸å¯ä»¥çœ‹åˆ°è¿”å›çš„ç»“æœé›†ä¸­å’Œæˆ‘ä»¬æŸ¥è¯¢æ¡ä»¶ç›¸ç¬¦åˆçš„å­—æ®µè¢«ç‰¹æ®Šçš„é¢œè‰²æ‰€æ ‡è®°ï¼Œè¿™å°±æ˜¯ç»“æœé«˜äº®æ˜¾ç¤ºã€‚é€šè¿‡é«˜äº®æ˜¾ç¤ºç”¨æˆ·å¯ä»¥æ˜æ˜¾çš„å‘ç°æŸ¥è¯¢åŒ¹é…çš„ä½ç½®ï¼ŒElasticsearch ä½¿ç”¨ <code>highlight</code> æ¥å®ç°æœç´¢ç»“æœä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µçªå‡ºæ˜¾ç¤º</p><h2 id="ä¾‹å­ğŸŒ°" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­ğŸŒ°" aria-hidden="true">#</a> ä¾‹å­ğŸŒ°</h2><p>ä¸¾ä¸ªğŸŒ° - <em>æŸ¥è¯¢ æ”»ç•¥ä¸­å¸¦ä¸Šæµ·çš„æ•°æ® - å¤šå­—æ®µåŒ¹é…</em></p><h3 id="æ˜ å°„ç»“æ„" tabindex="-1"><a class="header-anchor" href="#æ˜ å°„ç»“æ„" aria-hidden="true">#</a> æ˜ å°„ç»“æ„</h3><p>ä¸‹é¢æ˜¯ä¾‹å­æ‰€ä½¿ç”¨çš„æ˜ å°„ç»“æ„</p>',6),k=n("code",null,"IK",-1),v=t(`<div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;_doc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;subTitle&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;store&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_max_word&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;summary&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;store&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_max_word&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;store&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_max_word&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œå¦‚ä¸‹è¯·æ±‚ä¹‹åä¼šå¾—åˆ°è¿”å›å†…å®¹ï¼Œåœ¨ <code>hits</code> ä¸­é™¤äº†å¸¸è§„æ•°æ®å¤–ï¼Œè¿˜ä¼šæœ‰ <strong><code>highlight</code></strong> å¯¹è±¡</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;multi_match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ä¸Šæµ·&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;subTitle&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;summary&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;highlight&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;pre_tags&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;b&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;post_tags&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;/b&gt;&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;subTitle&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;summary&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;pre_tags&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;b&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;post_tags&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;/b&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;number_of_fragments&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;fragment_size&quot;</span><span class="token operator">:</span> <span class="token number">10</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿”å›çš„ç»“æœé‡Œé¢æ¯ä¸ª hit å¤šäº†ä¸€ä¸ªç±»ä¼¼è¿™æ ·éƒ¨åˆ†ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;strategy_es&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">2.4005952</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
          <span class="token property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;æ‡’äººåƒè´§æŒ‡å— | è½»æ¾åƒéåœ°é“ä¸Šæµ·å°åƒ&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;subTitle&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;è½»æ¾åƒéåœ°é“ä¸Šæµ·å°åƒ&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;summary&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;å»ä¸€ä¸ªåœ°æ–¹æ—…è¡Œå½“ç„¶è¦å°å°å½“åœ°çš„ç‰¹è‰²ç¾é£Ÿï¼Œä¸ç„¶æ€»è§‰å¾—è¿™è¶Ÿæ—…è¡Œä¸å®Œæ•´ã€‚ä½†æ˜¯å¯¹äºä¸ç†Ÿæ‚‰ä¸Šæµ·çš„æ¸¸å®¢æ¥è¯´ï¼Œâ€œå“ªäº›æ˜¯è€ä¸Šæµ·å°åƒï¼Ÿå»å“ªé‡Œèƒ½åƒåˆ°åœ°é“çš„ï¼Ÿâ€è¿™äº›éƒ½æ˜¯å¤´ç–¼çš„é—®é¢˜ã€‚è¿™ç¯‡æ”»ç•¥å°†ä¼šç»™å¤§å®¶ä»‹ç»è€ä¸Šæµ·å°åƒï¼Œæ¨èä¸€äº›è€å­—å·ï¼Œå¹¶é™„ä¸Šå‘¨è¾¹æ¸¸ç©å°Tips&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;highlight&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;summary&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;ä½†æ˜¯å¯¹äºä¸ç†Ÿæ‚‰&lt;b&gt;ä¸Šæµ·&lt;/b&gt;çš„æ¸¸å®¢æ¥è¯´&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;ï¼Œâ€œå“ªäº›æ˜¯è€&lt;b&gt;ä¸Šæµ·&lt;/b&gt;å°åƒï¼Ÿ&quot;</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;subTitle&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;è½»æ¾åƒéåœ°é“&lt;em&gt;ä¸Šæµ·&lt;/em&gt;å°åƒ&quot;</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;æ‡’äººåƒè´§æŒ‡å— | è½»æ¾åƒéåœ°é“&lt;b&gt;ä¸Šæµ·&lt;/b&gt;å°åƒ&quot;</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="é«˜äº®è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#é«˜äº®è®¾ç½®" aria-hidden="true">#</a> é«˜äº®è®¾ç½®</h2><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬é¢„è®¾äº† é«˜äº®å…³é”®å­— çš„HTMLæ ‡ç­¾è¿›è¡ŒåŒ…è£¹ï¼Œä¸‹é¢æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹é«˜äº® <strong>highlight</strong> çš„å‚æ•°å®šä¹‰ï¼Œä¸‹é¢çš„å‚æ•°å¯ä»¥è®¾ç½®åœ¨ <code>highlight</code> çš„ä¸‹ä¸€çº§æ­¤æ—¶ä¸º <strong>å…¨å±€è®¾ç½®</strong>ï¼Œä¹Ÿå¯ä»¥è®¾ç½®åœ¨å­—æ®µçš„ä¸‹ä¸€çº§ï¼Œæ­¤æ—¶ä¸º <strong>å­—æ®µè®¾ç½®</strong></p><blockquote><p>å•ä¸ªå­—æ®µçš„è®¾ç½®ä¼˜å…ˆçº§é«˜äºå…¨å±€è®¾ç½®</p></blockquote><h3 id="number-of-fragments" tabindex="-1"><a class="header-anchor" href="#number-of-fragments" aria-hidden="true">#</a> number_of_fragments</h3><p>è¦è¿”å›çš„æœ€å¤§ç‰‡æ®µæ•°ï¼Œå¦‚æœç‰‡æ®µæ•°è®¾ç½®ä¸º 0ï¼Œåˆ™ä¸è¿”å›ä»»ä½•ç‰‡æ®µï¼Œ<strong>è€Œæ˜¯çªå‡ºæ˜¾ç¤ºå¹¶è¿”å›æ•´ä¸ªå­—æ®µå†…å®¹</strong>ã€‚</p><p>å½“æ‚¨éœ€è¦çªå‡ºæ˜¾ç¤ºæ ‡é¢˜æˆ–åœ°å€ç­‰çŸ­æ–‡æœ¬æ—¶ï¼Œè¿™ä¼šå¾ˆæ–¹ä¾¿ï¼Œä½†ä¸éœ€è¦åˆ†æ®µã€‚å¦‚æœ<code>number_of_fragments</code> ä¸º 0ï¼Œ<code>fragment_size</code>åˆ™å¿½ç•¥ã€‚é»˜è®¤ä¸º 5</p><p>ä¾‹å¦‚ä¸Šé¢ğŸ‘†æˆ‘ä»¬è®¾ç½®äº† <em>number_of_fragments: 2</em> ï¼Œé‚£ä¹ˆ summary å­—æ®µè¿”å›äº†ä¸¤æ®µæ•°æ®</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;summary&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;ä½†æ˜¯å¯¹äºä¸ç†Ÿæ‚‰&lt;b&gt;ä¸Šæµ·&lt;/b&gt;çš„æ¸¸å®¢æ¥è¯´&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;ï¼Œâ€œå“ªäº›æ˜¯è€&lt;b&gt;ä¸Šæµ·&lt;/b&gt;å°åƒï¼Ÿ&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœè®¾ç½®æˆ 0 ï¼Œå°±è¿”å›åŸæœ¬æ•°æ®</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;summary&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;å»ä¸€ä¸ªåœ°æ–¹æ—…è¡Œå½“ç„¶è¦å°å°å½“åœ°çš„ç‰¹è‰²ç¾é£Ÿï¼Œä¸ç„¶æ€»è§‰å¾—è¿™è¶Ÿæ—…è¡Œä¸å®Œæ•´ã€‚ä½†æ˜¯å¯¹äºä¸ç†Ÿæ‚‰&lt;b&gt;ä¸Šæµ·&lt;/b&gt;çš„æ¸¸å®¢æ¥è¯´ï¼Œâ€œå“ªäº›æ˜¯è€&lt;b&gt;ä¸Šæµ·&lt;/b&gt;å°åƒï¼Ÿå»å“ªé‡Œèƒ½åƒåˆ°åœ°é“çš„ï¼Ÿâ€è¿™äº›éƒ½æ˜¯å¤´ç–¼çš„é—®é¢˜ã€‚è¿™ç¯‡æ”»ç•¥å°†ä¼šç»™å¤§å®¶ä»‹ç»è€&lt;b&gt;ä¸Šæµ·&lt;/b&gt;å°åƒï¼Œæ¨èä¸€äº›è€å­—å·ï¼Œå¹¶é™„ä¸Šå‘¨è¾¹æ¸¸ç©å°Tips&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fragment-size" tabindex="-1"><a class="header-anchor" href="#fragment-size" aria-hidden="true">#</a> fragment_size</h3><p>ä¸€æ®µ fragment åŒ…å«å¤šå°‘ä¸ªå­—ç¬¦ï¼ˆä»¥å­—ç¬¦ä¸ºå•ä½ï¼‰é»˜è®¤ä¸º 100</p><h3 id="pre-tags" tabindex="-1"><a class="header-anchor" href="#pre-tags" aria-hidden="true">#</a> pre_tags</h3><p>æ ‡è®° highlight çš„å¼€å§‹æ ‡ç­¾ï¼Œä¾‹å¦‚ä¸Šé¢çš„ <code>&lt;b&gt;</code> æ ‡ç­¾</p><h3 id="post-tags" tabindex="-1"><a class="header-anchor" href="#post-tags" aria-hidden="true">#</a> post_tags</h3><p>æ ‡è®° highlight çš„ç»“æŸæ ‡ç­¾ï¼Œä¾‹å¦‚ä¸Šé¢çš„ <code>&lt;/b&gt;</code> æ ‡ç­¾</p><blockquote><p>ç³»ç»Ÿé¢„è®¾çš„æ ‡ç­¾ä¸º <code>&lt;em&gt;</code></p></blockquote><h3 id="order" tabindex="-1"><a class="header-anchor" href="#order" aria-hidden="true">#</a> order</h3><p>orderæ§åˆ¶äº†è¿”å›å¯¹è±¡ä¸­ <code>highlight</code> ç‰‡æ®µçš„æ’åºã€‚ä¸‹é¢ä¾‹å­ä¸­è¿”å›çš„é«˜äº®ç‰‡æ®µå°†ä¼šæ ¹æ®åˆ†æ•°é¡ºåºè¾“å‡ºã€‚å‡å¦‚è®¾ç½®äº†noneåˆ™æ˜¯æŒ‰ç…§é¡ºåºè¾“å‡º</p>`,24),m={class:"hint-container tip"},b=n("p",{class:"hint-container-title"},"æç¤º",-1),g={href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-highlighting.html#highlighting-settings",target:"_blank",rel:"noopener noreferrer"},h=n("h2",{id:"java-ä»£ç å®ç°é«˜äº®æŸ¥è¯¢",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#java-ä»£ç å®ç°é«˜äº®æŸ¥è¯¢","aria-hidden":"true"},"#"),s(" Java ä»£ç å®ç°é«˜äº®æŸ¥è¯¢")],-1),q={class:"hint-container tip"},y=n("p",{class:"hint-container-title"},"æç¤º",-1),_=t(`<table><thead><tr><th>æ¡†æ¶</th><th>ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>SpringBoot</td><td>2.5.3</td></tr><tr><td>Elasticsearch</td><td>7.14.0</td></tr><tr><td>Spring Data Elasticsearch</td><td>4.2.3</td></tr></tbody></table><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">ElasticsearchRestTemplate</span> restTemplate<span class="token punctuation">;</span>
<span class="token comment">// ----------------------------------------------</span>
<span class="token comment">// æ„å»ºæŸ¥è¯¢å¯¹è±¡</span>
<span class="token class-name">NativeSearchQueryBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NativeSearchQueryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è·å–å­—æ®µ</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;subTitle&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;summary&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å¤šå­—æ®µåŒ¹é…</span>
<span class="token class-name">MultiMatchQueryBuilder</span> multiMatchQueryBuilder <span class="token operator">=</span>
    <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">multiMatchQuery</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸Šæµ·&quot;</span><span class="token punctuation">,</span> fields<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è®¾ç½®é«˜äº®</span>
<span class="token class-name">HighlightBuilder</span> highlightBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HighlightBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    highlightBuilder<span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span>field<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

highlightBuilder<span class="token punctuation">.</span><span class="token function">requireFieldMatch</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¦‚æœè¦å¤šä¸ªå­—æ®µé«˜äº®,è¿™é¡¹è¦ä¸ºfalse</span>
highlightBuilder<span class="token punctuation">.</span><span class="token function">preTags</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;span style=&#39;color:red&#39;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é«˜äº®è®¾ç½®</span>
highlightBuilder<span class="token punctuation">.</span><span class="token function">postTags</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/span&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
highlightBuilder<span class="token punctuation">.</span><span class="token function">numOfFragments</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å›ç»“æœæœ€å¤šå¯ä»¥åŒ…å«å‡ æ®µä¸è¿ç»­çš„æ–‡å­—ã€‚é»˜è®¤æ˜¯5, è¿™é‡Œä¸åˆ†æ®µæ˜¾ç¤º</span>

<span class="token comment">// åˆ†é¡µ</span>
<span class="token class-name">Pageable</span> pageable <span class="token operator">=</span> <span class="token class-name">PageRequest</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span>
                                   <span class="token class-name">Sort<span class="token punctuation">.</span>Direction</span><span class="token punctuation">.</span><span class="token constant">ASC</span><span class="token punctuation">,</span> <span class="token string">&quot;_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è®¾ç½®åˆ†é¡µå‚æ•°</span>

<span class="token comment">// å°è£…æŸ¥è¯¢</span>
builder<span class="token punctuation">.</span><span class="token function">withQuery</span><span class="token punctuation">(</span>multiMatchQueryBuilder<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">withPageable</span><span class="token punctuation">(</span>pageable<span class="token punctuation">)</span> <span class="token comment">// å°è£…åˆ†é¡µ</span>
    <span class="token punctuation">.</span><span class="token function">withHighlightBuilder</span><span class="token punctuation">(</span>highlightBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">NativeSearchQuery</span> searchQuery <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å‘èµ·æ£€ç´¢è¯·æ±‚</span>
<span class="token comment">// å‚æ•°ï¼šæŸ¥è¯¢æ¡ä»¶å¯¹è±¡ï¼Œè¿”å›æ³›å‹ï¼Œç´¢å¼•åç§°</span>
<span class="token class-name">SearchHits</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Strategy</span><span class="token punctuation">&gt;</span></span> searchHits <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>searchQuery<span class="token punctuation">,</span> <span class="token class-name">Strategy</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">IndexCoordinates</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;strategy_es&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ... è¾“å‡ºé«˜äº®å†…å®¹</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2);function f(x,w){const e=p("RouterLink"),c=p("ExternalLinkIcon");return l(),u("div",null,[d,n("blockquote",null,[n("p",null,[s("æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨äº† "),k,s(" åˆ†è¯å™¨ï¼Œå¦‚éœ€äº†è§£ IK åˆ†è¯å™¨è¯·çœ‹ "),a(e,{to:"/passages/2021-08-16-elasticsearch-ik.html"},{default:o(()=>[s("Elasticsearch ä¸­æ–‡åˆ†è¯å™¨")]),_:1})])]),v,n("div",m,[b,n("p",null,[s("æœ€å‡†ç¡®çš„æ–‡æ¡£è¿˜æ˜¯å®˜ç½‘ï¼Œæ›´å¤šçš„å‚æ•°è¯·å‚è€ƒ"),n("a",g,[s("å®˜æ–¹æ–‡æ¡£"),a(c)]),s("ã€‚")])]),h,n("div",q,[y,n("p",null,[s("åœ¨è¿™é‡Œæˆ‘ä»¬å°±ä¸ä»‹ç» Elasticsearch å’Œ SpringBoot çš„é›†æˆï¼Œå¦‚æœä¸ä¼šè¯·çœ‹ä¸Šä¸€ç¯‡æ–‡ç«  "),a(e,{to:"/passages/2021-08-18-elasticsearch-integrate-springboot.html"},{default:o(()=>[s("SpringBoot é›†æˆ Elasticsearch")]),_:1})])]),_])}const S=i(r,[["render",f],["__file","07.Elasticsearch-é«˜äº®æŸ¥è¯¢.html.vue"]]);export{S as default};
