import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as n,o as h}from"./app-BnToYpnS.js";const k={};function t(l,s){return h(),a("div",null,s[0]||(s[0]=[n(`<h1 id="activiti7-å¸¸ç”¨-api" tabindex="-1"><a class="header-anchor" href="#activiti7-å¸¸ç”¨-api"><span>Activiti7 å¸¸ç”¨ Api</span></a></h1><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>è®°å½•ä¸€ä¸‹å¸¸ç”¨çš„ Api ä½¿ç”¨</p></div><h2 id="ä¸€ã€æµç¨‹å®šä¹‰ç›¸å…³-api" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€æµç¨‹å®šä¹‰ç›¸å…³-api"><span>ä¸€ã€æµç¨‹å®šä¹‰ç›¸å…³ Api</span></a></h2><blockquote><p>ä»¥ä¸‹ Api è·Ÿæµç¨‹å®šä¹‰ç›¸å…³</p></blockquote><h2 id="æ ¹æ®æµç¨‹å®šä¹‰-keyæŸ¥è¯¢æµç¨‹" tabindex="-1"><a class="header-anchor" href="#æ ¹æ®æµç¨‹å®šä¹‰-keyæŸ¥è¯¢æµç¨‹"><span>æ ¹æ®æµç¨‹å®šä¹‰ KeyæŸ¥è¯¢æµç¨‹</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ProcessDefinition</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> selectProcessDefinitionByKey</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> definitionKey) {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ProcessDefinition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processDefinitions </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> repositoryService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createProcessDefinitionQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processDefinitionKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(definitionKey)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">orderByProcessDefinitionVersion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">desc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">list</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessDefinition</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processDefinition </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">processDefinitions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">size</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        processDefinition </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> processDefinitions</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processDefinition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><p><strong>Api è¯´æ˜ï¼š</strong></p><ul><li>æ ¹æ®éƒ¨ç½²ç‰ˆæœ¬å€’åºæ’åºï¼Œè·å–æ‰€æœ‰æµç¨‹éƒ¨ç½²ä¿¡æ¯ï¼Œå–æœ€æ–°çš„æ•°æ®</li></ul><h2 id="æ ¹æ®éƒ¨ç½²-id-æŸ¥è¯¢æµç¨‹" tabindex="-1"><a class="header-anchor" href="#æ ¹æ®éƒ¨ç½²-id-æŸ¥è¯¢æµç¨‹"><span>æ ¹æ®éƒ¨ç½² Id æŸ¥è¯¢æµç¨‹</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ProcessDefinition</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> selectProcessDefinitionByDeploymentId</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> deploymentId) {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> repositoryService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createProcessDefinitionQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">deploymentId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(deploymentId)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">singleResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h2 id="è·å–æµç¨‹-xml-æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#è·å–æµç¨‹-xml-æ–‡ä»¶"><span>è·å–æµç¨‹ XML æ–‡ä»¶</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> InputStream</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> getResourceAsStream</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> deploymentId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> resourceName) {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> repositoryService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getResourceAsStream</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(deploymentId, resourceName);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><p><strong>å‚æ•°è¯´æ˜ï¼š</strong> å‚æ•°éƒ½ä»æµç¨‹å®šä¹‰ä¸­è·å– processDefinition</p><ul><li><strong>deploymentId</strong> - æµç¨‹éƒ¨ç½² ID</li><li><strong>resourceName</strong> - èµ„æºåç§°</li></ul><h2 id="è·å–å½“å‰æµç¨‹çš„æµç¨‹å›¾-é«˜äº®æ˜¾ç¤º" tabindex="-1"><a class="header-anchor" href="#è·å–å½“å‰æµç¨‹çš„æµç¨‹å›¾-é«˜äº®æ˜¾ç¤º"><span>è·å–å½“å‰æµç¨‹çš„æµç¨‹å›¾(é«˜äº®æ˜¾ç¤º)</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> InputStream</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> getProcessImage</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processDefinitionId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">                                   List</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> highLightedActivities</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">                                   List</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> highLightedFlows) {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    BpmnModel</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> model </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> repositoryService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getBpmnModel</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(processDefinitionId);</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessDiagramGenerator</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> generator </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> DefaultProcessDiagramGenerator</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //generateDiagram(æµç¨‹æ¨¡å‹,éœ€è¦é«˜äº®çš„èŠ‚ç‚¹,éœ€è¦é«˜äº®çš„çº¿æ¡,åé¢ä¸‰ä¸ªå‚æ•°éƒ½è¡¨ç¤ºæ˜¯å­—ä½“)</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    InputStream</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> inputStream </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> generator</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">generateDiagram</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(model, highLightedActivities, highLightedFlows, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;å®‹ä½“&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;å®‹ä½“&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;å®‹ä½“&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> inputStream</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ul><li><strong>highLightedActivities</strong> - éœ€è¦é«˜äº®çš„èŠ‚ç‚¹åˆ—è¡¨ï¼Œå­˜èŠ‚ç‚¹ ID</li><li><strong>highLightedFlows</strong> - éœ€è¦é«˜äº®çš„è¿çº¿ï¼Œå­˜è¿çº¿ ID</li></ul><blockquote><p>å¦‚æœæµç¨‹ä¸­æœ‰ä¸­æ–‡ï¼Œéœ€è¦ä¼ å…¥èƒ½è¯†åˆ«ä¸­æ–‡çš„å­—ä½“ï¼Œä¾‹å¦‚ï¼šå®‹ä½“</p></blockquote><h2 id="è·å–æµç¨‹ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#è·å–æµç¨‹ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯"><span>è·å–æµç¨‹ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯</span></a></h2><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> findUserTaskNode</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // è·å–æµç¨‹ä¿¡æ¯ï¼Œè·å–æ–¹æ³•æŸ¥çœ‹ä¸Šé¢ğŸ‘†æå¾—åˆ°çš„ Api</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessDefinition</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processDefinition </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> selectProcessDefinitionByKey</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;XXXKey&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    BpmnModel</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> model </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> repositoryService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getBpmnModel</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">processDefinition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> (model </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // è·å–æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        Collection</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">FlowElement</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> flowElements </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> model</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getMainProcess</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getFlowElements</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">		// æŸ¥æ‰¾æŒ‡å®š UserTask ç±»å‹çš„èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">FlowElement</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> e </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> flowElements) {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // åˆ¤æ–­èŠ‚ç‚¹ç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> (e </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">instanceof</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> UserTask) {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                // å®¡æ‰¹äºº</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">                String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> sp1 </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> ((UserTask) e)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getAssignee</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                // å€™é€‰äºº</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">                List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> sp2 </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> ((UserTask) e)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getCandidateUsers</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">            }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Api è¯´æ˜ï¼š</strong></p><ul><li>å¯ä»¥è·å–èŠ‚ç‚¹çš„ IDã€åç§°ã€è´Ÿè´£äººã€å€™é€‰äººç­‰ä¿¡æ¯</li></ul><h2 id="äºŒã€æµç¨‹å®ä¾‹ç›¸å…³-api" tabindex="-1"><a class="header-anchor" href="#äºŒã€æµç¨‹å®ä¾‹ç›¸å…³-api"><span>äºŒã€æµç¨‹å®ä¾‹ç›¸å…³ Api</span></a></h2><blockquote><p>ä»¥ä¸‹ Api è·Ÿæµç¨‹å®ä¾‹ç›¸å…³</p></blockquote><h2 id="è·å–æµç¨‹å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#è·å–æµç¨‹å®ä¾‹"><span>è·å–æµç¨‹å®ä¾‹</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ProcessInstance</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> getProcessInstanceById</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processInstanceId) {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> runtimeService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createProcessInstanceQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processInstanceId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(processInstanceId)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">singleResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h2 id="åˆ é™¤æµç¨‹å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#åˆ é™¤æµç¨‹å®ä¾‹"><span>åˆ é™¤æµç¨‹å®ä¾‹</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  * åˆ é™¤éƒ¨ç½²çš„æµç¨‹å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  *</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  * </span><span style="--shiki-light:#C678DD;--shiki-light-font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> instanceId</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> æµç¨‹å®ä¾‹ID</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  * </span><span style="--shiki-light:#C678DD;--shiki-light-font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> deleteReason</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> åˆ é™¤åŸå› ï¼Œå¯ä¸ºç©º</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  */</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> deleteProcIns</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> instanceId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> deleteReason) {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">   runtimeService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">deleteProcessInstance</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(instanceId, deleteReason);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> }</span></span></code></pre></div><h2 id="æ ¹æ®æµç¨‹å®ä¾‹è·å–ç›®å‰æ´»åŠ¨èŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#æ ¹æ®æµç¨‹å®ä¾‹è·å–ç›®å‰æ´»åŠ¨èŠ‚ç‚¹"><span>æ ¹æ®æµç¨‹å®ä¾‹è·å–ç›®å‰æ´»åŠ¨èŠ‚ç‚¹</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> getActiveActivityIds</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processInstanceId) {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> runtimeService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getActiveActivityIds</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(processInstanceId);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h2 id="è·å–å†å²æµç¨‹å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#è·å–å†å²æµç¨‹å®ä¾‹"><span>è·å–å†å²æµç¨‹å®ä¾‹</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> HistoricProcessInstance</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> getHistoricProcessInstanceById</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processInstanceId) {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> historyService</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createHistoricProcessInstanceQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processInstanceId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(processInstanceId)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">singleResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h2 id="è·å–å†å²æ‰¹æ³¨ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#è·å–å†å²æ‰¹æ³¨ä¿¡æ¯"><span>è·å–å†å²æ‰¹æ³¨ä¿¡æ¯</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> getTaskComments</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> taskId) {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Comment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> taskComments </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getTaskComments</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(taskId);</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> (taskComments </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;æš‚æ— æ‰¹æ³¨&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> taskComments</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">stream</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">map</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(Comment</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">::</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">getFullMessage)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">collect</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Collectors</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">joining</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h2 id="è·å–æµç¨‹å®ä¾‹çš„å†å²ä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#è·å–æµç¨‹å®ä¾‹çš„å†å²ä»»åŠ¡"><span>è·å–æµç¨‹å®ä¾‹çš„å†å²ä»»åŠ¡</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">HistoricActivityInstance</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> selectHistoryTaskList</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> instanceId) {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> historyService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createHistoricActivityInstanceQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processInstanceId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(instanceId)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">activityType</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;userTask&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">finished</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">orderByHistoricActivityInstanceStartTime</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">desc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">list</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ul><li><strong>instanceId</strong> - æµç¨‹å®ä¾‹ ID</li><li><strong>activityType</strong> - èŠ‚ç‚¹ç±»å‹</li><li><strong>finished</strong> - å·²å®Œæˆ</li><li>æ ¹æ®åˆ›å»ºæ—¶é—´æ’åº</li></ul><h2 id="ä¸‰ã€æŸ¥è¯¢ä»»åŠ¡ç›¸å…³-api" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æŸ¥è¯¢ä»»åŠ¡ç›¸å…³-api"><span>ä¸‰ã€æŸ¥è¯¢ä»»åŠ¡ç›¸å…³ Api</span></a></h2><blockquote><p>ä»¥ä¸‹ API è·Ÿ Task ä»»åŠ¡æœ‰å…³</p></blockquote><h2 id="æ ¹æ®æµç¨‹å®ä¾‹-id-æŸ¥è¯¢å½“å‰-task" tabindex="-1"><a class="header-anchor" href="#æ ¹æ®æµç¨‹å®ä¾‹-id-æŸ¥è¯¢å½“å‰-task"><span>æ ¹æ®æµç¨‹å®ä¾‹ ID æŸ¥è¯¢å½“å‰ Task</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">Task</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> getTaskByInstanceId</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> instanceId) {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createTaskQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processInstanceId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(instanceId).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h2 id="task-æ·»åŠ å€™é€‰äºº" tabindex="-1"><a class="header-anchor" href="#task-æ·»åŠ å€™é€‰äºº"><span>Task æ·»åŠ å€™é€‰äºº</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> addCandidateUser</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> taskId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> candidateUser) {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">addCandidateUser</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(taskId, candidateUser);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h2 id="æŸ¥è¯¢å€™é€‰äººå¾…åŠä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#æŸ¥è¯¢å€™é€‰äººå¾…åŠä»»åŠ¡"><span>æŸ¥è¯¢å€™é€‰äººå¾…åŠä»»åŠ¡</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">Task</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> selectTodoTaskList</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> definitionKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> candidateUser) {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createTaskQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processDefinitionKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(definitionKey)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">taskCandidateUser</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(candidateUser)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">orderByTaskCreateTime</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">desc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">listPage</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ul><li><strong>definitionKey</strong> - æµç¨‹å®šä¹‰ Key</li><li><strong>candidateUser</strong> - å€™é€‰äºº</li><li>æ ¹æ® task åˆ›å»ºæ—¶é—´æ’åº</li></ul><h2 id="æ ¹æ®-taskid-è·å–-task" tabindex="-1"><a class="header-anchor" href="#æ ¹æ®-taskid-è·å–-task"><span>æ ¹æ® TaskId è·å– Task</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Task</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> getTaskByTaskId</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> taskId) {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createTaskQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">taskId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(taskId).</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">singleResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h2 id="é¢†å–ä»»åŠ¡ä»¥åŠå®Œæˆä»»åŠ¡æ·»åŠ æ‰¹æ³¨" tabindex="-1"><a class="header-anchor" href="#é¢†å–ä»»åŠ¡ä»¥åŠå®Œæˆä»»åŠ¡æ·»åŠ æ‰¹æ³¨"><span>é¢†å–ä»»åŠ¡ä»¥åŠå®Œæˆä»»åŠ¡æ·»åŠ æ‰¹æ³¨</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> claimAndComplateTask</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Task</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> userId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> auditStatusBoolean</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> commentStr) {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> taskId </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å¦‚æœå€™é€‰ä»»åŠ¡æ²¡æœ‰è¿›è¡Œé¢†å–å°±ç›´æ¥å®Œæˆçš„è¯ï¼Œé‚£ä¹ˆåœ¨å†å²è®°å½•ä¸­å°±ä¸ä¼šè®°å½•æ˜¯å“ªä¸ªç”¨æˆ·æ‰§è¡Œäº†è¿™ä¸ªä»»åŠ¡.</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">claim</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(taskId, userId);</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ·»åŠ æ‰¹æ³¨</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">addComment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(taskId, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getProcessInstanceId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(), commentStr);</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ·»åŠ æµç¨‹å˜é‡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setVariable</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(taskId, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getTaskDefinitionKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(), auditStatusBoolean);</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å®Œæˆä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">complete</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(taskId);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h2 id="task-æ·»åŠ æµç¨‹å˜é‡" tabindex="-1"><a class="header-anchor" href="#task-æ·»åŠ æµç¨‹å˜é‡"><span>Task æ·»åŠ æµç¨‹å˜é‡</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> setVariable</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> taskId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> variableName</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> variableValue) {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setVariable</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(taskId, variableName, variableValue);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h2 id="æŸ¥è¯¢ç”¨æˆ·å·²åŠä»»åŠ¡åˆ—è¡¨" tabindex="-1"><a class="header-anchor" href="#æŸ¥è¯¢ç”¨æˆ·å·²åŠä»»åŠ¡åˆ—è¡¨"><span>æŸ¥è¯¢ç”¨æˆ·å·²åŠä»»åŠ¡åˆ—è¡¨</span></a></h2><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">HistoricTaskInstance</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> selectDoneTaskList</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> definitionKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> userId) {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> historyService</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createHistoricTaskInstanceQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processDefinitionKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(definitionKey)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">taskAssignee</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(userId)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">finished</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">orderByHistoricTaskInstanceEndTime</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">desc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">list</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><p><strong>å‚æ•°è¯´æ˜:</strong></p><ul><li><strong>definitionKey</strong> - æµç¨‹å®šä¹‰ Key</li><li><strong>userId</strong> - å“ªä¸ªç”¨æˆ·çš„å·²åŠ</li><li><strong>finished</strong> - çŠ¶æ€å·²å®Œæˆ</li><li>æ ¹æ®å®Œæˆæ—¶é—´æ’åº</li></ul>`,59)]))}const B=i(k,[["render",t]]),r=JSON.parse('{"path":"/frame/activity7/05.Activiti7-%E5%B8%B8%E7%94%A8-Api.html","title":"Activiti7 å¸¸ç”¨ Api","lang":"zh-CN","frontmatter":{"title":"Activiti7 å¸¸ç”¨ Api","date":"2021-07-22T14:50:00.000Z","re":"activiti7-common-api","category":["Activiti7"],"description":"Activiti7 å¸¸ç”¨ Api æç¤º è®°å½•ä¸€ä¸‹å¸¸ç”¨çš„ Api ä½¿ç”¨ ä¸€ã€æµç¨‹å®šä¹‰ç›¸å…³ Api ä»¥ä¸‹ Api è·Ÿæµç¨‹å®šä¹‰ç›¸å…³ æ ¹æ®æµç¨‹å®šä¹‰ KeyæŸ¥è¯¢æµç¨‹ Api è¯´æ˜ï¼š æ ¹æ®éƒ¨ç½²ç‰ˆæœ¬å€’åºæ’åºï¼Œè·å–æ‰€æœ‰æµç¨‹éƒ¨ç½²ä¿¡æ¯ï¼Œå–æœ€æ–°çš„æ•°æ® æ ¹æ®éƒ¨ç½² Id æŸ¥è¯¢æµç¨‹ è·å–æµç¨‹ XML æ–‡ä»¶ å‚æ•°è¯´æ˜ï¼š å‚æ•°éƒ½ä»æµç¨‹å®šä¹‰ä¸­è·å– processDefinition d...","permalink":"/frame/activity7/activiti7-common-api.html","head":[["meta",{"property":"og:url","content":"https://blog.zenghr.cn/frame/activity7/activiti7-common-api.html"}],["meta",{"property":"og:site_name","content":"Zenghr"}],["meta",{"property":"og:title","content":"Activiti7 å¸¸ç”¨ Api"}],["meta",{"property":"og:description","content":"Activiti7 å¸¸ç”¨ Api æç¤º è®°å½•ä¸€ä¸‹å¸¸ç”¨çš„ Api ä½¿ç”¨ ä¸€ã€æµç¨‹å®šä¹‰ç›¸å…³ Api ä»¥ä¸‹ Api è·Ÿæµç¨‹å®šä¹‰ç›¸å…³ æ ¹æ®æµç¨‹å®šä¹‰ KeyæŸ¥è¯¢æµç¨‹ Api è¯´æ˜ï¼š æ ¹æ®éƒ¨ç½²ç‰ˆæœ¬å€’åºæ’åºï¼Œè·å–æ‰€æœ‰æµç¨‹éƒ¨ç½²ä¿¡æ¯ï¼Œå–æœ€æ–°çš„æ•°æ® æ ¹æ®éƒ¨ç½² Id æŸ¥è¯¢æµç¨‹ è·å–æµç¨‹ XML æ–‡ä»¶ å‚æ•°è¯´æ˜ï¼š å‚æ•°éƒ½ä»æµç¨‹å®šä¹‰ä¸­è·å– processDefinition d..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-06T19:24:24.000Z"}],["meta",{"property":"article:published_time","content":"2021-07-22T14:50:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-06T19:24:24.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Activiti7 å¸¸ç”¨ Api\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-07-22T14:50:00.000Z\\",\\"dateModified\\":\\"2025-05-06T19:24:24.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zenghr\\"}]}"]]},"git":{"createdTime":1746559464000,"updatedTime":1746559464000,"contributors":[{"name":"zenghr","username":"zenghr","email":"zenghr","commits":1,"url":"https://github.com/zenghr"}]},"readingTime":{"minutes":3.23,"words":969},"filePathRelative":"frame/activity7/05.Activiti7-å¸¸ç”¨-Api.md","localizedDate":"2021å¹´7æœˆ22æ—¥","excerpt":"\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">æç¤º</p>\\n<p>è®°å½•ä¸€ä¸‹å¸¸ç”¨çš„ Api ä½¿ç”¨</p>\\n</div>\\n<h2>ä¸€ã€æµç¨‹å®šä¹‰ç›¸å…³ Api</h2>\\n<blockquote>\\n<p>ä»¥ä¸‹ Api è·Ÿæµç¨‹å®šä¹‰ç›¸å…³</p>\\n</blockquote>\\n<h2>æ ¹æ®æµç¨‹å®šä¹‰ KeyæŸ¥è¯¢æµç¨‹</h2>\\n<div class=\\"language-java\\" data-highlighter=\\"shiki\\" data-ext=\\"java\\" style=\\"--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-dark-pro one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#C678DD;--shiki-dark:#C678DD\\">public</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\"> ProcessDefinition</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\"> selectProcessDefinitionByKey</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\">(</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">String</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\"> definitionKey) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">    List</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">&lt;</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">ProcessDefinition</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">&gt;</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\"> processDefinitions </span><span style=\\"--shiki-light:#56B6C2;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\"> repositoryService</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">createProcessDefinitionQuery</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">()</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">        .</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">processDefinitionKey</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">(definitionKey)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">        .</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">orderByProcessDefinitionVersion</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">()</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">        .</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">desc</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">()</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">        .</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">list</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">    ProcessDefinition</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\"> processDefinition </span><span style=\\"--shiki-light:#56B6C2;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#D19A66;--shiki-dark:#D19A66\\"> null</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#C678DD;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\"> (</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">processDefinitions</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">size</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">()</span><span style=\\"--shiki-light:#56B6C2;--shiki-dark:#56B6C2\\"> &gt;</span><span style=\\"--shiki-light:#D19A66;--shiki-dark:#D19A66\\"> 0</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\">        processDefinition </span><span style=\\"--shiki-light:#56B6C2;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\"> processDefinitions</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">get</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">(</span><span style=\\"--shiki-light:#D19A66;--shiki-dark:#D19A66\\">0</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#C678DD;--shiki-dark:#C678DD\\">    return</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\"> processDefinition</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\">}</span></span></code></pre>\\n</div>","autoDesc":true}');export{B as comp,r as data};
