import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,a,d as i,h as n,b as k,w as e,r as p,o as B}from"./app-BnToYpnS.js";const r={},d={class:"hint-container warning"};function g(F,s){const h=p("RouteLink");return B(),t("div",null,[s[3]||(s[3]=a(`<h1 id="activiti7-è¿›é˜¶" tabindex="-1"><a class="header-anchor" href="#activiti7-è¿›é˜¶"><span>Activiti7 è¿›é˜¶</span></a></h1><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>æ¶‰åŠ æµç¨‹å®šä¹‰ç›¸å…³ã€æµç¨‹å®ä¾‹ç›¸å…³ã€ä»»åŠ¡åˆ†é…ã€æµç¨‹å˜é‡ã€ä»»åŠ¡å€™é€‰äººã€ç½‘å…³ç­‰æ“ä½œ</p></div><h2 id="æµç¨‹å®šä¹‰ç›¸å…³" tabindex="-1"><a class="header-anchor" href="#æµç¨‹å®šä¹‰ç›¸å…³"><span>æµç¨‹å®šä¹‰ç›¸å…³</span></a></h2><blockquote><p>æ¶‰åŠæµç¨‹å®šä¹‰ä¿¡æ¯æŸ¥è¯¢ã€åˆ é™¤ä»¥åŠå¯¹åº”çš„èµ„æºæŸ¥è¯¢ä¸‹è½½ç­‰æ“ä½œ</p></blockquote><h3 id="æŸ¥è¯¢æµç¨‹å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#æŸ¥è¯¢æµç¨‹å®šä¹‰"><span>æŸ¥è¯¢æµç¨‹å®šä¹‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testDefinitionQuery</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(){</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //åˆ›å»ºProcessEngineå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessEngine</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processEngine </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ProcessEngines</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getDefaultProcessEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–ä»“åº“æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    RepositoryService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> repositoryService </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> processEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getRepositoryService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–æµç¨‹å®šä¹‰é›†åˆ</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ProcessDefinition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processDefinitionList </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> repositoryService</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createProcessDefinitionQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processDefinitionKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;leaveProcess&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">list</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //éå†é›†åˆ</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ProcessDefinition</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> definition</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">processDefinitionList){</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®šä¹‰ID:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">definition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®šä¹‰åç§°:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">definition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®šä¹‰key:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">definition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®šä¹‰ç‰ˆæœ¬:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">definition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getVersion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹éƒ¨ç½²ID:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">definition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getDeploymentId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;====================&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åˆ é™¤æµç¨‹å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#åˆ é™¤æµç¨‹å®šä¹‰"><span>åˆ é™¤æµç¨‹å®šä¹‰</span></a></h3><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testDeleteDeploy</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(){</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //æµç¨‹éƒ¨ç½²Id</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> deploymentId </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;10001&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //åˆ›å»ºProcessEngineå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessEngine</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processEngine </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ProcessEngines</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getDefaultProcessEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–ä»“åº“æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    RepositoryService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> repositoryService </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> processEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getRepositoryService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //åˆ é™¤æµç¨‹å®šä¹‰ï¼Œå¦‚æœè¯¥æµç¨‹å®šä¹‰å·²æœ‰æµç¨‹å®ä¾‹å¯åŠ¨åˆ™åˆ é™¤æ—¶å‡ºé”™</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    repositoryService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">deleteDeployment</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(deploymentId);</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è®¾ç½®true çº§è”åˆ é™¤æµç¨‹å®šä¹‰ï¼Œå³ä½¿è¯¥æµç¨‹æœ‰æµç¨‹å®ä¾‹å¯åŠ¨ä¹Ÿå¯ä»¥åˆ é™¤ï¼Œè®¾ç½®ä¸ºfalseéçº§åˆ«åˆ é™¤æ–¹å¼ï¼Œå¦‚æœæµç¨‹</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //repositoryService.deleteDeployment(deploymentId,true);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><p>è¯´æ˜ï¼š</p><ol><li><p>å¦‚æœè¯¥æµç¨‹å®šä¹‰ä¸‹æ²¡æœ‰æ­£åœ¨è¿è¡Œçš„æµç¨‹ï¼Œåˆ™å¯ä»¥ç”¨æ™®é€šåˆ é™¤</p></li><li><p>å¦‚æœè¯¥æµç¨‹å®šä¹‰ä¸‹å­˜åœ¨å·²ç»è¿è¡Œçš„æµç¨‹ï¼Œä½¿ç”¨æ™®é€šåˆ é™¤æŠ¥é”™ï¼Œå¯ç”¨çº§è”åˆ é™¤æ–¹æ³•å°†æµç¨‹åŠç›¸å…³è®°å½•å…¨éƒ¨åˆ é™¤ã€‚</p></li><li><p>é¡¹ç›®å¼€å‘ä¸­çº§è”åˆ é™¤æ“ä½œä¸€èˆ¬åªå¼€æ”¾ç»™è¶…çº§ç®¡ç†å‘˜ä½¿ç”¨.</p></li></ol><h3 id="æµç¨‹èµ„æºä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#æµç¨‹èµ„æºä¸‹è½½"><span>æµç¨‹èµ„æºä¸‹è½½</span></a></h3><blockquote><p>æˆ‘ä»¬çš„æµç¨‹èµ„æºæ–‡ä»¶å·²ç»ä¸Šä¼ åˆ°æ•°æ®åº“äº†ï¼Œå¦‚æœå…¶ä»–ç”¨æˆ·æƒ³è¦æŸ¥çœ‹è¿™äº›èµ„æºæ–‡ä»¶ï¼Œå¯ä»¥ä»æ•°æ®åº“ä¸­æŠŠèµ„æºæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°</p></blockquote><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testDownloadResource</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() throws Exception {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //åˆ›å»ºProcessEngineå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessEngine</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processEngine </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ProcessEngines</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getDefaultProcessEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–ä»“åº“æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    RepositoryService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> repositoryService </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> processEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getRepositoryService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–æµç¨‹å®šä¹‰é›†åˆ</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ProcessDefinition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> list </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> repositoryService</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createProcessDefinitionQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processDefinitionKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;leaveProcess&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">orderByProcessDefinitionVersion</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> //æŒ‰ç…§ç‰ˆæœ¬æ’åº</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">desc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//é™åº</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">list</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–æœ€æ–°é‚£ä¸ª</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessDefinition</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> definition </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">list</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–éƒ¨ç½²ID</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> deploymentId </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> definition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getDeploymentId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–bpmnçš„è¾“å…¥æµ</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    InputStream</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> bpmnInput </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> repositoryService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getResourceAsStream</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                                        deploymentId,</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">                                        definition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getResourceName</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–pngçš„è¾“å…¥æµ</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    InputStream</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> pngInput </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> repositoryService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getResourceAsStream</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                                        deploymentId,</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">                                        definition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getDiagramResourceName</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è®¾ç½®bpmnè¾“å…¥</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    FileOutputStream</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> bpmnOutPut </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> FileOutputStream</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;D:/leave.bpmn&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è®¾ç½®pngè¾“å…¥</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    FileOutputStream</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> pngOutPut </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> FileOutputStream</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;D:/leave.png&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    IOUtils</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">copy</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(bpmnInput,bpmnOutPut);</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    IOUtils</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">copy</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(pngInput,pngOutPut);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æµç¨‹å®ä¾‹ç›¸å…³" tabindex="-1"><a class="header-anchor" href="#æµç¨‹å®ä¾‹ç›¸å…³"><span>æµç¨‹å®ä¾‹ç›¸å…³</span></a></h2><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>æµç¨‹å‘èµ·ä¹‹åï¼Œç›®å‰è®¾å®šçš„éƒ¨é—¨å®¡æ‰¹äººéƒ½æ˜¯æå››ï¼Œæå››åœ¨å®¡æ‰¹ä¹‹å‰éœ€è¦çœ‹åˆ°ç”³è¯·äººç”³è¯·çš„æ—¶é—´å’Œç”³è¯·çš„ç†ç”±ï¼Œæ‰èƒ½å†³å®šæ˜¯å¦åŒæ„</p><p>é‚£ä¹ˆç”³è¯·äººçš„è¯·å‡ä¿¡æ¯ã€è¯·å‡æ—¶é—´ã€è¯·å‡ç†ç”±ã€‘æ˜¯å¦‚ä½•ç»‘å®šåˆ°æµç¨‹ä¸­çš„å‘¢?</p><p>æ­¤æ—¶å°±éœ€è¦ä½¿ç”¨åˆ°<code>BusinessKey</code></p></div><h3 id="ä¸šåŠ¡æ ‡è¯†-businesskey" tabindex="-1"><a class="header-anchor" href="#ä¸šåŠ¡æ ‡è¯†-businesskey"><span>ä¸šåŠ¡æ ‡è¯†ï¼ˆBusinessKeyï¼‰</span></a></h3><ul><li>å¯åŠ¨æµç¨‹å®ä¾‹æ—¶ï¼ŒæŒ‡å®šçš„ <strong>businessKey</strong> å°±ä¼šåœ¨ <strong>act_run_execution</strong> è¡¨ä¸­å­˜å‚¨ businessKeyã€‚</li><li><strong>BusinessKey</strong>ï¼šä¸šåŠ¡æ ‡è¯†ï¼Œé€šå¸¸ä¸ºä¸šåŠ¡è¡¨çš„ä¸»é”®ï¼Œä¸šåŠ¡æ ‡è¯†å’Œæµç¨‹å®ä¾‹ä¸€ä¸€å¯¹åº”ã€‚ä¸šåŠ¡æ ‡è¯†æ¥æºäºä¸šåŠ¡ç³»ç»Ÿã€‚å­˜å‚¨ä¸šåŠ¡æ ‡è¯†å°±æ˜¯æ ¹æ®ä¸šåŠ¡æ ‡è¯†æ¥å…³è”æŸ¥è¯¢ä¸šåŠ¡ç³»ç»Ÿçš„æ•°æ®ã€‚</li><li>æ¯”å¦‚ï¼šè¯·å‡æµç¨‹å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œå°±å¯ä»¥å°†è¯·å‡å•çš„idä½œä¸ºä¸šåŠ¡æ ‡è¯†å­˜å‚¨åˆ°Activitiä¸­ï¼Œå°†æ¥æŸ¥è¯¢Activitiçš„æµç¨‹å®ä¾‹ä¿¡æ¯å°±å¯ä»¥è·å–è¯·å‡å•çš„idä»è€Œå…³è”æŸ¥è¯¢ä¸šåŠ¡ç³»ç»Ÿæ•°æ®åº“å¾—åˆ°è¯·å‡å•ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºğŸ‘‡</li></ul><img src="https://media.zenghr.cn/blog/img/20210722/hTmP6C.png" alt="hTmP6C"><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testStartProcess</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(){</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> businessKey </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;8001&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //åˆ›å»ºProcessEngineå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessEngine</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processEngine </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ProcessEngines</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getDefaultProcessEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–RuntimeServiceå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    RuntimeService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> runtimeService </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> processEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getRuntimeService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // è®¾ç½®å¯¹åº”çš„å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    Map</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> variables </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // è®¾ç½®éƒ¨é—¨å®¡æ ¸äºº</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    variables</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;deptLeader&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;å¼ ä¸‰&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //æ ¹æ®æµç¨‹å®šä¹‰çš„keyå¯åŠ¨æµç¨‹å®ä¾‹,è¿™ä¸ªkeyæ˜¯åœ¨å®šä¹‰bpmnçš„æ—¶å€™è®¾ç½®çš„</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //åœ¨å¯åŠ¨æµç¨‹çš„æ—¶å€™å°†ä¸šåŠ¡keyåŠ å…¥è¿›å»</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessInstance</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> instance </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> runtimeService</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">startProcessInstanceByKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;leaveProcess&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, businessKey, variables);</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–æµç¨‹å®ä¾‹çš„ç›¸å…³ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®šä¹‰çš„id = &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> instance</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getProcessDefinitionId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®ä¾‹çš„id = &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> instance</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>è·å–<code>BusinessKey</code>å¹¶å…³è”å¯¹åº”çš„ä¸šåŠ¡ä¿¡æ¯</p></blockquote><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//è·å–ä»»åŠ¡é›†åˆ</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> taskList </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createTaskQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processDefinitionKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;leaveProcess&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">taskAssignee</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(assignee)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">list</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//éå†ä»»åŠ¡åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Task</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> task</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">taskList){</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®šä¹‰id = &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getProcessDefinitionId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®ä¾‹id = &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getProcessInstanceId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;ä»»åŠ¡id = &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;ä»»åŠ¡åç§° = &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  //æ ¹æ®ä»»åŠ¡ä¸Šçš„æµç¨‹å®ä¾‹IdæŸ¥è¯¢å‡ºå¯¹åº”çš„æµç¨‹å®ä¾‹å¯¹è±¡ï¼Œä»æµç¨‹å®ä¾‹å¯¹è±¡ä¸­è·å–BusinessKey</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  ProcessInstance</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> instance </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> runtimeService</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createProcessInstanceQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processInstanceId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getProcessInstanceId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">singleResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;ä¸šåŠ¡key:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">instance</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getBusinessKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;===================&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æµç¨‹æŒ‚èµ·ã€æ¿€æ´»" tabindex="-1"><a class="header-anchor" href="#æµç¨‹æŒ‚èµ·ã€æ¿€æ´»"><span>æµç¨‹æŒ‚èµ·ã€æ¿€æ´»</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testSuspendAllProcessInstance</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(){</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //åˆ›å»ºProcessEngineå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessEngine</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processEngine </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ProcessEngines</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getDefaultProcessEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–RepositoryService</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    RepositoryService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> repositoryService </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> processEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getRepositoryService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–æµç¨‹å®šä¹‰å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessDefinition</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processDefinition </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> repositoryService</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createProcessDefinitionQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processDefinitionKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;leaveProcess&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">singleResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    boolean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> suspended </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> processDefinition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">isSuspended</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è¾“å‡ºæµç¨‹å®šä¹‰çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®šä¹‰çŠ¶æ€:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(suspended </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;å·²æŒ‚èµ·&quot;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;å·²æ¿€æ´»&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processDefinitionId </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> processDefinition</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(suspended){</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //å¦‚æœæ˜¯æŒ‚èµ·ï¼Œå¯ä»¥æ‰§è¡Œæ¿€æ´»æ“ä½œ ,å‚æ•°1 ï¼šæµç¨‹å®šä¹‰id ï¼Œå‚æ•°2ï¼šæ˜¯å¦æ¿€æ´»æµç¨‹å®ä¾‹ï¼Œå‚æ•°3ï¼šæ¿€æ´»æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        repositoryService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">activateProcessDefinitionById</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(processDefinitionId,</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹ID:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">processDefinitionId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;,å·²æ¿€æ´»&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    }</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">{</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //å¦‚æœæ˜¯æ¿€æ´»ï¼Œå¯ä»¥æ‰§è¡ŒæŒ‚èµ·æ“ä½œ ,å‚æ•°1 ï¼šæµç¨‹å®šä¹‰id ï¼Œå‚æ•°2ï¼šæ˜¯å¦æš‚åœæµç¨‹å®ä¾‹ï¼Œå‚æ•°3ï¼šæ¿€æ´»æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        repositoryService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">suspendProcessDefinitionById</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(processDefinitionId,</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹ID:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">processDefinitionId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;,å·²æŒ‚èµ·&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ“ä½œæµç¨‹å®šä¹‰ä¸ºæŒ‚èµ·çŠ¶æ€ï¼Œè¯¥æ“ä½œå®šä¹‰ä¸‹é¢çš„æ‰€æœ‰çš„æµç¨‹å®ä¾‹å°†å…¨éƒ¨æš‚åœ</li><li>æµç¨‹å®šä¹‰ä¸ºæŒ‚èµ·çŠ¶æ€ï¼Œè¯¥æµç¨‹å®šä¹‰ä¸‹å°†ä¸å…è®¸å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶è¯¥æµç¨‹å®šä¹‰ä¸‹çš„æ‰€æœ‰æµç¨‹å®ä¾‹å°†å…¨éƒ¨æŒ‚èµ·æš‚åœæ‰§è¡Œ</li></ul><p><strong>æµç¨‹å®ä¾‹æŒ‚èµ·ã€æ¿€æ´»</strong></p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testSuspendSingleProcessInstance</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(){</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //æµç¨‹å®ä¾‹Id</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processInstanceId </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;2501&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //åˆ›å»ºProcessEngineå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessEngine</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processEngine </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ProcessEngines</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getDefaultProcessEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–RepositoryService</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    RuntimeService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> runtimeService </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> processEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getRuntimeService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //æ ¹æ®æµç¨‹å®ä¾‹Idè·å–æµç¨‹å®ä¾‹å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessInstance</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processInstance </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> runtimeService</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createProcessInstanceQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processInstanceId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(processInstanceId)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">singleResult</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    boolean</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> suspended </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> processInstance</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">isSuspended</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®ä¾‹ID:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">processInstanceId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;,çŠ¶æ€:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (suspended</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;å·²æŒ‚èµ·&quot;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;å·²æ¿€æ´»&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(suspended){</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        runtimeService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">activateProcessInstanceById</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(processInstanceId);</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®ä¾‹ID:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">processInstanceId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;,çŠ¶æ€ä¿®æ”¹ä¸ºå·²æ¿€æ´»&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    }</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">{</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        runtimeService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">suspendProcessInstanceById</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(processInstanceId);</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®ä¾‹ID:&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">processInstanceId</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;,çŠ¶æ€ä¿®æ”¹ä¸ºå·²æŒ‚èµ·&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä»»åŠ¡åˆ†é…è´Ÿè´£äºº" tabindex="-1"><a class="header-anchor" href="#ä»»åŠ¡åˆ†é…è´Ÿè´£äºº"><span>ä»»åŠ¡åˆ†é…è´Ÿè´£äºº</span></a></h2><h3 id="å›ºå®šåˆ†é…" tabindex="-1"><a class="header-anchor" href="#å›ºå®šåˆ†é…"><span>å›ºå®šåˆ†é…</span></a></h3><p>åœ¨è¿›è¡Œä¸šåŠ¡æµç¨‹å»ºæ¨¡çš„æ—¶å€™æŒ‡å®šå›ºå®šçš„ä»»åŠ¡è´Ÿè´£äºº</p><p><img src="https://media.zenghr.cn/blog/img/20210722/ASn38W.png" alt="ASn38W"></p><h3 id="uel-è¡¨è¾¾å¼åˆ†é…" tabindex="-1"><a class="header-anchor" href="#uel-è¡¨è¾¾å¼åˆ†é…"><span>UEL è¡¨è¾¾å¼åˆ†é…</span></a></h3><p>Activiti ä½¿ç”¨ UEL è¡¨è¾¾å¼ï¼Œ UEL æ˜¯ java EE6 è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œ UELï¼ˆUnified Expression Languageï¼‰å³ ç»Ÿä¸€è¡¨è¾¾å¼è¯­è¨€</p><p><img src="https://media.zenghr.cn/blog/img/20210722/posPxS.png" alt="posPxS"></p><h3 id="ç›‘å¬å™¨åˆ†é…-ä½¿ç”¨éº»çƒ¦-æå°‘ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ç›‘å¬å™¨åˆ†é…-ä½¿ç”¨éº»çƒ¦-æå°‘ä½¿ç”¨"><span>ç›‘å¬å™¨åˆ†é…(ä½¿ç”¨éº»çƒ¦,æå°‘ä½¿ç”¨)</span></a></h3><ul><li>ä»»åŠ¡ç›‘å¬å™¨æ˜¯å‘ç”Ÿå¯¹åº”çš„ä»»åŠ¡ç›¸å…³äº‹ä»¶æ—¶æ‰§è¡Œè‡ªå®šä¹‰çš„Javaé€»è¾‘æˆ–è¡¨è¾¾å¼</li><li>ä»»åŠ¡ç›¸å…³äº‹ä»¶åŒ…æ‹¬ï¼š <ul><li><strong>Eventï¼š</strong><ul><li>Createï¼šä»»åŠ¡åˆ›å»ºåè§¦å‘ã€‚</li><li>Assignmentï¼šä»»åŠ¡åˆ†é…åè§¦å‘ã€‚</li><li>Deleteï¼šä»»åŠ¡å®Œæˆåè§¦å‘ã€‚</li><li>Allï¼šæ‰€æœ‰äº‹ä»¶å‘ç”Ÿéƒ½è§¦å‘ã€‚</li></ul></li></ul></li></ul><p><strong>1. è‡ªå®šä¹‰ä¸€ä¸ªä»»åŠ¡ç›‘å¬å™¨ç±»ï¼Œç„¶åæ­¤ç±»å¿…é¡»å®ç°org.activiti.engine.delegate.TaskListeneræ¥å£</strong></p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> MyTaskListener</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> TaskListener</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> notify</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">DelegateTask</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> delegateTask</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è¿™é‡ŒæŒ‡å®šä»»åŠ¡è´Ÿè´£äºº</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">delegateTask</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;éƒ¨é—¨ç»ç†å®¡æ‰¹&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">      delegateTask</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setAssignee</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;èµµå…­&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    } </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> if</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">delegateTask</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;éƒ¨é—¨ç»ç†å®¡æ‰¹&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">      delegateTask</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">setAssignee</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;å­™ä¸ƒ&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p><strong>2. åœ¨bpmnæ–‡ä»¶ä¸­é…ç½®ç›‘å¬å™¨</strong></p><p><img src="https://media.zenghr.cn/blog/img/20210722/upZLYx.png" alt="upZLYx"></p><h2 id="æµç¨‹å˜é‡" tabindex="-1"><a class="header-anchor" href="#æµç¨‹å˜é‡"><span>æµç¨‹å˜é‡</span></a></h2><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>æµç¨‹å˜é‡åœ¨Activitiä¸­æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„è§’è‰²ï¼Œæµç¨‹è¿è½¬æœ‰æ—¶éœ€è¦é æµç¨‹å˜é‡ï¼Œä¸šåŠ¡ç³»ç»Ÿå’ŒActivitiç»“åˆæ—¶å°‘ä¸äº†æµç¨‹å˜é‡ï¼Œæµç¨‹å˜é‡å°±æ˜¯Activitiåœ¨ç®¡ç†å·¥ä½œæµæ—¶æ ¹æ®ç®¡ç†éœ€è¦è€Œè®¾ç½®çš„å˜é‡</p><p>æ¯”å¦‚åœ¨è¯·å‡æµç¨‹æµè½¬æ—¶å¦‚æœ <strong>è¯·å‡å¤©æ•°&gt;3</strong> å¤©åˆ™æœ‰æ€»ç»ç†å®¡æ‰¹ï¼Œå¦åˆ™ç”±äººäº‹ç›´æ¥å®¡æ‰¹ï¼Œè¯·å‡å¤©æ•°å°±å¯ä»¥è®¾ç½®æµç¨‹å˜é‡ï¼Œåœ¨æµç¨‹æµè½¬æ—¶ä½¿ç”¨</p></div><h3 id="æµç¨‹å˜é‡ç±»å‹" tabindex="-1"><a class="header-anchor" href="#æµç¨‹å˜é‡ç±»å‹"><span>æµç¨‹å˜é‡ç±»å‹</span></a></h3><p><img src="https://media.zenghr.cn/blog/img/20210722/JdYxvc.png" alt="JdYxvc"></p><blockquote><p>æ³¨æ„ï¼šå¦‚æœå°†POJOå­˜å‚¨åˆ°æµç¨‹å˜é‡ä¸­ï¼Œå¿…é¡»å®ç°åºåˆ—åŒ–æ¥å£Serializableï¼Œä¸ºäº†é˜²æ­¢ç”±äºæ–°å¢å­—æ®µæ— æ³•ååºåˆ—åŒ–</p></blockquote><h3 id="æµç¨‹å˜é‡çš„ä½œç”¨åŸŸ" tabindex="-1"><a class="header-anchor" href="#æµç¨‹å˜é‡çš„ä½œç”¨åŸŸ"><span>æµç¨‹å˜é‡çš„ä½œç”¨åŸŸ</span></a></h3><p>æµç¨‹å˜é‡çš„ä½œç”¨åŸŸèŒƒå›´å¯ä»¥æ˜¯ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼ˆProcessInstanceï¼‰ã€ä¸€ä¸ªä»»åŠ¡ï¼ˆTaskï¼‰æˆ–ä¸€ä¸ªæ‰§è¡Œå®ä¾‹ï¼ˆExecutionï¼‰</p><ul><li><strong>globalå˜é‡</strong> : æµç¨‹å˜é‡çš„ä½œç”¨åŸŸèŒƒå›´çš„é»˜è®¤å€¼æ˜¯æµç¨‹å®ä¾‹ï¼Œä½œç”¨åŸŸèŒƒå›´æœ€å¤§ã€‚</li><li><strong>localå˜é‡</strong> : æµç¨‹å˜é‡çš„ä½œç”¨åŸŸèŒƒå›´å¦‚æœä»…ä»…é’ˆå¯¹ä¸€ä¸ªä»»åŠ¡æˆ–ä¸€ä¸ªæ‰§è¡Œå®ä¾‹ï¼Œé‚£ä¹ˆä½œç”¨åŸŸèŒƒå›´æ²¡æœ‰æµç¨‹å®ä¾‹å¤§</li></ul><blockquote><p>å®é™…å¼€å‘ä¸­ä¸€èˆ¬ä¸ç”¨localå˜é‡ï¼Œäº†è§£å³å¯</p></blockquote><h3 id="æµç¨‹å˜é‡çš„ä½¿ç”¨æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#æµç¨‹å˜é‡çš„ä½¿ç”¨æ–¹æ³•"><span>æµç¨‹å˜é‡çš„ä½¿ç”¨æ–¹æ³•</span></a></h3><ul><li><p><strong>åœ¨å±æ€§ä¸Šä½¿ç”¨UELè¡¨è¾¾å¼</strong></p><p>å¯ä»¥åœ¨ assignee å¤„è®¾ç½® UEL è¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼çš„å€¼ä¸ºä»»åŠ¡çš„è´Ÿè´£äººï¼Œæ¯”å¦‚ï¼š <code>\${assignee}ï¼Œ assignee</code> å°±æ˜¯ä¸€ä¸ªæµç¨‹å˜é‡åç§°ã€‚</p><p>Activitiè·å– UELè¡¨è¾¾å¼ çš„å€¼ï¼Œå³æµç¨‹å˜é‡ assignee çš„å€¼ ï¼Œå°† assignee çš„å€¼ä½œä¸ºä»»åŠ¡çš„è´Ÿè´£äººè¿›è¡Œä»»åŠ¡åˆ†é…</p></li><li><p><strong>åœ¨è¿çº¿ä¸Šä½¿ç”¨UELè¡¨è¾¾å¼</strong></p><p>å¯ä»¥åœ¨è¿çº¿ä¸Šè®¾ç½®UELè¡¨è¾¾å¼ï¼Œå†³å®šæµç¨‹èµ°å‘ã€‚</p><p>æ¯”å¦‚ï¼š<code>\${price&lt;10000}</code> priceå°±æ˜¯ä¸€ä¸ªæµç¨‹å˜é‡åç§°ï¼Œuelè¡¨è¾¾å¼ç»“æœç±»å‹ä¸ºå¸ƒå°”ç±»å‹ã€‚</p><p>å¦‚æœUELè¡¨è¾¾å¼æ˜¯trueï¼Œè¦å†³å®š æµç¨‹æ‰§è¡Œèµ°å‘</p></li></ul><h3 id="ä½¿ç”¨globalå˜é‡æ§åˆ¶æµç¨‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨globalå˜é‡æ§åˆ¶æµç¨‹"><span>ä½¿ç”¨globalå˜é‡æ§åˆ¶æµç¨‹</span></a></h3><p>åœ¨è¿çº¿å¤„æ·»åŠ åˆ¤æ–­æ¡ä»¶</p><p><img src="https://media.zenghr.cn/blog/img/20210722/eI0vjg.png" alt="eI0vjg"></p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testStartProcess</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(){</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //åˆ›å»ºProcessEngineå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessEngine</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processEngine </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ProcessEngines</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getDefaultProcessEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–RuntimeServiceå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    RuntimeService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> runtimeService </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> processEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getRuntimeService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    Map</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> variables </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    variables</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;day&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //æ ¹æ®æµç¨‹å®šä¹‰çš„keyå¯åŠ¨æµç¨‹å®ä¾‹,è¿™ä¸ªkeyæ˜¯åœ¨å®šä¹‰bpmnçš„æ—¶å€™è®¾ç½®çš„</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessInstance</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> instance </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> runtimeService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">startProcessInstanceByKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;leaveVariablesProcess&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,variables);</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–æµç¨‹å®ä¾‹çš„ç›¸å…³ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®šä¹‰çš„id = &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> instance</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getProcessDefinitionId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®ä¾‹çš„id = &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> instance</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h3 id="æ‰§è¡Œtask-è®¾ç½®æµç¨‹å˜é‡" tabindex="-1"><a class="header-anchor" href="#æ‰§è¡Œtask-è®¾ç½®æµç¨‹å˜é‡"><span>æ‰§è¡Œtask è®¾ç½®æµç¨‹å˜é‡</span></a></h3><p><strong><code>taskService.setVariable(taskId,variableName,variableValue)</code></strong></p><ul><li><strong>taskId</strong> - ä»»åŠ¡ ID</li><li><strong>variableName</strong> - å˜é‡åç§°</li><li><strong>variableValue</strong> - å˜é‡å®é™…çš„å€¼</li></ul><div class="hint-container warning"><p class="hint-container-title">æ³¨æ„</p><p>1.å¦‚æœUELè¡¨è¾¾å¼ä¸­æµç¨‹å˜é‡åä¸å­˜åœ¨åˆ™æŠ¥é”™ã€‚ 2.å¦‚æœå¦‚æœUELè¡¨è¾¾å¼éƒ½ä¸ç¬¦åˆæ¡ä»¶,æµç¨‹æŠ¥é”™ã€‚ 3.å¦‚æœè¿æ¥ä¸è®¾ç½®æ¡ä»¶/æ¡ä»¶éƒ½æ»¡è¶³,æ¯ä¸ªè¿çº¿éƒ½ä¼šèµ°</p></div><h2 id="ä»»åŠ¡å€™é€‰äºº" tabindex="-1"><a class="header-anchor" href="#ä»»åŠ¡å€™é€‰äºº"><span>ä»»åŠ¡å€™é€‰äºº</span></a></h2><p>åœ¨æµç¨‹å®šä¹‰ä¸­åœ¨ä»»åŠ¡ç»“ç‚¹çš„ assignee å›ºå®šè®¾ç½®ä»»åŠ¡è´Ÿè´£äººï¼Œåœ¨æµç¨‹å®šä¹‰æ—¶å°†å‚ä¸è€…å›ºå®šè®¾ç½®åœ¨.bpmn æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸´æ—¶ä»»åŠ¡è´Ÿè´£äººå˜æ›´åˆ™éœ€è¦ä¿®æ”¹æµç¨‹å®šä¹‰ï¼Œç³»ç»Ÿå¯æ‰©å±•æ€§å·®ã€‚</p><p>é’ˆå¯¹è¿™ç§æƒ…å†µå¯ä»¥ç»™ä»»åŠ¡è®¾ç½®å¤šä¸ªå€™é€‰äººï¼Œå¯ä»¥ä»å€™é€‰äººä¸­é€‰æ‹©å‚ä¸è€…æ¥å®Œæˆä»»åŠ¡</p><h3 id="è®¾ç½®ä»»åŠ¡å€™é€‰äºº" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®ä»»åŠ¡å€™é€‰äºº"><span>è®¾ç½®ä»»åŠ¡å€™é€‰äºº</span></a></h3><p>åœ¨æµç¨‹å›¾ä¸­ä»»åŠ¡èŠ‚ç‚¹çš„é…ç½®ä¸­è®¾ç½® candidate-users(å€™é€‰äºº)ï¼Œå¤šä¸ªå€™é€‰äººä¹‹é—´ç”¨é€—å·åˆ†å¼€</p><p><img src="https://media.zenghr.cn/blog/img/20210722/YywESD.png" alt="YywESD"></p><p><strong>ä½¿ç”¨ Api è®¾ç½®å€™é€‰äºº</strong></p><p><strong><code>taskService.addCandidateUser(taskId,candidateUser)</code></strong></p><ul><li><strong>taskIdï¼š</strong> ä»»åŠ¡ Id</li><li><strong>candidateUser:</strong> å€™é€‰äºº</li></ul><h3 id="æŸ¥è¯¢å€™é€‰äººä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#æŸ¥è¯¢å€™é€‰äººä»»åŠ¡"><span>æŸ¥è¯¢å€™é€‰äººä»»åŠ¡</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//æŸ¥è¯¢å€™é€‰ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testSelectCandidateTaskList</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(){</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //ä»»åŠ¡è´Ÿè´£äºº</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> candidateUser </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;æå››&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //åˆ›å»ºProcessEngineå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessEngine</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processEngine </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ProcessEngines</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getDefaultProcessEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–TaskService</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    TaskService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> taskService </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> processEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getTaskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–ä»»åŠ¡é›†åˆ</span></span>
<span class="line highlighted"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> taskList </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">createTaskQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">processDefinitionKey</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;leaveCandidateProcess&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">taskCandidateUser</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(candidateUser)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">list</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //éå†ä»»åŠ¡åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Task</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> task</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">taskList){</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®šä¹‰id = &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getProcessDefinitionId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;æµç¨‹å®ä¾‹id = &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getProcessInstanceId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;ä»»åŠ¡id = &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;ä»»åŠ¡åç§° = &quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> task</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,69)),i("div",d,[s[2]||(s[2]=i("p",{class:"hint-container-title"},"æ³¨æ„",-1)),i("p",null,[s[1]||(s[1]=n("æ³¨æ„ï¼šåœ¨ SpringBoot é›†æˆ Activiti7 ä¸­ï¼Œä½¿ç”¨è¯¥ Api æŸ¥è¯¢å€™é€‰äººæ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¼‚å¸¸è¯¦ç»†ä»¥åŠè§£å†³æ–¹æ¡ˆè¯·çœ‹ ")),k(h,{to:"/passages/2021-07-22-activiti7-error-note.html"},{default:e(()=>s[0]||(s[0]=[n("Activiti7 å¡«å‘ç¬”è®°")])),_:1})])]),s[4]||(s[4]=a(`<h3 id="é¢†å–ã€å®Œæˆå€™é€‰äººä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#é¢†å–ã€å®Œæˆå€™é€‰äººä»»åŠ¡"><span>é¢†å–ã€å®Œæˆå€™é€‰äººä»»åŠ¡</span></a></h3><blockquote><p>å¦‚æœå€™é€‰ä»»åŠ¡æ²¡æœ‰è¿›è¡Œé¢†å–å°±ç›´æ¥å®Œæˆçš„è¯ï¼Œé‚£ä¹ˆåœ¨å†å²è®°å½•ä¸­å°±ä¸ä¼šè®°å½•æ˜¯å“ªä¸ªç”¨æˆ·æ‰§è¡Œäº†è¿™ä¸ªä»»åŠ¡</p><p>æ‰€ä»¥å¯¹äºè¿™ç§å€™é€‰äººçš„ä»»åŠ¡ï¼Œæˆ‘ä»¬éœ€è¦å…ˆé¢†å–å†å®Œæˆ</p></blockquote><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> testClaimTask</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">(){</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //ä»»åŠ¡ID</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> taskId </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;2505&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> assignee </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;å¼ ä¸‰&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //åˆ›å»ºProcessEngineå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    ProcessEngine</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> processEngine </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ProcessEngines</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getDefaultProcessEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //è·å–TaskService</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    TaskService</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> taskService </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> processEngine</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">getTaskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //é¢†å–ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">claim</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(taskId,assignee);</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å®Œæˆä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  	taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">complete</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(taskId);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span></code></pre></div><h2 id="ç½‘å…³ç›¸å…³" tabindex="-1"><a class="header-anchor" href="#ç½‘å…³ç›¸å…³"><span>ç½‘å…³ç›¸å…³</span></a></h2><h3 id="æ’ä»–ç½‘å…³" tabindex="-1"><a class="header-anchor" href="#æ’ä»–ç½‘å…³"><span>æ’ä»–ç½‘å…³</span></a></h3><p>æ’ä»–ç½‘å…³(ExclusiveGateway)ï¼ˆå¼‚æˆ–ç½‘å…³æˆ–åŸºäºæ•°æ®çš„æ’ä»–ç½‘å…³ï¼‰ï¼Œç”¨æ¥åœ¨æµç¨‹ä¸­å®ç°å†³ç­–ã€‚å½“æµç¨‹æ‰§è¡Œåˆ°è¿™ä¸ªç½‘å…³çš„æ—¶å€™ï¼Œæ‰€æœ‰åˆ†æ”¯éƒ½ä¼šåˆ¤æ–­æ¡ä»¶æ˜¯å¦ä¸ºtrueï¼Œå¦‚æœä¸ºtrueåˆ™æ‰§è¡Œè¯¥åˆ†æ”¯</p><p><img src="https://media.zenghr.cn/blog/img/20210722/fdgdQz.png" alt="fdgdQz"></p><h3 id="å¹¶è¡Œç½‘å…³" tabindex="-1"><a class="header-anchor" href="#å¹¶è¡Œç½‘å…³"><span>å¹¶è¡Œç½‘å…³</span></a></h3><p>å¹¶è¡Œç½‘å…³(InclusiveGateway)å…è®¸å°†æµç¨‹åˆ†æˆå¤šæ¡åˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥æŠŠå¤šæ¡åˆ†æ”¯æ±‡èšåˆ°ä¸€èµ·ï¼Œå¹¶è¡Œç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºçš„é¡ºåºæµçš„</p><blockquote><p>å¹¶è¡Œç½‘å…³ä¸ä¼šè§£ææ¡ä»¶ã€‚å³ä½¿é¡ºåºæµä¸­å®šä¹‰äº†æ¡ä»¶ï¼Œä¹Ÿä¼šè¢«å¿½ç•¥</p></blockquote><p><img src="https://media.zenghr.cn/blog/img/20210722/J4KD0z.png" alt="J4KD0z"></p><h3 id="åŒ…å«ç½‘å…³" tabindex="-1"><a class="header-anchor" href="#åŒ…å«ç½‘å…³"><span>åŒ…å«ç½‘å…³</span></a></h3><p>åŒ…å«ç½‘å…³å¯ä»¥çœ‹åšæ˜¯æ’ä»–ç½‘å…³å’Œå¹¶è¡Œç½‘å…³çš„ç»“åˆä½“</p><p><img src="https://media.zenghr.cn/blog/img/20210722/bVI3wP.png" alt="bVI3wP"></p>`,14))])}const c=l(r,[["render",g]]),A=JSON.parse('{"path":"/frame/activity7/02.Activiti7-%E8%BF%9B%E9%98%B6%E7%AC%94%E8%AE%B0.html","title":"Activiti7 è¿›é˜¶ç¬”è®°","lang":"zh-CN","frontmatter":{"title":"Activiti7 è¿›é˜¶ç¬”è®°","date":"2021-07-22T10:00:00.000Z","re":"activiti7-note-advanced","category":["Activiti7"],"description":"Activiti7 è¿›é˜¶ æç¤º æ¶‰åŠ æµç¨‹å®šä¹‰ç›¸å…³ã€æµç¨‹å®ä¾‹ç›¸å…³ã€ä»»åŠ¡åˆ†é…ã€æµç¨‹å˜é‡ã€ä»»åŠ¡å€™é€‰äººã€ç½‘å…³ç­‰æ“ä½œ æµç¨‹å®šä¹‰ç›¸å…³ æ¶‰åŠæµç¨‹å®šä¹‰ä¿¡æ¯æŸ¥è¯¢ã€åˆ é™¤ä»¥åŠå¯¹åº”çš„èµ„æºæŸ¥è¯¢ä¸‹è½½ç­‰æ“ä½œ æŸ¥è¯¢æµç¨‹å®šä¹‰ åˆ é™¤æµç¨‹å®šä¹‰ è¯´æ˜ï¼š å¦‚æœè¯¥æµç¨‹å®šä¹‰ä¸‹æ²¡æœ‰æ­£åœ¨è¿è¡Œçš„æµç¨‹ï¼Œåˆ™å¯ä»¥ç”¨æ™®é€šåˆ é™¤ å¦‚æœè¯¥æµç¨‹å®šä¹‰ä¸‹å­˜åœ¨å·²ç»è¿è¡Œçš„æµç¨‹ï¼Œä½¿ç”¨æ™®é€šåˆ é™¤æŠ¥é”™ï¼Œå¯ç”¨çº§è”åˆ é™¤æ–¹æ³•å°†æµç¨‹åŠç›¸å…³è®°...","permalink":"/frame/activity7/activiti7-note-advanced.html","head":[["meta",{"property":"og:url","content":"https://blog.zenghr.cn/frame/activity7/activiti7-note-advanced.html"}],["meta",{"property":"og:site_name","content":"Zenghr"}],["meta",{"property":"og:title","content":"Activiti7 è¿›é˜¶ç¬”è®°"}],["meta",{"property":"og:description","content":"Activiti7 è¿›é˜¶ æç¤º æ¶‰åŠ æµç¨‹å®šä¹‰ç›¸å…³ã€æµç¨‹å®ä¾‹ç›¸å…³ã€ä»»åŠ¡åˆ†é…ã€æµç¨‹å˜é‡ã€ä»»åŠ¡å€™é€‰äººã€ç½‘å…³ç­‰æ“ä½œ æµç¨‹å®šä¹‰ç›¸å…³ æ¶‰åŠæµç¨‹å®šä¹‰ä¿¡æ¯æŸ¥è¯¢ã€åˆ é™¤ä»¥åŠå¯¹åº”çš„èµ„æºæŸ¥è¯¢ä¸‹è½½ç­‰æ“ä½œ æŸ¥è¯¢æµç¨‹å®šä¹‰ åˆ é™¤æµç¨‹å®šä¹‰ è¯´æ˜ï¼š å¦‚æœè¯¥æµç¨‹å®šä¹‰ä¸‹æ²¡æœ‰æ­£åœ¨è¿è¡Œçš„æµç¨‹ï¼Œåˆ™å¯ä»¥ç”¨æ™®é€šåˆ é™¤ å¦‚æœè¯¥æµç¨‹å®šä¹‰ä¸‹å­˜åœ¨å·²ç»è¿è¡Œçš„æµç¨‹ï¼Œä½¿ç”¨æ™®é€šåˆ é™¤æŠ¥é”™ï¼Œå¯ç”¨çº§è”åˆ é™¤æ–¹æ³•å°†æµç¨‹åŠç›¸å…³è®°..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://media.zenghr.cn/blog/img/20210722/ASn38W.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-06T19:24:24.000Z"}],["meta",{"property":"article:published_time","content":"2021-07-22T10:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-06T19:24:24.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Activiti7 è¿›é˜¶ç¬”è®°\\",\\"image\\":[\\"https://media.zenghr.cn/blog/img/20210722/ASn38W.png\\",\\"https://media.zenghr.cn/blog/img/20210722/posPxS.png\\",\\"https://media.zenghr.cn/blog/img/20210722/upZLYx.png\\",\\"https://media.zenghr.cn/blog/img/20210722/JdYxvc.png\\",\\"https://media.zenghr.cn/blog/img/20210722/eI0vjg.png\\",\\"https://media.zenghr.cn/blog/img/20210722/YywESD.png\\",\\"https://media.zenghr.cn/blog/img/20210722/fdgdQz.png\\",\\"https://media.zenghr.cn/blog/img/20210722/J4KD0z.png\\",\\"https://media.zenghr.cn/blog/img/20210722/bVI3wP.png\\"],\\"datePublished\\":\\"2021-07-22T10:00:00.000Z\\",\\"dateModified\\":\\"2025-05-06T19:24:24.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zenghr\\"}]}"]]},"git":{"createdTime":1746559464000,"updatedTime":1746559464000,"contributors":[{"name":"zenghr","username":"zenghr","email":"zenghr","commits":1,"url":"https://github.com/zenghr"}]},"readingTime":{"minutes":10.15,"words":3044},"filePathRelative":"frame/activity7/02.Activiti7-è¿›é˜¶ç¬”è®°.md","localizedDate":"2021å¹´7æœˆ22æ—¥","excerpt":"\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">æç¤º</p>\\n<p>æ¶‰åŠ æµç¨‹å®šä¹‰ç›¸å…³ã€æµç¨‹å®ä¾‹ç›¸å…³ã€ä»»åŠ¡åˆ†é…ã€æµç¨‹å˜é‡ã€ä»»åŠ¡å€™é€‰äººã€ç½‘å…³ç­‰æ“ä½œ</p>\\n</div>\\n<h2>æµç¨‹å®šä¹‰ç›¸å…³</h2>\\n<blockquote>\\n<p>æ¶‰åŠæµç¨‹å®šä¹‰ä¿¡æ¯æŸ¥è¯¢ã€åˆ é™¤ä»¥åŠå¯¹åº”çš„èµ„æºæŸ¥è¯¢ä¸‹è½½ç­‰æ“ä½œ</p>\\n</blockquote>\\n<h3>æŸ¥è¯¢æµç¨‹å®šä¹‰</h3>\\n<div class=\\"language-java line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"java\\" style=\\"--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-dark-pro one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">@</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#C678DD;--shiki-dark:#C678DD\\">public</span><span style=\\"--shiki-light:#C678DD;--shiki-dark:#C678DD\\"> void</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\"> testDefinitionQuery</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\">(){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">    //åˆ›å»ºProcessEngineå¯¹è±¡</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">    ProcessEngine</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\"> processEngine </span><span style=\\"--shiki-light:#56B6C2;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\"> ProcessEngines</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">getDefaultProcessEngine</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">    //è·å–ä»“åº“æœåŠ¡</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">    RepositoryService</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\"> repositoryService </span><span style=\\"--shiki-light:#56B6C2;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\"> processEngine</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">getRepositoryService</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">    //è·å–æµç¨‹å®šä¹‰é›†åˆ</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">    List</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">&lt;</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">ProcessDefinition</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">&gt;</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\"> processDefinitionList </span><span style=\\"--shiki-light:#56B6C2;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\"> repositoryService</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">            .</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">createProcessDefinitionQuery</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">()</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">            .</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">processDefinitionKey</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">(</span><span style=\\"--shiki-light:#98C379;--shiki-dark:#98C379\\">\\"leaveProcess\\"</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">            .</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">list</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">    //éå†é›†åˆ</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#C678DD;--shiki-dark:#C678DD\\">    for</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\"> (</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">ProcessDefinition</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\"> definition</span><span style=\\"--shiki-light:#C678DD;--shiki-dark:#C678DD\\">:</span><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\">processDefinitionList){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">        System</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">out</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">println</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">(</span><span style=\\"--shiki-light:#98C379;--shiki-dark:#98C379\\">\\"æµç¨‹å®šä¹‰ID:\\"</span><span style=\\"--shiki-light:#56B6C2;--shiki-dark:#56B6C2\\">+</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">definition</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">getId</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">        System</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">out</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">println</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">(</span><span style=\\"--shiki-light:#98C379;--shiki-dark:#98C379\\">\\"æµç¨‹å®šä¹‰åç§°:\\"</span><span style=\\"--shiki-light:#56B6C2;--shiki-dark:#56B6C2\\">+</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">definition</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">getName</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">        System</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">out</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">println</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">(</span><span style=\\"--shiki-light:#98C379;--shiki-dark:#98C379\\">\\"æµç¨‹å®šä¹‰key:\\"</span><span style=\\"--shiki-light:#56B6C2;--shiki-dark:#56B6C2\\">+</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">definition</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">getKey</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">        System</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">out</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">println</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">(</span><span style=\\"--shiki-light:#98C379;--shiki-dark:#98C379\\">\\"æµç¨‹å®šä¹‰ç‰ˆæœ¬:\\"</span><span style=\\"--shiki-light:#56B6C2;--shiki-dark:#56B6C2\\">+</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">definition</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">getVersion</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">        System</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">out</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">println</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">(</span><span style=\\"--shiki-light:#98C379;--shiki-dark:#98C379\\">\\"æµç¨‹éƒ¨ç½²ID:\\"</span><span style=\\"--shiki-light:#56B6C2;--shiki-dark:#56B6C2\\">+</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">definition</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">getDeploymentId</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">        System</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#E5C07B;--shiki-dark:#E5C07B\\">out</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#61AFEF;--shiki-dark:#61AFEF\\">println</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">(</span><span style=\\"--shiki-light:#98C379;--shiki-dark:#98C379\\">\\"====================\\"</span><span style=\\"--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E06C75;--shiki-dark:#E06C75\\">}</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{c as comp,A as data};
