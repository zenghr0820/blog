import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,a,o as e}from"./app-Dke27yvG.js";const n={};function r(p,i){return e(),s("div",null,i[0]||(i[0]=[a(`<h1 id="activiti7-填坑笔记" tabindex="-1"><a class="header-anchor" href="#activiti7-填坑笔记"><span>Activiti7 填坑笔记</span></a></h1><div class="hint-container tip"><p class="hint-container-title">提示</p><p>该文章记录一下使用 Activiti7 时所遇到的一些异常或者坑</p></div><h2 id="error-usernamenotfoundexception" tabindex="-1"><a class="header-anchor" href="#error-usernamenotfoundexception"><span>Error: UsernameNotFoundException</span></a></h2><blockquote><p>环境：SpringBoot 集成 Activiti7</p><p>Activiti7 版本：7.0.0</p></blockquote><h3 id="异常原因" tabindex="-1"><a class="header-anchor" href="#异常原因"><span>异常原因</span></a></h3><p>Activiti7 默认和Spring Security集成了，当我们的项目中不需要Spring Security时，需要排除Spring Security配置，但是 Activiti7 在代码中<strong>强耦合</strong>了SpringScurity，所以我们在使用 activiti 的 Api 查询候选人任务时会遇到异常</p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">taskService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">taskCandidateUser</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(candidateUser);</span></span></code></pre></div><blockquote><p>Caused by: org.springframework.security.core.userdetails.UsernameNotFoundException: XX</p></blockquote><p>该 Api 会调用 SpringScurity 中的 <strong>UserDetailsService</strong> 类型的bean中的 <strong><code>loadUserByUsername</code></strong> 方法.然后是找不到的,所以报错了</p><h3 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案"><span>解决方案</span></a></h3><p>写一个类实现 <strong>UserDetailsService</strong> 然后重写 loadUserByUsername 方法</p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> SelfUserDetailsServiceImpl</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserDetailsService</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UserDetails</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> loadUserByUsername</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> username</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> UsernameNotFoundException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> User</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(username,</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Collections</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">emptyList</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div>`,12)]))}const o=t(n,[["render",r]]),c=JSON.parse('{"path":"/frame/activity7/04.Activiti7-%E5%A1%AB%E5%9D%91%E7%AC%94%E8%AE%B0.html","title":"Activiti7 填坑笔记","lang":"zh-CN","frontmatter":{"title":"Activiti7 填坑笔记","date":"2021-07-22T12:50:00.000Z","re":"2021-07-22-activiti7-error-note","category":["Activiti7"],"description":"Activiti7 填坑笔记 提示 该文章记录一下使用 Activiti7 时所遇到的一些异常或者坑 Error: UsernameNotFoundException 环境：SpringBoot 集成 Activiti7 Activiti7 版本：7.0.0 异常原因 Activiti7 默认和Spring Security集成了，当我们的项目中不需要...","permalink":"/passages/2021-07-22-activiti7-error-note.html","head":[["meta",{"property":"og:url","content":"https://blog.zenghr.cn/passages/2021-07-22-activiti7-error-note.html"}],["meta",{"property":"og:site_name","content":"Zenghr"}],["meta",{"property":"og:title","content":"Activiti7 填坑笔记"}],["meta",{"property":"og:description","content":"Activiti7 填坑笔记 提示 该文章记录一下使用 Activiti7 时所遇到的一些异常或者坑 Error: UsernameNotFoundException 环境：SpringBoot 集成 Activiti7 Activiti7 版本：7.0.0 异常原因 Activiti7 默认和Spring Security集成了，当我们的项目中不需要..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-07T20:17:18.000Z"}],["meta",{"property":"article:published_time","content":"2021-07-22T12:50:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-07T20:17:18.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Activiti7 填坑笔记\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-07-22T12:50:00.000Z\\",\\"dateModified\\":\\"2025-04-07T20:17:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zenghr\\"}]}"]]},"git":{"createdTime":1744057038000,"updatedTime":1744057038000,"contributors":[{"name":"zenghr","username":"zenghr","email":"zenghr","commits":1,"url":"https://github.com/zenghr"}]},"readingTime":{"minutes":0.69,"words":207},"filePathRelative":"frame/activity7/04.Activiti7-填坑笔记.md","localizedDate":"2021年7月22日","excerpt":"\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>该文章记录一下使用 Activiti7 时所遇到的一些异常或者坑</p>\\n</div>\\n<h2>Error: UsernameNotFoundException</h2>\\n<blockquote>\\n<p>环境：SpringBoot 集成 Activiti7</p>\\n<p>Activiti7 版本：7.0.0</p>\\n</blockquote>\\n<h3>异常原因</h3>\\n<p>Activiti7 默认和Spring Security集成了，当我们的项目中不需要Spring Security时，需要排除Spring Security配置，但是 Activiti7 在代码中<strong>强耦合</strong>了SpringScurity，所以我们在使用 activiti 的 Api 查询候选人任务时会遇到异常</p>","autoDesc":true}');export{o as comp,c as data};
