import{_ as r}from"./plugin-vue_export-helper-c27b6911.js";import{r as n,o as i,c,d as e,e as t,b as l,a as s}from"./app-1c9cb0ba.js";const d={},o=s('<h1 id="elasticsearch-介绍" tabindex="-1"><a class="header-anchor" href="#elasticsearch-介绍" aria-hidden="true">#</a> Elasticsearch 介绍</h1><blockquote><p>在学习 Elasticsearch 之前，我们需要了解一下什么是Elasticsearch、以及它的一些基础概念</p></blockquote><h2 id="什么是-elasticsearch" tabindex="-1"><a class="header-anchor" href="#什么是-elasticsearch" aria-hidden="true">#</a> 什么是 Elasticsearch</h2><p><strong>Elasticsearch</strong> 是一款非常强大的、基于 <strong>Lucene</strong> 的开源搜索及分析引擎；它是一个实时的分布式搜索分析引擎，它能让你以前所未有的速度和规模，去探索你的数据</p><p><strong>Elasticsearch</strong> 的底层是开源库 Lucene。但是，你没法直接用 Lucene，必须自己写代码去调用它的 接口。Elastic 是 Lucene 的封装，提供了 REST API 的操作接口，开箱即用</p><h2 id="为什么使用-elasticsearch" tabindex="-1"><a class="header-anchor" href="#为什么使用-elasticsearch" aria-hidden="true">#</a> 为什么使用 Elasticsearch</h2>',6),h={href:"https://db-engines.com/en/ranking",target:"_blank",rel:"noopener noreferrer"},p=s(`<figure><img src="https://media.zenghr.cn/blog/img/20210806/nNGtOX.png" alt="nNGtOX" tabindex="0" loading="lazy"><figcaption>nNGtOX</figcaption></figure><h2 id="elasticsearch-的特点" tabindex="-1"><a class="header-anchor" href="#elasticsearch-的特点" aria-hidden="true">#</a> Elasticsearch 的特点</h2><ul><li>ES 是分布式文档存储，存储的数据都是序列化为 JSON documents</li><li>使用<strong>倒排索引</strong>存储数据，倒排索引比较适合全文本搜索</li><li>支持 JSON 样式的查询语言 —— Query DSL，也支持 SQL 样式的查询</li></ul><h2 id="主要功能以及使用场景" tabindex="-1"><a class="header-anchor" href="#主要功能以及使用场景" aria-hidden="true">#</a> 主要功能以及使用场景</h2><p>应用场景</p><ul><li>记录和日志分析</li><li>采集和组合公共数据</li><li>全文搜索及个性化推荐</li><li>事件数据和指标</li><li>数据可视化</li></ul><p>举例：</p><ul><li>维基百科：全文检索，高亮，搜索推荐等等</li><li>GitHub：上千亿行的代码搜索</li><li>电商网站：搜索商品</li><li>日志数据分析：logstash采集数据，ES进行数据分析处理</li><li>商品价格监控网站：用户设定某商品的价格阈值，当监控到商品的金额低于这个阈值的时候，就发送消息通知用户</li></ul><h2 id="elasticsearch-的基础概念" tabindex="-1"><a class="header-anchor" href="#elasticsearch-的基础概念" aria-hidden="true">#</a> Elasticsearch 的基础概念</h2><blockquote><p>使用 Elasticsearch 之前，先了解一下 Elasticsearch 的概念</p></blockquote><h3 id="索引-index" tabindex="-1"><a class="header-anchor" href="#索引-index" aria-hidden="true">#</a> 索引(Index)</h3><p>Elasticsearch 把数据存放到一个或者多个索引(indices)中。如果用关系型数据库模型对比，索引(index) 的地位与数据库实例(<strong>database</strong>)相当。</p><ul><li><strong>动词</strong>：相当于 MySQL 中的 insert 动作</li><li><strong>名词</strong>：相当于 MySQL 中的 Database</li></ul><h3 id="类型-type" tabindex="-1"><a class="header-anchor" href="#类型-type" aria-hidden="true">#</a> 类型(Type)</h3><p>指在一个索引中，可以索引不同类型的文档，如用户数据、博客数据。</p><p>从6.0.0 版本起已废弃，一个索引中只存放一类数据</p><p>7.0 弃用了接受类型的 API，引入了新的无类型 API</p><blockquote><p>如果你的 Elasticsearch 是 7.0 以上，就可以不用了解 Type 了</p></blockquote><h3 id="文档-document" tabindex="-1"><a class="header-anchor" href="#文档-document" aria-hidden="true">#</a> 文档(Document)</h3><p>保存在某个索引(Index)下，某种类型(Type)的一个数据(Document)，文档是 JSON 格式的，Document 就像是 MySQL 中的某个 Table 里面的内容</p><h3 id="集群相关" tabindex="-1"><a class="header-anchor" href="#集群相关" aria-hidden="true">#</a> 集群相关</h3><ul><li><strong>Cluster 集群</strong>，一个集群由一个唯一的名字标识，默认为“elasticsearch”。集群名称非常重要，具有相同集群名的节点才会组成一个集群。集群名称可以在配置文件中指定。</li><li><strong>Node 节点</strong>：存储集群的数据，参与集群的索引和搜索功能。像集群有名字，节点也有自己的名称，默认在启动时会以一个随机的UUID的前七个字符作为节点的名字，你可以为其指定任意的名字。通过集群名在网络中发现同伴组成集群。一个节点也可是集群</li><li><strong>Shard 分片</strong>：在创建一个索引时可以指定分成多少个分片来存储。每个分片本身也是一个功能完善且独立的“索引”，可以被放置在集群的任意节点上。</li><li><strong>Replication 备份</strong>: 一个分片可以有多个备份（副本）</li></ul><h2 id="倒排索引" tabindex="-1"><a class="header-anchor" href="#倒排索引" aria-hidden="true">#</a> 倒排索引</h2><blockquote><p>倒排索引也可以称为反向索引</p></blockquote><p>我们平时存储数据用的 mysql，采用的是正向索引，例如 mysql 中有这样的数据</p><table><thead><tr><th style="text-align:left;">id</th><th style="text-align:left;">name</th></tr></thead><tbody><tr><td style="text-align:left;">1</td><td style="text-align:left;">我是中国人</td></tr><tr><td style="text-align:left;">2</td><td style="text-align:left;">泱泱中华文化</td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;">2021 东京奥运会举办</td></tr><tr><td style="text-align:left;">4</td><td style="text-align:left;">中国古诗文化</td></tr><tr><td style="text-align:left;">5</td><td style="text-align:left;">中国古代历史</td></tr></tbody></table><p>如果想要查询关于 <strong>中国</strong> 相关的信息，然后会开始遍历数据库，找到 1、4、5 记录</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> table_name <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">&#39;%中国%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果是倒排索引处理的话，首先会将每个名称进行分词，例如：我是中国人，会被分为 <code>我、是、中国、人</code></p><p>然后关联信息的编号</p><table><thead><tr><th style="text-align:left;">term</th><th style="text-align:left;">ids</th></tr></thead><tbody><tr><td style="text-align:left;">中国</td><td style="text-align:left;">1、4、5</td></tr><tr><td style="text-align:left;">文化</td><td style="text-align:left;">2、4</td></tr></tbody></table><p>在倒排索引中搜索并发，然后进行检索，就很容易定位到关于 中国 相关的信息</p><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h2>`,33),u={href:"https://www.pdai.tech/md/db/nosql-es/elasticsearch-x-introduce-1.html",target:"_blank",rel:"noopener noreferrer"};function g(f,b){const a=n("ExternalLinkIcon");return i(),c("div",null,[o,e("blockquote",null,[e("p",null,[t("根据"),e("a",h,[t("DB Engine的排名 (opens new window)"),l(a)]),t("显示，ElasticSearch是最受欢迎的企业级搜索引擎。")])]),p,e("ul",null,[e("li",null,[e("a",u,[t("https://www.pdai.tech/md/db/nosql-es/elasticsearch-x-introduce-1.html"),l(a)])])])])}const m=r(d,[["render",g],["__file","02.Elasticsearch-基础概念.html.vue"]]);export{m as default};
