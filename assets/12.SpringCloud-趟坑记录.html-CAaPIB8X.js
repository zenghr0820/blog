import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as n,o as t}from"./app-dDolP4Iy.js";const e={};function r(l,i){return t(),a("div",null,i[0]||(i[0]=[n(`<h1 id="spring-cloud-趟坑记录" tabindex="-1"><a class="header-anchor" href="#spring-cloud-趟坑记录"><span>Spring Cloud 趟坑记录</span></a></h1><div class="hint-container tip"><p class="hint-container-title">提示</p><p>本文记录一些在使用 Spring Cloud 中的一些踩坑记录，防止以后再遇到</p></div><h2 id="spring-cloud-2020-bootstrap-配置文件失效" tabindex="-1"><a class="header-anchor" href="#spring-cloud-2020-bootstrap-配置文件失效"><span>Spring Cloud 2020 bootstrap 配置文件失效</span></a></h2><p>在使用 nacos-config 读取 nacos 配置时，发现bootstrap.yml一直不生效</p><h3 id="查找原因" tabindex="-1"><a class="header-anchor" href="#查找原因"><span>查找原因</span></a></h3><p>从 Spring Boot 2.4 版本开始，配置文件加载方式进行了重构，默认不加载 <strong>bootstrap.yml</strong> 配置文件</p><h3 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案"><span>解决方案</span></a></h3><p>引入依赖解决问题</p><div class="language-xml" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;spring-cloud-starter-bootstrap&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><h2 id="springcloud-2020版本-gateway-nacos-服务报错503-service-unavailable" tabindex="-1"><a class="header-anchor" href="#springcloud-2020版本-gateway-nacos-服务报错503-service-unavailable"><span>SpringCloud 2020版本 Gateway + Nacos，服务报错503 Service Unavailable</span></a></h2><p>由于 <strong>SpringCloud 2020</strong> 弃用了 Ribbon，因此 Alibaba 在 <strong><code>2021 版本 nacos</code></strong> 中删除了 Ribbon的 jar 包，因此无法通过<strong>lb路由到指定微服务，出现了503情况</strong></p><p>所以只需要引入 <strong>springcloud loadbalancer</strong> 包即可</p><div class="language-xml" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">&lt;!--客户端负载均衡loadbalancer--&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;spring-cloud-starter-loadbalancer&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><h2 id="no-feign-client-for-loadbalancing-defined-did-you-forget-to-include-spring-cloud-starter-loadbalancer" tabindex="-1"><a class="header-anchor" href="#no-feign-client-for-loadbalancing-defined-did-you-forget-to-include-spring-cloud-starter-loadbalancer"><span>No Feign Client for loadBalancing defined. Did you forget to include spring-cloud-starter-loadbalancer?</span></a></h2><p>出错原因也是因为缺少 负载均衡的包，所以导入 <strong>springcloud loadbalancer</strong> 包即可</p>`,15)]))}const d=s(e,[["render",r]]),h=JSON.parse('{"path":"/spring/spring-cloud/12.SpringCloud-%E8%B6%9F%E5%9D%91%E8%AE%B0%E5%BD%95.html","title":"Spring Cloud 趟坑记录","lang":"zh-CN","frontmatter":{"title":"Spring Cloud 趟坑记录","date":"2021-07-27T22:00:00.000Z","re":"spring-cloud-error","category":["Spring","SpringCloud"],"description":"Spring Cloud 趟坑记录 提示 本文记录一些在使用 Spring Cloud 中的一些踩坑记录，防止以后再遇到 Spring Cloud 2020 bootstrap 配置文件失效 在使用 nacos-config 读取 nacos 配置时，发现bootstrap.yml一直不生效 查找原因 从 Spring Boot 2.4 版本开始，配置...","permalink":"/spring/spring-cloud/spring-cloud-error.html","head":[["meta",{"property":"og:url","content":"https://blog.zenghr.cn/spring/spring-cloud/spring-cloud-error.html"}],["meta",{"property":"og:site_name","content":"Zenghr"}],["meta",{"property":"og:title","content":"Spring Cloud 趟坑记录"}],["meta",{"property":"og:description","content":"Spring Cloud 趟坑记录 提示 本文记录一些在使用 Spring Cloud 中的一些踩坑记录，防止以后再遇到 Spring Cloud 2020 bootstrap 配置文件失效 在使用 nacos-config 读取 nacos 配置时，发现bootstrap.yml一直不生效 查找原因 从 Spring Boot 2.4 版本开始，配置..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-22T09:23:50.000Z"}],["meta",{"property":"article:published_time","content":"2021-07-27T22:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-22T09:23:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Spring Cloud 趟坑记录\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-07-27T22:00:00.000Z\\",\\"dateModified\\":\\"2025-04-22T09:23:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zenghr\\"}]}"]]},"git":{"createdTime":1745313830000,"updatedTime":1745313830000,"contributors":[{"name":"zenghr","username":"zenghr","email":"zenghr","commits":1,"url":"https://github.com/zenghr"}]},"readingTime":{"minutes":0.91,"words":272},"filePathRelative":"spring/spring-cloud/12.SpringCloud-趟坑记录.md","localizedDate":"2021年7月27日","excerpt":"\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>本文记录一些在使用 Spring Cloud 中的一些踩坑记录，防止以后再遇到</p>\\n</div>\\n<h2>Spring Cloud 2020 bootstrap 配置文件失效</h2>\\n<p>在使用 nacos-config 读取 nacos 配置时，发现bootstrap.yml一直不生效</p>\\n<h3>查找原因</h3>\\n<p>从 Spring Boot 2.4 版本开始，配置文件加载方式进行了重构，默认不加载 <strong>bootstrap.yml</strong> 配置文件</p>","autoDesc":true}');export{d as comp,h as data};
