import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as k,a as n,b as i,i as a,d as t,w as h,r as p,o as B}from"./app-D-mL7Kg7.js";const r={},d={class:"hint-container tip"};function g(c,s){const l=p("RouteLink");return B(),k("div",null,[s[7]||(s[7]=n('<h1 id="elasticsearch-高亮查询" tabindex="-1"><a class="header-anchor" href="#elasticsearch-高亮查询"><span>Elasticsearch 高亮查询</span></a></h1><p>日常生活中我们使用搜索工具尝试查询一些信息的时候，常常可以看到返回的结果集中和我们查询条件相符合的字段被特殊的颜色所标记，这就是结果高亮显示。通过高亮显示用户可以明显的发现查询匹配的位置，Elasticsearch 使用 <code>highlight</code> 来实现搜索结果中一个或多个字段突出显示</p><h2 id="例子🌰" tabindex="-1"><a class="header-anchor" href="#例子🌰"><span>例子🌰</span></a></h2><p>举个🌰 - <em>查询 攻略中带上海的数据 - 多字段匹配</em></p><h3 id="映射结构" tabindex="-1"><a class="header-anchor" href="#映射结构"><span>映射结构</span></a></h3><p>下面是例子所使用的映射结构</p>',6)),i("blockquote",null,[i("p",null,[s[1]||(s[1]=a("注意：这里使用了 ")),s[2]||(s[2]=i("code",null,"IK",-1)),s[3]||(s[3]=a(" 分词器，如需了解 IK 分词器请看 ")),t(l,{to:"/passages/2021-08-16-elasticsearch-ik.html"},{default:h(()=>s[0]||(s[0]=[a("Elasticsearch 中文分词器")])),_:1})])]),s[8]||(s[8]=n(`<div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  &quot;mappings&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;_doc&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      &quot;properties&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;type&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;keyword&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        },</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;subTitle&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;type&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;text&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;store&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;analyzer&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;ik_max_word&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        },</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;summary&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;type&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;text&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;store&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;analyzer&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;ik_max_word&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        },</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;title&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;type&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;text&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;store&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;analyzer&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;ik_max_word&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行如下请求之后会得到返回内容，在 <code>hits</code> 中除了常规数据外，还会有 <strong><code>highlight</code></strong> 对象</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  &quot;query&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;multi_match&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      &quot;query&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;上海&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      &quot;fields&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;title&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;subTitle&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;summary&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  },</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  &quot;highlight&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;fields&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      &quot;title&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;pre_tags&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&lt;b&gt;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;post_tags&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&lt;/b&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      &quot;subTitle&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {},</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">      &quot;summary&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;pre_tags&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&lt;b&gt;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;post_tags&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&lt;/b&gt;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;number_of_fragments&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;fragment_size&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">10</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>返回的结果里面每个 hit 多了一个类似这样部分：</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">  &quot;hits&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;hits&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : [</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;_index&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;strategy_es&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;_type&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;_doc&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;_id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;7&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;_score&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2.4005952</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;_source&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">7</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;title&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;懒人吃货指南 | 轻松吃遍地道上海小吃&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;subTitle&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;轻松吃遍地道上海小吃&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;summary&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;去一个地方旅行当然要尝尝当地的特色美食，不然总觉得这趟旅行不完整。但是对于不熟悉上海的游客来说，“哪些是老上海小吃？去哪里能吃到地道的？”这些都是头疼的问题。这篇攻略将会给大家介绍老上海小吃，推荐一些老字号，并附上周边游玩小Tips&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        },</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        &quot;highlight&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : {</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;summary&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : [</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">            &quot;但是对于不熟悉&lt;b&gt;上海&lt;/b&gt;的游客来说&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">            &quot;，“哪些是老&lt;b&gt;上海&lt;/b&gt;小吃？&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">          ],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;subTitle&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : [</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">            &quot;轻松吃遍地道&lt;em&gt;上海&lt;/em&gt;小吃&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">          ],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">          &quot;title&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : [</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">            &quot;懒人吃货指南 | 轻松吃遍地道&lt;b&gt;上海&lt;/b&gt;小吃&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">          ]</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">      }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    ]</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="高亮设置" tabindex="-1"><a class="header-anchor" href="#高亮设置"><span>高亮设置</span></a></h2><p>可以看到我们预设了 高亮关键字 的HTML标签进行包裹，下面我们来了解一下高亮 <strong>highlight</strong> 的参数定义，下面的参数可以设置在 <code>highlight</code> 的下一级此时为 <strong>全局设置</strong>，也可以设置在字段的下一级，此时为 <strong>字段设置</strong></p><blockquote><p>单个字段的设置优先级高于全局设置</p></blockquote><h3 id="number-of-fragments" tabindex="-1"><a class="header-anchor" href="#number-of-fragments"><span>number_of_fragments</span></a></h3><p>要返回的最大片段数，如果片段数设置为 0，则不返回任何片段，<strong>而是突出显示并返回整个字段内容</strong>。</p><p>当您需要突出显示标题或地址等短文本时，这会很方便，但不需要分段。如果<code>number_of_fragments</code> 为 0，<code>fragment_size</code>则忽略。默认为 5</p><p>例如上面👆我们设置了 <em>number_of_fragments: 2</em> ，那么 summary 字段返回了两段数据</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;summary&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : [</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">        &quot;但是对于不熟悉&lt;b&gt;上海&lt;/b&gt;的游客来说&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">        &quot;，“哪些是老&lt;b&gt;上海&lt;/b&gt;小吃？&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    ]</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>如果设置成 0 ，就返回原本数据</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    &quot;summary&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> : [</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">            &quot;去一个地方旅行当然要尝尝当地的特色美食，不然总觉得这趟旅行不完整。但是对于不熟悉&lt;b&gt;上海&lt;/b&gt;的游客来说，“哪些是老&lt;b&gt;上海&lt;/b&gt;小吃？去哪里能吃到地道的？”这些都是头疼的问题。这篇攻略将会给大家介绍老&lt;b&gt;上海&lt;/b&gt;小吃，推荐一些老字号，并附上周边游玩小Tips&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    ]</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="fragment-size" tabindex="-1"><a class="header-anchor" href="#fragment-size"><span>fragment_size</span></a></h3><p>一段 fragment 包含多少个字符（以字符为单位）默认为 100</p><h3 id="pre-tags" tabindex="-1"><a class="header-anchor" href="#pre-tags"><span>pre_tags</span></a></h3><p>标记 highlight 的开始标签，例如上面的 <code>&lt;b&gt;</code> 标签</p><h3 id="post-tags" tabindex="-1"><a class="header-anchor" href="#post-tags"><span>post_tags</span></a></h3><p>标记 highlight 的结束标签，例如上面的 <code>&lt;/b&gt;</code> 标签</p><blockquote><p>系统预设的标签为 <code>&lt;em&gt;</code></p></blockquote><h3 id="order" tabindex="-1"><a class="header-anchor" href="#order"><span>order</span></a></h3><p>order控制了返回对象中 <code>highlight</code> 片段的排序。下面例子中返回的高亮片段将会根据分数顺序输出。假如设置了none则是按照顺序输出</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>最准确的文档还是官网，更多的参数请参考<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-highlighting.html#highlighting-settings" target="_blank" rel="noopener noreferrer">官方文档</a>。</p></div><h2 id="java-代码实现高亮查询" tabindex="-1"><a class="header-anchor" href="#java-代码实现高亮查询"><span>Java 代码实现高亮查询</span></a></h2>`,26)),i("div",d,[s[6]||(s[6]=i("p",{class:"hint-container-title"},"提示",-1)),i("p",null,[s[5]||(s[5]=a("在这里我们就不介绍 Elasticsearch 和 SpringBoot 的集成，如果不会请看上一篇文章 ")),t(l,{to:"/passages/2021-08-18-elasticsearch-integrate-springboot.html"},{default:h(()=>s[4]||(s[4]=[a("SpringBoot 集成 Elasticsearch")])),_:1})])]),s[9]||(s[9]=n(`<table><thead><tr><th>框架</th><th>版本</th></tr></thead><tbody><tr><td>SpringBoot</td><td>2.5.3</td></tr><tr><td>Elasticsearch</td><td>7.14.0</td></tr><tr><td>Spring Data Elasticsearch</td><td>4.2.3</td></tr></tbody></table><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> ElasticsearchRestTemplate</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> restTemplate</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ----------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 构建查询对象</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">NativeSearchQueryBuilder</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> builder </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> NativeSearchQueryBuilder</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 获取字段</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">[] fields </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">[]{</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;title&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;subTitle&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;summary&quot;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 多字段匹配</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">MultiMatchQueryBuilder</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> multiMatchQueryBuilder </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    QueryBuilders</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">multiMatchQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;上海&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, fields);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 设置高亮</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">HighlightBuilder</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> highlightBuilder </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> HighlightBuilder</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> field </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> fields) {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    highlightBuilder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">field</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(field);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">highlightBuilder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">requireFieldMatch</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // 如果要多个字段高亮,这项要为false</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">highlightBuilder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">preTags</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&lt;span style=&#39;color:red&#39;&gt;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // 高亮设置</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">highlightBuilder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">postTags</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&lt;/span&gt;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">highlightBuilder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">numOfFragments</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // 返回结果最多可以包含几段不连续的文字。默认是5, 这里不分段显示</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 分页</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Pageable</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> pageable </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> PageRequest</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">of</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">                                   Sort</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Direction</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">ASC</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;_id&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 设置分页参数</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 封装查询</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">builder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">withQuery</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(multiMatchQueryBuilder)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">withPageable</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(pageable)</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // 封装分页</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">withHighlightBuilder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(highlightBuilder);</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">NativeSearchQuery</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> searchQuery </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> builder</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 发起检索请求</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 参数：查询条件对象，返回泛型，索引名称</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">SearchHits</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Strategy</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> searchHits </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> restTemplate</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">search</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(searchQuery, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Strategy</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">IndexCoordinates</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">of</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;strategy_es&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ... 输出高亮内容</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2))])}const u=e(r,[["render",g]]),F=JSON.parse('{"path":"/database/elasticsearch/07.Elasticsearch-%E9%AB%98%E4%BA%AE%E6%9F%A5%E8%AF%A2.html","title":"Elasticsearch-高亮查询","lang":"zh-CN","frontmatter":{"title":"Elasticsearch-高亮查询","date":"2021-08-18T19:00:00.000Z","re":"2021-08-18-elasticsearch-highlight","description":"Elasticsearch 高亮查询 日常生活中我们使用搜索工具尝试查询一些信息的时候，常常可以看到返回的结果集中和我们查询条件相符合的字段被特殊的颜色所标记，这就是结果高亮显示。通过高亮显示用户可以明显的发现查询匹配的位置，Elasticsearch 使用 highlight 来实现搜索结果中一个或多个字段突出显示 例子🌰 举个🌰 - 查询 攻略...","permalink":"/passages/2021-08-18-elasticsearch-highlight.html","head":[["meta",{"property":"og:url","content":"https://blog.zenghr.cn/passages/2021-08-18-elasticsearch-highlight.html"}],["meta",{"property":"og:site_name","content":"Zenghr"}],["meta",{"property":"og:title","content":"Elasticsearch-高亮查询"}],["meta",{"property":"og:description","content":"Elasticsearch 高亮查询 日常生活中我们使用搜索工具尝试查询一些信息的时候，常常可以看到返回的结果集中和我们查询条件相符合的字段被特殊的颜色所标记，这就是结果高亮显示。通过高亮显示用户可以明显的发现查询匹配的位置，Elasticsearch 使用 highlight 来实现搜索结果中一个或多个字段突出显示 例子🌰 举个🌰 - 查询 攻略..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-07T18:39:41.000Z"}],["meta",{"property":"article:published_time","content":"2021-08-18T19:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-07T18:39:41.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Elasticsearch-高亮查询\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-08-18T19:00:00.000Z\\",\\"dateModified\\":\\"2025-04-07T18:39:41.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zenghr\\"}]}"]]},"git":{"createdTime":1744051181000,"updatedTime":1744051181000,"contributors":[{"name":"zenghr","username":"zenghr","email":"zenghr","commits":1,"url":"https://github.com/zenghr"}]},"readingTime":{"minutes":4.24,"words":1273},"filePathRelative":"database/elasticsearch/07.Elasticsearch-高亮查询.md","localizedDate":"2021年8月18日","excerpt":"\\n<p>日常生活中我们使用搜索工具尝试查询一些信息的时候，常常可以看到返回的结果集中和我们查询条件相符合的字段被特殊的颜色所标记，这就是结果高亮显示。通过高亮显示用户可以明显的发现查询匹配的位置，Elasticsearch 使用 <code>highlight</code> 来实现搜索结果中一个或多个字段突出显示</p>\\n<h2>例子🌰</h2>\\n<p>举个🌰 - <em>查询 攻略中带上海的数据 - 多字段匹配</em></p>\\n<h3>映射结构</h3>\\n<p>下面是例子所使用的映射结构</p>\\n<blockquote>\\n<p>注意：这里使用了 <code>IK</code> 分词器，如需了解 IK 分词器请看 <a href=\\"/passages/2021-08-16-elasticsearch-ik.html\\" target=\\"_blank\\">Elasticsearch 中文分词器</a></p>\\n</blockquote>","autoDesc":true}');export{u as comp,F as data};
