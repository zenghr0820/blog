import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,b as i,a as h,i as a,d as k,w as e,r as p,o as B}from"./app-B3gVqejE.js";const r={};function d(g,s){const n=p("RouteLink");return B(),t("div",null,[s[2]||(s[2]=i("h1",{id:"java-i-o-ä¸­çš„è®¾è®¡æ¨¡å¼-è£…é¥°",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#java-i-o-ä¸­çš„è®¾è®¡æ¨¡å¼-è£…é¥°"},[i("span",null,"Java I/O ä¸­çš„è®¾è®¡æ¨¡å¼(è£…é¥°)")])],-1)),s[3]||(s[3]=i("div",{class:"hint-container tip"},[i("p",{class:"hint-container-title"},"æç¤º"),i("p",null,"æœ¬æ–‡äº†è§£ Java è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§æ¨¡å¼ï¼Œè£…é¥°è€…æ¨¡å¼ï¼Œåœ¨ Java.io åŒ…ä¸­çš„ åŒ…è£…æµ ä¸­å°±ä½¿ç”¨äº†è£…é¥°è€…æ¨¡å¼")],-1)),i("p",null,[s[1]||(s[1]=a("å¦‚éœ€äº†è§£è£…é¥°å™¨æ¨¡å¼è¯¦è§£è¯·çœ‹ğŸ‘‰ ")),k(n,{to:"/passages/dev-decorator-pattern.html"},{default:e(()=>s[0]||(s[0]=[a("è£…é¥°å™¨æ¨¡å¼è¯¦è§£")])),_:1})]),s[4]||(s[4]=h(`<h2 id="è£…é¥°å™¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è£…é¥°å™¨æ¨¡å¼"><span>è£…é¥°å™¨æ¨¡å¼</span></a></h2><p>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰å…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ï¼Œè£…é¥°å™¨æ¨¡å¼ä¸­æœ‰å››ä¸ªé‡è¦çš„è§’è‰²</p><ul><li>æŠ½è±¡æ„ä»¶è§’è‰² (Component)</li><li>å…·ä½“æ„ä»¶è§’è‰²(ConcreteComponent)</li><li>æŠ½è±¡è£…é¥°è€…è§’è‰²(Decorator)</li><li>å…·ä½“è£…é¥°è€…è§’è‰²(ConcreteDecorator)</li></ul><p>ä»¥ <strong>InputStream</strong> ä¸¾ä¾‹ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ª <strong>æŠ½è±¡çš„æ„å»ºè§’è‰²(Component)</strong></p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> abstract</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> InputStream</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Closeable</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p><strong>ä¸”å®šä¹‰æœ‰æŠ½è±¡æ–¹æ³•</strong></p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> abstract</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> read</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() throws IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> close</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">() throws IOException {}</span></span></code></pre></div><p>è¯¥æŠ½è±¡æ–¹æ³•ç”±å…·ä½“çš„å­ç±»å»å®ç°ï¼Œç›´æ¥ç»§æ‰¿äº† <strong>InputStream</strong>ï¼Œå¹¶ä¸”æä¾›æŸä¸€ç‰¹å®šåŠŸèƒ½çš„å­ç±»æœ‰</p><ul><li>ByteArrayInputStream</li><li>FileInputStream</li><li>FilterInputStream</li><li>PipedInputStream</li><li>DataInputStream</li></ul><p>è¿™äº›å­ç±»éƒ½æœ‰è‡ªå·±ç‰¹å®šçš„åŠŸèƒ½ï¼ŒFileInputStream ä»£è¡¨æ–‡ä»¶è¾“å…¥æµï¼Œæˆ‘ä»¬ç§°è¿™äº›å­ç±»ä¸º <strong>å…·ä½“æ„ä»¶è§’è‰²(ConcreteComponent)</strong></p><h2 id="æŠ½è±¡è£…é¥°è€…-decorator" tabindex="-1"><a class="header-anchor" href="#æŠ½è±¡è£…é¥°è€…-decorator"><span>æŠ½è±¡è£…é¥°è€…(Decorator)</span></a></h2><p>åœ¨è¿™äº›ç±»ä¸­æœ‰ä¸€ä¸ªç±»å’Œå…¶ä»–ç±»ä¸åŒ - <strong>FilterInputStream</strong>ï¼ŒæŸ¥çœ‹å…¶æºä»£ç å¯çŸ¥ï¼Œå…¶å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª <strong>InputStream</strong> å¯¹è±¡ï¼Œå¹¶ä¸”å®ƒçš„æ‰€æœ‰æ–¹æ³•ï¼Œéƒ½æ˜¯è°ƒç”¨è¿™ä¸ªæˆå‘˜å¯¹è±¡çš„åŒåæ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ª <strong>FilterInputStream</strong> å°±æ˜¯ä¸€ä¸ª<strong>æŠ½è±¡è£…é¥°è€…(Decorator)</strong></p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> FilterInputStream</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> InputStream</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> volatile</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> InputStream</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> in</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> FilterInputStream</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">InputStream</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> in</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">in</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> in;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> read</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> in</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">read</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> read</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">byte</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> b</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[])</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> read</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(b, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">b</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">length</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> read</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">byte</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> b</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[], </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> off</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> len</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> in</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">read</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(b, off, len);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> long</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> skip</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">long</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> n</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> in</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">skip</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(n);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> available</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> in</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">available</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> close</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        in</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> synchronized</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> mark</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> readlimit</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        in</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">mark</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(readlimit);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> synchronized</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> reset</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        in</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">reset</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> markSupported</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> in</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">markSupported</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>FilterInputStream ç±»ä¸‹é¢æœ‰å®ƒçš„ä¸€äº›å­ç±»ï¼Œæˆ‘ä»¬ä¸»è¦çœ‹å¸¸ç”¨çš„ <strong>BufferedInputStream</strong> ç¼“å†²åŒ…è£…æµï¼ŒæŸ¥çœ‹å®ƒçš„æºä»£ç </p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> BufferedInputStream</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> FilterInputStream</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> BufferedInputStream</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">InputStream</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> in</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> size</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        super</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(in);</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (size </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">            throw</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> IllegalArgumentException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Buffer size &lt;= 0&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        buf </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> byte</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[size];</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> synchronized</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> read</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (pos </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;=</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> count) {</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">            fill</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (pos </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;=</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> count)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">                return</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> getBufIfOpen</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()[pos++] </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 0xff</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹å®ƒçš„ <strong>read()</strong> æ–¹æ³•æºç å¯çŸ¥ï¼Œ<strong>BufferedInputStream</strong> å°±æ˜¯ä¸€ä¸ªå…·ä½“çš„<strong>è£…é¥°è€…è§’è‰²(ConcreteDecorator)</strong>ï¼Œå®ƒèƒ½ä¸ºä¸€ä¸ªåŸæœ¬æ²¡æœ‰ç¼“å†²åŠŸèƒ½çš„ InputStream æ·»åŠ ä¸Šç¼“å†²çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ FIleInputStream å¹¶æ²¡æœ‰ç¼“å­˜åŠŸèƒ½ï¼Œä½¿ç”¨ BufferedInputStream æ¥<strong>è£…é¥°</strong>å®ƒï¼Œä½¿å¾—å…¶å…·å¤‡ç¼“å­˜èƒ½åŠ›ï¼Œæé«˜ç¨‹åºçš„æ€§èƒ½</p>`,16))])}const F=l(r,[["render",d]]),c=JSON.parse('{"path":"/Java/io/02.Java-IO-%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F.html","title":"Java I/O - è£…é¥°è€…æ¨¡å¼","lang":"zh-CN","frontmatter":{"title":"Java I/O - è£…é¥°è€…æ¨¡å¼","date":"2021-05-06T21:30:12.000Z","re":"2021-05-06-java-io-decorator-pattern","category":["Java"],"description":"Java I/O ä¸­çš„è®¾è®¡æ¨¡å¼(è£…é¥°) æç¤º æœ¬æ–‡äº†è§£ Java è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§æ¨¡å¼ï¼Œè£…é¥°è€…æ¨¡å¼ï¼Œåœ¨ Java.io åŒ…ä¸­çš„ åŒ…è£…æµ ä¸­å°±ä½¿ç”¨äº†è£…é¥°è€…æ¨¡å¼ å¦‚éœ€äº†è§£è£…é¥°å™¨æ¨¡å¼è¯¦è§£è¯·çœ‹ğŸ‘‰ è£…é¥°å™¨æ¨¡å¼ è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰å…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ï¼Œè£…é¥°å™¨æ¨¡å¼ä¸­æœ‰å››ä¸ªé‡è¦çš„è§’è‰² æŠ½è±¡æ„ä»¶è§’è‰² (Co...","permalink":"/passages/2021-05-06-java-io-decorator-pattern.html","head":[["meta",{"property":"og:url","content":"https://blog.zenghr.cn/passages/2021-05-06-java-io-decorator-pattern.html"}],["meta",{"property":"og:site_name","content":"Zenghr"}],["meta",{"property":"og:title","content":"Java I/O - è£…é¥°è€…æ¨¡å¼"}],["meta",{"property":"og:description","content":"Java I/O ä¸­çš„è®¾è®¡æ¨¡å¼(è£…é¥°) æç¤º æœ¬æ–‡äº†è§£ Java è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§æ¨¡å¼ï¼Œè£…é¥°è€…æ¨¡å¼ï¼Œåœ¨ Java.io åŒ…ä¸­çš„ åŒ…è£…æµ ä¸­å°±ä½¿ç”¨äº†è£…é¥°è€…æ¨¡å¼ å¦‚éœ€äº†è§£è£…é¥°å™¨æ¨¡å¼è¯¦è§£è¯·çœ‹ğŸ‘‰ è£…é¥°å™¨æ¨¡å¼ è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰å…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ï¼Œè£…é¥°å™¨æ¨¡å¼ä¸­æœ‰å››ä¸ªé‡è¦çš„è§’è‰² æŠ½è±¡æ„ä»¶è§’è‰² (Co..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-07T20:07:13.000Z"}],["meta",{"property":"article:published_time","content":"2021-05-06T21:30:12.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-07T20:07:13.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Java I/O - è£…é¥°è€…æ¨¡å¼\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-05-06T21:30:12.000Z\\",\\"dateModified\\":\\"2025-04-07T20:07:13.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zenghr\\"}]}"]]},"git":{"createdTime":1744056433000,"updatedTime":1744056433000,"contributors":[{"name":"zenghr","username":"zenghr","email":"zenghr","commits":1,"url":"https://github.com/zenghr"}]},"readingTime":{"minutes":2.1,"words":631},"filePathRelative":"Java/io/02.Java-IO-è£…é¥°è€…æ¨¡å¼.md","localizedDate":"2021å¹´5æœˆ6æ—¥","excerpt":"\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">æç¤º</p>\\n<p>æœ¬æ–‡äº†è§£ Java è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§æ¨¡å¼ï¼Œè£…é¥°è€…æ¨¡å¼ï¼Œåœ¨ Java.io åŒ…ä¸­çš„ åŒ…è£…æµ ä¸­å°±ä½¿ç”¨äº†è£…é¥°è€…æ¨¡å¼</p>\\n</div>\\n<p>å¦‚éœ€äº†è§£è£…é¥°å™¨æ¨¡å¼è¯¦è§£è¯·çœ‹ğŸ‘‰ <a href=\\"/passages/dev-decorator-pattern.html\\" target=\\"_blank\\">è£…é¥°å™¨æ¨¡å¼è¯¦è§£</a></p>\\n<h2>è£…é¥°å™¨æ¨¡å¼</h2>\\n<p>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰å…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ï¼Œè£…é¥°å™¨æ¨¡å¼ä¸­æœ‰å››ä¸ªé‡è¦çš„è§’è‰²</p>","autoDesc":true}');export{F as comp,c as data};
