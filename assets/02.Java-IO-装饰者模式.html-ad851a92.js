import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as a,o as c,c as l,d as n,e as s,b as t,w as i,a as u}from"./app-c854b126.js";const r={},k=n("h1",{id:"java-i-o-ä¸­çš„è®¾è®¡æ¨¡å¼-è£…é¥°",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#java-i-o-ä¸­çš„è®¾è®¡æ¨¡å¼-è£…é¥°","aria-hidden":"true"},"#"),s(" Java I/O ä¸­çš„è®¾è®¡æ¨¡å¼(è£…é¥°)")],-1),d={class:"hint-container tip"},v=n("p",{class:"hint-container-title"},"æç¤º",-1),m={href:"http://Java.io",target:"_blank",rel:"noopener noreferrer"},b=u(`<h2 id="è£…é¥°å™¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è£…é¥°å™¨æ¨¡å¼" aria-hidden="true">#</a> è£…é¥°å™¨æ¨¡å¼</h2><p>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰å…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ï¼Œè£…é¥°å™¨æ¨¡å¼ä¸­æœ‰å››ä¸ªé‡è¦çš„è§’è‰²</p><ul><li>æŠ½è±¡æ„ä»¶è§’è‰² (Component)</li><li>å…·ä½“æ„ä»¶è§’è‰²(ConcreteComponent)</li><li>æŠ½è±¡è£…é¥°è€…è§’è‰²(Decorator)</li><li>å…·ä½“è£…é¥°è€…è§’è‰²(ConcreteDecorator)</li></ul><p>ä»¥ <strong>InputStream</strong> ä¸¾ä¾‹ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ª <strong>æŠ½è±¡çš„æ„å»ºè§’è‰²(Component)</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">InputStream</span> <span class="token keyword">implements</span> <span class="token class-name">Closeable</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸”å®šä¹‰æœ‰æŠ½è±¡æ–¹æ³•</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯¥æŠ½è±¡æ–¹æ³•ç”±å…·ä½“çš„å­ç±»å»å®ç°ï¼Œç›´æ¥ç»§æ‰¿äº† <strong>InputStream</strong>ï¼Œå¹¶ä¸”æä¾›æŸä¸€ç‰¹å®šåŠŸèƒ½çš„å­ç±»æœ‰</p><ul><li>ByteArrayInputStream</li><li>FileInputStream</li><li>FilterInputStream</li><li>PipedInputStream</li><li>DataInputStream</li></ul><p>è¿™äº›å­ç±»éƒ½æœ‰è‡ªå·±ç‰¹å®šçš„åŠŸèƒ½ï¼ŒFileInputStream ä»£è¡¨æ–‡ä»¶è¾“å…¥æµï¼Œæˆ‘ä»¬ç§°è¿™äº›å­ç±»ä¸º <strong>å…·ä½“æ„ä»¶è§’è‰²(ConcreteComponent)</strong></p><h2 id="æŠ½è±¡è£…é¥°è€…-decorator" tabindex="-1"><a class="header-anchor" href="#æŠ½è±¡è£…é¥°è€…-decorator" aria-hidden="true">#</a> æŠ½è±¡è£…é¥°è€…(Decorator)</h2><p>åœ¨è¿™äº›ç±»ä¸­æœ‰ä¸€ä¸ªç±»å’Œå…¶ä»–ç±»ä¸åŒ - <strong>FilterInputStream</strong>ï¼ŒæŸ¥çœ‹å…¶æºä»£ç å¯çŸ¥ï¼Œå…¶å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª <strong>InputStream</strong> å¯¹è±¡ï¼Œå¹¶ä¸”å®ƒçš„æ‰€æœ‰æ–¹æ³•ï¼Œéƒ½æ˜¯è°ƒç”¨è¿™ä¸ªæˆå‘˜å¯¹è±¡çš„åŒåæ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ª <strong>FilterInputStream</strong> å°±æ˜¯ä¸€ä¸ª<strong>æŠ½è±¡è£…é¥°è€…(Decorator)</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterInputStream</span> <span class="token keyword">extends</span> <span class="token class-name">InputStream</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">volatile</span> <span class="token class-name">InputStream</span> in<span class="token punctuation">;</span>
    
    <span class="token keyword">protected</span> <span class="token class-name">FilterInputStream</span><span class="token punctuation">(</span><span class="token class-name">InputStream</span> in<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>in <span class="token operator">=</span> in<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> off<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> off<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">skip</span><span class="token punctuation">(</span><span class="token keyword">long</span> n<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> in<span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> in<span class="token punctuation">.</span><span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        in<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">mark</span><span class="token punctuation">(</span><span class="token keyword">int</span> readlimit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        in<span class="token punctuation">.</span><span class="token function">mark</span><span class="token punctuation">(</span>readlimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        in<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">markSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> in<span class="token punctuation">.</span><span class="token function">markSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>FilterInputStream ç±»ä¸‹é¢æœ‰å®ƒçš„ä¸€äº›å­ç±»ï¼Œæˆ‘ä»¬ä¸»è¦çœ‹å¸¸ç”¨çš„ <strong>BufferedInputStream</strong> ç¼“å†²åŒ…è£…æµï¼ŒæŸ¥çœ‹å®ƒçš„æºä»£ç </p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedInputStream</span> <span class="token keyword">extends</span> <span class="token class-name">FilterInputStream</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span><span class="token class-name">InputStream</span> in<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Buffer size &lt;= 0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">&gt;=</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">&gt;=</span> count<span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">getBufIfOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>pos<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token number">0xff</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹å®ƒçš„ <strong>read()</strong> æ–¹æ³•æºç å¯çŸ¥ï¼Œ<strong>BufferedInputStream</strong> å°±æ˜¯ä¸€ä¸ªå…·ä½“çš„<strong>è£…é¥°è€…è§’è‰²(ConcreteDecorator)</strong>ï¼Œå®ƒèƒ½ä¸ºä¸€ä¸ªåŸæœ¬æ²¡æœ‰ç¼“å†²åŠŸèƒ½çš„ InputStream æ·»åŠ ä¸Šç¼“å†²çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ FIleInputStream å¹¶æ²¡æœ‰ç¼“å­˜åŠŸèƒ½ï¼Œä½¿ç”¨ BufferedInputStream æ¥<strong>è£…é¥°</strong>å®ƒï¼Œä½¿å¾—å…¶å…·å¤‡ç¼“å­˜èƒ½åŠ›ï¼Œæé«˜ç¨‹åºçš„æ€§èƒ½</p>`,16);function w(y,f){const p=a("ExternalLinkIcon"),e=a("RouterLink");return c(),l("div",null,[k,n("div",d,[v,n("p",null,[s("æœ¬æ–‡äº†è§£ Java è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§æ¨¡å¼ï¼Œè£…é¥°è€…æ¨¡å¼ï¼Œåœ¨ "),n("a",m,[s("Java.io"),t(p)]),s(" åŒ…ä¸­çš„ åŒ…è£…æµ ä¸­å°±ä½¿ç”¨äº†è£…é¥°è€…æ¨¡å¼")])]),n("p",null,[s("å¦‚éœ€äº†è§£è£…é¥°å™¨æ¨¡å¼è¯¦è§£è¯·çœ‹ğŸ‘‰ "),t(e,{to:"/passages/dev-decorator-pattern.html"},{default:i(()=>[s("è£…é¥°å™¨æ¨¡å¼è¯¦è§£")]),_:1})]),b])}const I=o(r,[["render",w],["__file","02.Java-IO-è£…é¥°è€…æ¨¡å¼.html.vue"]]);export{I as default};
