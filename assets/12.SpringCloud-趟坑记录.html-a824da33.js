import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{o as n,c as s,a as t}from"./app-81567cd0.js";const e={},o=t(`<h1 id="spring-cloud-趟坑记录" tabindex="-1"><a class="header-anchor" href="#spring-cloud-趟坑记录" aria-hidden="true">#</a> Spring Cloud 趟坑记录</h1><div class="hint-container tip"><p class="hint-container-title">提示</p><p>本文记录一些在使用 Spring Cloud 中的一些踩坑记录，防止以后再遇到</p></div><h2 id="spring-cloud-2020-bootstrap-配置文件失效" tabindex="-1"><a class="header-anchor" href="#spring-cloud-2020-bootstrap-配置文件失效" aria-hidden="true">#</a> Spring Cloud 2020 bootstrap 配置文件失效</h2><p>在使用 nacos-config 读取 nacos 配置时，发现bootstrap.yml一直不生效</p><h3 id="查找原因" tabindex="-1"><a class="header-anchor" href="#查找原因" aria-hidden="true">#</a> 查找原因</h3><p>从 Spring Boot 2.4 版本开始，配置文件加载方式进行了重构，默认不加载 <strong>bootstrap.yml</strong> 配置文件</p><h3 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案" aria-hidden="true">#</a> 解决方案</h3><p>引入依赖解决问题</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-bootstrap<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="springcloud-2020版本-gateway-nacos-服务报错503-service-unavailable" tabindex="-1"><a class="header-anchor" href="#springcloud-2020版本-gateway-nacos-服务报错503-service-unavailable" aria-hidden="true">#</a> SpringCloud 2020版本 Gateway + Nacos，服务报错503 Service Unavailable</h2><p>由于 <strong>SpringCloud 2020</strong> 弃用了 Ribbon，因此 Alibaba 在 <strong><code>2021 版本 nacos</code></strong> 中删除了 Ribbon的 jar 包，因此无法通过<strong>lb路由到指定微服务，出现了503情况</strong></p><p>所以只需要引入 <strong>springcloud loadbalancer</strong> 包即可</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--客户端负载均衡loadbalancer--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-loadbalancer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="no-feign-client-for-loadbalancing-defined-did-you-forget-to-include-spring-cloud-starter-loadbalancer" tabindex="-1"><a class="header-anchor" href="#no-feign-client-for-loadbalancing-defined-did-you-forget-to-include-spring-cloud-starter-loadbalancer" aria-hidden="true">#</a> No Feign Client for loadBalancing defined. Did you forget to include spring-cloud-starter-loadbalancer?</h2><p>出错原因也是因为缺少 负载均衡的包，所以导入 <strong>springcloud loadbalancer</strong> 包即可</p>`,15),p=[o];function c(l,i){return n(),s("div",null,p)}const u=a(e,[["render",c],["__file","12.SpringCloud-趟坑记录.html.vue"]]);export{u as default};
