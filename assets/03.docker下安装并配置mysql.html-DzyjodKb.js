import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a as h,b as i,i as a,d as t,w as p,r as k,o as r}from"./app-Dke27yvG.js";const d={},B={class:"hint-container tip"};function c(o,s){const n=k("RouteLink");return r(),e("div",null,[s[3]||(s[3]=h(`<h1 id="docker下安装并配置mysql" tabindex="-1"><a class="header-anchor" href="#docker下安装并配置mysql"><span>docker下安装并配置mysql</span></a></h1><p>Mysql 数据库是市面上最受欢迎的数据库，也是使用最多的一种数据库，所以开发者经常需要安装 Mysql 数据库环境，安装 Mysql 的方式有很多，Window、Linux 等系统可以下载 对应的安装文件安装，但是这些安装方式通常比较麻烦，也很容易出现安装错误。</p><p>那么可以选用 docker 来快速构建环境，容器比虚拟机更加轻量化，拥有诸多好处</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>记录一下 docker 配置 mysql 环境的步骤</p></div><h2 id="拉取-mysql-镜像" tabindex="-1"><a class="header-anchor" href="#拉取-mysql-镜像"><span>拉取 Mysql 镜像</span></a></h2><blockquote><p>docker 环境的搭建请查看其它文章</p></blockquote><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> search</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> pull</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 拉取指定版本</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> pull</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> mysql:5.7</span></span></code></pre></div><p>也可以去<a href="https://hub.docker.com/_/mysql" target="_blank" rel="noopener noreferrer">官网查看镜像tag</a>，选择自己需要的版本，否则会下载最新版本</p><p><img src="https://media.zenghr.cn/blog/img/20210628/pSxDir.png" alt="pSxDir"></p><h2 id="启动-mysql-容器" tabindex="-1"><a class="header-anchor" href="#启动-mysql-容器"><span>启动 Mysql 容器</span></a></h2><div class="language-sh" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> --name</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> mysql</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">--privileged=true </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">-p </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">3306:3306</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">-v </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">/database/mysql/conf:/etc/mysql/conf.d</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">-v </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">/database/mysql/logs:/logs</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">-v </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">/database/mysql/data:/var/lib/mysql</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">-e </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">MYSQL_ROOT_PASSWORD=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">123456</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">-d </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">mysql:5.7</span></span></code></pre></div><ul><li>-privileged：加入 -privileged=true 给容器加上特定权限，因为Centos7安全Selinux禁止了一些安全权限</li><li>-name：指定容器名称，必须是唯一</li><li>-p：将容器的 3306 端口映射到主机的 3306 端口。</li><li>-v：将主机的目录挂载到容器的目录</li><li>-e：初始化 root 用户的密码（<em>注意如果没有初始化密码启动容器会失败</em>）</li><li>-d：容器后台运行</li></ul><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span>-v /database/mysql/conf:/etc/mysql/conf.d 挂载mysql配置文件</span></span>
<span class="line"><span>-v /database/mysql/logs:/logs 挂载日志文件</span></span>
<span class="line"><span>-v /database/mysql/data:/var/lib/mysql 挂载mysql数据, 否则容器重启之后数据会丢失</span></span></code></pre></div><h2 id="查看容器是否启动" tabindex="-1"><a class="header-anchor" href="#查看容器是否启动"><span>查看容器是否启动</span></a></h2><div class="language-sh" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> ps</span></span></code></pre></div><p>如果发现容器未能正常启动成功，则需要查看日志排查异常：<strong><code>docker logs mysql</code></strong></p><h2 id="mysql-相关设置" tabindex="-1"><a class="header-anchor" href="#mysql-相关设置"><span>Mysql 相关设置</span></a></h2><h3 id="_1-进入-mysql-容器" tabindex="-1"><a class="header-anchor" href="#_1-进入-mysql-容器"><span>1. 进入 mysql 容器</span></a></h3><div class="language-sh" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> mysql</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> /bin/bash</span></span></code></pre></div><p><img src="https://media.zenghr.cn/blog/img/20210628/ajeCjb.png" alt="ajeCjb"></p><h3 id="_2-连接-mysql" tabindex="-1"><a class="header-anchor" href="#_2-连接-mysql"><span>2. 连接 mysql</span></a></h3><div class="language-sh" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">mysql</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> -p</span></span></code></pre></div><p>输入启动容器时指定的密码</p><p><img src="https://media.zenghr.cn/blog/img/20210628/Hsrhxe.png" alt="Hsrhxe"></p><h3 id="_3-查询-user-表" tabindex="-1"><a class="header-anchor" href="#_3-查询-user-表"><span>3. 查询 user 表</span></a></h3><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> select</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> host,user,plugin,authentication_string </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> mysql</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">user</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">+</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-------------+---------------+-----------------------+-------------------------------------------+</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| host        | user          | plugin                | authentication_string                     |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">+</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-------------+---------------+-----------------------+-------------------------------------------+</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| localhost   | </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">root</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">          | mysql_native_password | *39EF1E4F4220858A4F0D30FE91AAD7E4C4AB0812 |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| localhost   | </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">mysql</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">session</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> | mysql_native_password | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| localhost   | </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">mysql</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">sys</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">     | mysql_native_password | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">+</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-------------+---------------+-----------------------+-------------------------------------------+</span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> rows</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> set</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">00</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> sec)</span></span></code></pre></div><ul><li>host：localhost表示本机使用，也可以指定IP访问，为 % 表示不限制ip。</li><li>如果这里plugin非mysql_native_password 则需要修改密码</li></ul><h3 id="_4-修改-root-账号" tabindex="-1"><a class="header-anchor" href="#_4-修改-root-账号"><span>4. 修改 root 账号</span></a></h3><ul><li>修改root账号host</li></ul><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">update</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> user </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">set</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> host </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;%&quot;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> where</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> user </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;root&quot;</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> and</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> host </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;localhost&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">；</span></span></code></pre></div><ul><li>修改root账号密码</li></ul><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">update</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> user </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">set</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> password</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">password</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;admin&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> user</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;root&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>注意：如果提示无法修改，这是因为 mysql从5.7.6 <a href="https://dev.mysql.com/doc/relnotes/mysql/5.7/en/news-5-7-6.html" target="_blank" rel="noopener noreferrer">开始删除了password字段</a> 需要换另一种方式修改密码</p></div><ul><li>换种方式修改</li></ul><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">alter</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> user</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &#39;root&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;%&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> identified </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">by</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &#39;admin&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li>刷新权限</li></ul><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">flush privileges;</span></span></code></pre></div><h2 id="查看并修改mysql编码" tabindex="-1"><a class="header-anchor" href="#查看并修改mysql编码"><span>查看并修改mysql编码</span></a></h2><ul><li>在容器中查看mysql配置文件</li></ul><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> /etc/mysql/my.cnf</span></span></code></pre></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span># Copyright (c) 2016, 2021, Oracle and/or its affiliates.</span></span>
<span class="line"><span>#</span></span>
<span class="line"><span># This program is free software; you can redistribute it and/or modify</span></span>
<span class="line"><span># it under the terms of the GNU General Public License, version 2.0,</span></span>
<span class="line"><span># as published by the Free Software Foundation.</span></span>
<span class="line"><span>#</span></span>
<span class="line"><span># This program is also distributed with certain software (including</span></span>
<span class="line"><span># but not limited to OpenSSL) that is licensed under separate terms,</span></span>
<span class="line"><span># as designated in a particular file or component or in included license</span></span>
<span class="line"><span># documentation.  The authors of MySQL hereby grant you an additional</span></span>
<span class="line"><span># permission to link the program and your derivative works with the</span></span>
<span class="line"><span># separately licensed software that they have included with MySQL.</span></span>
<span class="line"><span>#</span></span>
<span class="line"><span># This program is distributed in the hope that it will be useful,</span></span>
<span class="line"><span># but WITHOUT ANY WARRANTY; without even the implied warranty of</span></span>
<span class="line"><span># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></span>
<span class="line"><span># GNU General Public License, version 2.0, for more details.</span></span>
<span class="line"><span>#</span></span>
<span class="line"><span># You should have received a copy of the GNU General Public License</span></span>
<span class="line"><span># along with this program; if not, write to the Free Software</span></span>
<span class="line"><span># Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA</span></span>
<span class="line"><span></span></span>
<span class="line"><span>!includedir /etc/mysql/conf.d/</span></span>
<span class="line"><span>!includedir /etc/mysql/mysql.conf.d/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们的配置文件可以放到容器中的 <strong>/etc/mysql/conf.d/</strong> 文件夹下，因为我们启动容器是已经挂载了目录到该目录下，所以我们只需要在那个文件夹里新建一个 <strong>my.cnf</strong> 文件即可</p><ul><li>在配置文件中写入配置</li></ul><div class="language-ini" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">[mysqld]</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">character_set_server</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">utf8mb4</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">[client]</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">default-character-set</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">utf8mb4</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">[mysql]</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">default-character-set</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">utf8mb4</span></span></code></pre></div><ul><li>重启 mysql</li></ul><div class="language-sh" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> mysql</span></span></code></pre></div><ul><li>查看 mysql 编码</li></ul><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> SHOW VARIABLES </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">LIKE</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &#39;collation_%&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">+</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">----------------------+--------------------+</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| Variable_name        | </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">Value</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">              |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">+</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">----------------------+--------------------+</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| collation_connection | utf8mb4_general_ci |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| collation_database   | utf8mb4_general_ci |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| collation_server     | utf8mb4_general_ci |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">+</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">----------------------+--------------------+</span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> rows</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> set</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">00</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> sec)</span></span></code></pre></div><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> SHOW VARIABLES </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">LIKE</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &#39;char%&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">+</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">--------------------------+----------------------------+</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| Variable_name            | </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">Value</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                      |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">+</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">--------------------------+----------------------------+</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| character_set_client     | utf8mb4                    |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| character_set_connection | utf8mb4                    |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| character_set_database   | utf8mb4                    |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| character_set_filesystem | </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">binary</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">                     |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| character_set_results    | utf8mb4                    |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| character_set_server     | utf8mb4                    |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| character_set_system     | utf8                       |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">| character_sets_dir       | /usr/share/mysql/charsets/ |</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">+</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">--------------------------+----------------------------+</span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">8</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> rows</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> set</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">01</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> sec)</span></span></code></pre></div><h2 id="创建mysql-新用户" tabindex="-1"><a class="header-anchor" href="#创建mysql-新用户"><span>创建mysql 新用户</span></a></h2>`,50)),i("div",B,[s[2]||(s[2]=i("p",{class:"hint-container-title"},"提示",-1)),i("p",null,[s[1]||(s[1]=a("关于 mysql 创建用户、数据库、以及给用户赋权等操作命令，请查看 ")),t(n,{to:"/passages/"},{default:p(()=>s[0]||(s[0]=[a("mysql 系列文章 - 创建用户以及赋权")])),_:1})])])])}const A=l(d,[["render",c]]),F=JSON.parse('{"path":"/tool/docker/03.docker%E4%B8%8B%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEmysql.html","title":"docker安装并配置mysql环境","lang":"zh-CN","frontmatter":{"title":"docker安装并配置mysql环境","date":"2021-06-28T21:12:00.000Z","re":"2021-06-28-docker-mysql-env","description":"docker下安装并配置mysql Mysql 数据库是市面上最受欢迎的数据库，也是使用最多的一种数据库，所以开发者经常需要安装 Mysql 数据库环境，安装 Mysql 的方式有很多，Window、Linux 等系统可以下载 对应的安装文件安装，但是这些安装方式通常比较麻烦，也很容易出现安装错误。 那么可以选用 docker 来快速构建环境，容器比虚...","permalink":"/passages/2021-06-28-docker-mysql-env.html","head":[["meta",{"property":"og:url","content":"https://blog.zenghr.cn/passages/2021-06-28-docker-mysql-env.html"}],["meta",{"property":"og:site_name","content":"Zenghr"}],["meta",{"property":"og:title","content":"docker安装并配置mysql环境"}],["meta",{"property":"og:description","content":"docker下安装并配置mysql Mysql 数据库是市面上最受欢迎的数据库，也是使用最多的一种数据库，所以开发者经常需要安装 Mysql 数据库环境，安装 Mysql 的方式有很多，Window、Linux 等系统可以下载 对应的安装文件安装，但是这些安装方式通常比较麻烦，也很容易出现安装错误。 那么可以选用 docker 来快速构建环境，容器比虚..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://media.zenghr.cn/blog/img/20210628/pSxDir.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-07T20:17:18.000Z"}],["meta",{"property":"article:published_time","content":"2021-06-28T21:12:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-07T20:17:18.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"docker安装并配置mysql环境\\",\\"image\\":[\\"https://media.zenghr.cn/blog/img/20210628/pSxDir.png\\",\\"https://media.zenghr.cn/blog/img/20210628/ajeCjb.png\\",\\"https://media.zenghr.cn/blog/img/20210628/Hsrhxe.png\\"],\\"datePublished\\":\\"2021-06-28T21:12:00.000Z\\",\\"dateModified\\":\\"2025-04-07T20:17:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zenghr\\"}]}"]]},"git":{"createdTime":1744057038000,"updatedTime":1744057038000,"contributors":[{"name":"zenghr","username":"zenghr","email":"zenghr","commits":1,"url":"https://github.com/zenghr"}]},"readingTime":{"minutes":3.59,"words":1077},"filePathRelative":"tool/docker/03.docker下安装并配置mysql.md","localizedDate":"2021年6月28日","excerpt":"\\n<p>Mysql 数据库是市面上最受欢迎的数据库，也是使用最多的一种数据库，所以开发者经常需要安装 Mysql 数据库环境，安装 Mysql 的方式有很多，Window、Linux 等系统可以下载 对应的安装文件安装，但是这些安装方式通常比较麻烦，也很容易出现安装错误。</p>\\n<p>那么可以选用 docker 来快速构建环境，容器比虚拟机更加轻量化，拥有诸多好处</p>\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>记录一下 docker 配置 mysql 环境的步骤</p>\\n</div>","autoDesc":true}');export{A as comp,F as data};
