import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{r as p,o as c,c as o,d as s,e as n,b as l,w as i,a}from"./app-1c9cb0ba.js";const u={},r=a('<h1 id="java-åŸºç¡€-åå°„æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#java-åŸºç¡€-åå°„æœºåˆ¶" aria-hidden="true">#</a> Java åŸºç¡€ - åå°„æœºåˆ¶</h1><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>æœ¬æ–‡ä¸»è¦è®°å½•å­¦ä¹  Java åå°„ï¼ˆreflectï¼‰çš„ä¸€ç‚¹å¿ƒå¾—ï¼Œåœ¨äº†è§£åå°„ä¹‹å‰ï¼Œåº”è¯¥å…ˆäº†è§£ Java ä¸­çš„ Class ç±»</p></div><h2 id="å¸¦ç€batå¤§å‚çš„é¢è¯•é—®é¢˜å»ç†è§£" tabindex="-1"><a class="header-anchor" href="#å¸¦ç€batå¤§å‚çš„é¢è¯•é—®é¢˜å»ç†è§£" aria-hidden="true">#</a> å¸¦ç€BATå¤§å‚çš„é¢è¯•é—®é¢˜å»ç†è§£</h2><ul><li>Java åå°„çš„ä½œç”¨ï¼Ÿ</li><li>å“ªé‡Œä¼šç”¨åˆ°åå°„ï¼Ÿ</li><li>è·å– Class å¯¹è±¡æœ‰å‡ ç§æ–¹å¼?</li><li>åå°„çš„å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</li><li>åˆ©ç”¨åå°„åŠ¨æ€åˆ›å»ºå¯¹è±¡å®ä¾‹?</li></ul><h2 id="ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶</h2><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>Java åå°„æœºåˆ¶åœ¨ç¨‹åº<strong>è¿è¡Œæ—¶</strong>ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±æ€§ã€‚è¿™ç§ <strong>åŠ¨æ€çš„è·å–ä¿¡æ¯</strong> ä»¥åŠ <strong>åŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•</strong> çš„åŠŸèƒ½ç§°ä¸º <strong>java çš„åå°„æœºåˆ¶</strong></p></div><h2 id="class-å­—èŠ‚ç å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#class-å­—èŠ‚ç å¯¹è±¡" aria-hidden="true">#</a> Classï¼ˆå­—èŠ‚ç å¯¹è±¡ï¼‰</h2><p>Class æ˜¯ java.lang åŒ…é‡Œçš„ä¸€ä¸ªç±»ï¼Œåœ¨ Java ä¸­ï¼Œå­¦ä¹ é¢å‘å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸æŠŠå¤šä¸ªäº‹ç‰©ï¼Œå‘ç°ä»–ä»¬çš„å…±æ€§ç‰¹å¾ï¼ŒæŠ½å‡ºæ¥å†™æˆä¸€ä¸ª Java ç±»ï¼Œå¯ä»¥æ ¹æ®è¯¥ç±»åˆ›å»ºå…·ä½“çš„ä¸ªä½“å¯¹è±¡ï¼Œç¼–è¯‘æ—¶ä¼šç”Ÿæˆä¸€ä¸ªä¸ª <code>.class</code> åç¼€çš„å­—èŠ‚ç æ–‡ä»¶ã€‚</p>',8),k=s("strong",null,"Method Area",-1),d=s("strong",null,"Method Area",-1),v=s("code",null,"Person.class",-1),m=s("strong",null,"Class",-1),b=a(`<figure><img src="https://media.zenghr.cn/blog/img/20210508/sLWmlVex9M9J.png?imageslim" alt="mark" tabindex="0" loading="lazy"><figcaption>mark</figcaption></figure><p>æ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥è®¤ä¸ºä¸€ä¸ª <code>.class</code> å­—èŠ‚ç æ–‡ä»¶å°±æ˜¯ä¸€ä¸ª <strong>Class</strong> å¯¹è±¡ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªå¯¹åº”çš„ Class å¯¹è±¡</p><h2 id="è·å–å­—èŠ‚ç å¯¹è±¡çš„ä¸‰ç§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#è·å–å­—èŠ‚ç å¯¹è±¡çš„ä¸‰ç§æ–¹å¼" aria-hidden="true">#</a> è·å–å­—èŠ‚ç å¯¹è±¡çš„ä¸‰ç§æ–¹å¼</h2><p>é€šè¿‡ API ï¼Œæˆ‘ä»¬å¾—çŸ¥ Class ï¼Œæ²¡æœ‰å…¬å…±çš„æ„é€ å™¨ï¼Œå…¶åŸå› æ˜¯ Class å¯¹è±¡æ˜¯åœ¨åŠ è½½ç±»æ—¶ç”± Java è™šæ‹Ÿæœºè‡ªåŠ¨æ„é€ çš„</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 1. é€šè¿‡å­—ç¬¦ä¸²è·å– Class å¯¹è±¡ï¼Œç§°ä¸º å…¨é™å®šå</span>
<span class="token class-name">Class</span> clz1 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;cn.zenghr.reflect.User&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2. é€šè¿‡ç±»çš„ class å±æ€§</span>
<span class="token class-name">Class</span> clz2 <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token comment">// 3. é€šè¿‡å¯¹è±¡çš„ getClass() å‡½æ•°</span>
<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span> clz3 <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡ç±»çš„ <strong>å…¨é™å®šå</strong> è·å– Class å¯¹è±¡ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬å¹³æ—¶æœ€å¸¸ç”¨çš„åå°„è·å– Class å¯¹è±¡çš„æ–¹æ³•ï¼›</li><li>ç¬¬äºŒç§æ–¹æ³•æœ‰é™åˆ¶æ¡ä»¶ï¼šéœ€è¦å¯¼å…¥ç±»çš„åŒ…ï¼›</li><li>ç¬¬ä¸‰ç§æ–¹æ³•å·²ç»æœ‰äº† User å¯¹è±¡ï¼Œä¸å†éœ€è¦åå°„</li></ul><p>å› ä¸º Java è¿è¡Œæ—¶ï¼Œæ¯ä¸€ä¸ªç±»åªä¼šç”Ÿæˆä¸€ä¸ª Class å¯¹è±¡ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼Œæ‰€æœ‰ä¸‰ç§æ–¹å¼è·å–çš„ Class å¯¹è±¡æ˜¯åŒä¸€ä¸ª</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>clz1 <span class="token operator">==</span> clz2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>clz2 <span class="token operator">==</span> clz3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åå°„å‰è¨€" tabindex="-1"><a class="header-anchor" href="#åå°„å‰è¨€" aria-hidden="true">#</a> åå°„å‰è¨€</h2><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>æ€»ç»“: API æ–¹æ³•ä¸­å¸¦ç€ <strong>s</strong> è¡¨ç¤ºè·å–å¤šä¸ªï¼Œå¸¦ç€ <strong><code>Declared</code></strong> è¡¨ç¤ºå¿½ç•¥æƒé™ï¼ŒåŒ…æ‹¬ç§æœ‰çš„ä¹Ÿå¯ä»¥è·å–åˆ°</p></div><p><strong>User(æ¼”ç¤ºç±»ï¼Œä»¥ä¸‹ä»£ç éƒ½ä½¿ç”¨è¯¥ç±»æ¼”ç¤º)</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    
    <span class="token comment">// æ— å‚æ„é€ å™¨</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token comment">// æœ‰å‚æ„é€ å™¨</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ç§æœ‰æ„é€ å™¨</span>
    <span class="token keyword">private</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// å…¬å…±æ„æ–¹æ³• - æ— å‚</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;user - show&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ç§æœ‰æ–¹æ³• - æœ‰å‚</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;userï¼š&quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// å…¬å…±é™æ€æ–¹æ³• - æœ‰å‚</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;userï¼š&quot;</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// seter / geter çœç•¥</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åå°„-api" tabindex="-1"><a class="header-anchor" href="#åå°„-api" aria-hidden="true">#</a> åå°„ API</h2><p>Java ç±»çš„æˆå‘˜åŒ…æ‹¬ä»¥ä¸‹ä¸‰ç±»ï¼šå±æ€§å­—æ®µã€æ„é€ å‡½æ•°ã€æ–¹æ³•ã€‚åå°„çš„ API ä¹Ÿæ˜¯ä¸è¿™å‡ ä¸ªæˆå‘˜ç›¸å…³ğŸ‘‡</p><img src="https://media.zenghr.cn/blog/img/20210508/FSMrNY6hgVkf.jpg?imageslim" alt="mark" style="zoom:50%;"><ul><li><strong>Fiele</strong> ç±»ï¼šæä¾›æœ‰å…³ç±»çš„å±æ€§ä¿¡æ¯ï¼Œä»¥åŠå¯¹å®ƒçš„åŠ¨æ€è®¿é—®æƒé™ã€‚å®ƒæ˜¯ä¸€ä¸ªå°è£…åå°„ç±»çš„å±æ€§çš„ç±»</li><li><strong>Constructor</strong> ç±»ï¼šæä¾›æœ‰å…³ç±»çš„æ„é€ æ–¹æ³•çš„ä¿¡æ¯ï¼Œä»¥åŠå¯¹å®ƒçš„åŠ¨æ€è®¿é—®æƒé™ã€‚å®ƒæ˜¯ä¸€ä¸ªå°è£…åå°„ç±»çš„æ„é€ æ–¹æ³•çš„ç±»ã€‚</li><li><strong>Method</strong> ç±»ï¼šæä¾›å…³äºç±»çš„æ–¹æ³•çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æŠ½è±¡æ–¹æ³•ã€‚å®ƒæ˜¯ç”¨æ¥å°è£…åå°„ç±»æ–¹æ³•çš„ä¸€ä¸ªç±»ã€‚</li><li><strong>Class</strong> ç±»ï¼šè¡¨ç¤ºæ­£åœ¨è¿è¡Œçš„ Java åº”ç”¨ç¨‹åºä¸­çš„ç±»çš„å®ä¾‹ã€‚</li><li><strong>Object</strong> ç±»ï¼šObject æ˜¯æ‰€æœ‰ Java ç±»çš„çˆ¶ç±»ã€‚æ‰€æœ‰å¯¹è±¡éƒ½é»˜è®¤å®ç°äº† Object ç±»çš„æ–¹æ³•</li></ul><h3 id="newinstance" tabindex="-1"><a class="header-anchor" href="#newinstance" aria-hidden="true">#</a> newInstance()</h3><p>åœ¨ <strong>Class</strong> ç±»ä¸­æä¾›äº†é€šè¿‡æ— å‚æ„é€ å™¨å¿«é€Ÿæ„å»ºå¯¹è±¡çš„æ–¹æ³• <strong>newInstance()</strong> ï¼Œæ³¨æ„ï¼š<code>è¯¥æ–¹æ³•è‡ªä» jdk1.9 ä¹‹åè¢«æ ‡è®°ä¸º è¿‡æ—¶æ–¹æ³•</code></p><h2 id="accessibleobject" tabindex="-1"><a class="header-anchor" href="#accessibleobject" aria-hidden="true">#</a> AccessibleObject</h2><p>AccessibleObject ç±»æ˜¯ Fieldã€Method å’Œ Constructor å¯¹è±¡çš„åŸºç±»ã€‚å®ƒæä¾›äº†å°†åå°„çš„å¯¹è±¡æ ‡è®°ä¸ºåœ¨ä½¿ç”¨æ—¶å–æ¶ˆé»˜è®¤ Java è¯­è¨€è®¿é—®æ§åˆ¶æ£€æŸ¥çš„èƒ½åŠ›</p><p>å¯¹äºå…¬å…±æˆå‘˜ã€é»˜è®¤ï¼ˆæ‰“åŒ…ï¼‰è®¿é—®æˆå‘˜ã€å—ä¿æŠ¤æˆå‘˜å’Œç§æœ‰æˆå‘˜ï¼Œåœ¨åˆ†åˆ«ä½¿ç”¨ Fieldã€Method æˆ– Constructor å¯¹è±¡æ¥è®¾ç½®æˆ–è·å–å­—æ®µã€è°ƒç”¨æ–¹æ³•ï¼Œæˆ–è€…åˆ›å»ºå’Œåˆå§‹åŒ–ç±»çš„æ–°å®ä¾‹çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œè®¿é—®æ£€æŸ¥</p><p>å½“è®¿é—®ç§æœ‰çš„å±æ€§ã€æ–¹æ³•ã€æ„é€ å™¨æ—¶ï¼Œä¸å–æ¶ˆæƒé™æ§åˆ¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š<strong>IllegalAccessException</strong>ï¼Œå…·ä½“å®ç°æ–¹æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// å–æ¶ˆæƒé™åè®°å¾—è¿˜åŸæƒé™</span>
<span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–æ¶ˆæƒé™</span>
<span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// è¿˜åŸæƒé™</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è·å–æ„é€ å™¨-constructor" tabindex="-1"><a class="header-anchor" href="#è·å–æ„é€ å™¨-constructor" aria-hidden="true">#</a> è·å–æ„é€ å™¨(Constructor)</h2><p>è·å–æ„é€ å™¨çš„ <strong>API</strong> ï¼š</p><ul><li><strong>getConstructors()ï¼š</strong> è·å–æ‰€æœ‰å…¬å…±çš„æ„é€ æ–¹æ³•</li><li><strong>getDeclaredConstructors()ï¼š</strong> å¿½ç•¥æƒé™ï¼Œè·å–æ‰€æœ‰æ„é€ å™¨åŒ…æ‹¬ç§æœ‰çš„</li><li><strong>getConstructor(Class... parameterTypes)ï¼š</strong> è·å–æŒ‡å®šçš„å…¬å…±æ„é€ å™¨ï¼Œargsï¼šå‚æ•°åˆ—è¡¨çš„ç±»å‹</li><li><strong>getDeclaredConstructor(Class.. parameterTypes)ï¼š</strong> è·å–æŒ‡å®šçš„æ„é€ å™¨ï¼Œargsï¼šå‚æ•°åˆ—è¡¨çš„ç±»å‹</li></ul><p><strong>Constructor</strong> ç±»å¸¸ç”¨æ–¹æ³•ï¼š<strong><code>newInstance()</code></strong> æ ¹æ®å­—èŠ‚ç ç”Ÿæˆä¸€ä¸ªå¯¹è±¡</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// è·å–å­—èŠ‚ç å¯¹è±¡</span>
<span class="token class-name">Class</span> clz <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>

<span class="token comment">// è·å–æ‰€æœ‰æ„é€ å™¨ - å…¬å…±çš„</span>
<span class="token class-name">Constructor</span><span class="token punctuation">[</span><span class="token punctuation">]</span> constructors <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Constructor</span> constructor <span class="token operator">:</span> constructors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¿½ç•¥æƒé™ è·å–æ‰€æœ‰æ„é€ å™¨ - declared</span>
<span class="token class-name">Constructor</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredConstructors <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Constructor</span> constructor <span class="token operator">:</span> declaredConstructors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// è·å–æŒ‡å®šçš„å…¬å…±æ„é€ å™¨ - æ— å‚</span>
<span class="token class-name">Constructor</span> constructor <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¿½ç•¥æƒé™ è·å–æŒ‡å®šçš„æ„é€ å™¨ - æ— å‚</span>
<span class="token class-name">Constructor</span> privateConstructor <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è·å–æŒ‡å®šçš„å…¬å…±æ„é€ å™¨ - æœ‰å‚</span>
<span class="token class-name">Constructor</span> constructor1 <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è·å–æ–¹æ³•-method" tabindex="-1"><a class="header-anchor" href="#è·å–æ–¹æ³•-method" aria-hidden="true">#</a> è·å–æ–¹æ³•(Method)</h2><p>è·å–æ–¹æ³•çš„ <strong>API</strong> ï¼š</p><ul><li><strong>getMethods()ï¼š</strong> è·å–å…¬å…±çš„æ–¹æ³•</li><li><strong>getDeclaredMethods()ï¼š</strong> å¿½ç•¥æƒé™ï¼Œè·å–æ‰€æœ‰æ–¹æ³•åŒ…æ‹¬ç§æœ‰çš„</li><li><strong>getMethod(String name, Class&lt;?&gt;... parameterTypes)ï¼š</strong> è·å–æŒ‡å®šçš„å…¬å…±æ–¹æ³•ï¼Œargsï¼šæ–¹æ³•åç§°ã€å‚æ•°åˆ—è¡¨çš„ç±»å‹</li><li><strong>getDeclaredMethod(String name, Class&lt;?&gt;... parameterTypes)ï¼š</strong> è·å–æŒ‡å®šçš„æ–¹æ³•ï¼Œargsï¼šæ–¹æ³•åç§°ã€å‚æ•°åˆ—è¡¨çš„ç±»å‹</li></ul><p><strong>Method</strong> ç±»ä¸­æœ‰ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è°ƒç”¨æ‰§è¡Œæ–¹æ³• <strong><code>invoke(Object, Object... args)</code></strong>ï¼Œargsï¼šéœ€è¦è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡å®ä¾‹ã€æ–¹æ³•å‚æ•°</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// è·å–å­—èŠ‚ç å¯¹è±¡</span>
<span class="token class-name">Class</span> clz <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token comment">// è·å–æ‰€æœ‰å…¬å…±æ–¹æ³•</span>
<span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// è·å–æ‰€æœ‰æ–¹æ³• - å¿½ç•¥æƒé™</span>
<span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredMethods <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> declaredMethods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// é€šè¿‡ Class çš„ newInstance() æ–¹æ³•å¿«é€Ÿé€šè¿‡æ— å‚æ„é€ å™¨æ„å»ºä¸€ä¸ªå¯¹è±¡</span>
<span class="token class-name">Object</span> obj <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è·å–æŒ‡å®šæ–¹æ³• - å…¬å…±çš„</span>
<span class="token class-name">Method</span> show <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;show&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è¿è¡Œæ–¹æ³•</span>
show<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åå°„è·å–æ–¹æ³• - ç§æœ‰</span>
<span class="token class-name">Method</span> show1 <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;show&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å–æ¶ˆæƒé™</span>
show1<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
show1<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
show1<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åå°„è·å–é™æ€æ–¹æ³• todo: è°ƒç”¨é™æ€æ–¹æ³•æ—¶ å‚æ•°ä¼ å…¥ null</span>
<span class="token class-name">Method</span> show2 <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;show&quot;</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
show2<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è·å–å­—æ®µ-field" tabindex="-1"><a class="header-anchor" href="#è·å–å­—æ®µ-field" aria-hidden="true">#</a> è·å–å­—æ®µ(Field)</h2><p>è·å–å­—æ®µçš„ <strong>API</strong> ï¼š</p><ul><li>getFields()ï¼š è·å–å…¬å…±çš„å­—æ®µï¼Œï¼ˆ<strong>å› ä¸ºå­—æ®µå¤§éƒ¨åˆ†æ˜¯ç§æœ‰çš„ï¼Œè¯¥æ–¹æ³•ä¸å¸¸ç”¨</strong>ï¼‰</li><li><strong>getDeclaredFields()ï¼š</strong> å¿½ç•¥æƒé™ï¼Œè·å–æ‰€æœ‰å­—æ®µåŒ…æ‹¬ç§æœ‰çš„</li><li>getField(String name)ï¼š è·å–æŒ‡å®šçš„å…¬å…±å­—æ®µ - <strong>ä¸å¸¸ç”¨</strong>ï¼Œargsï¼šå­—æ®µåç§°</li><li><strong>getDeclaredField(String name)ï¼š</strong> è·å–æŒ‡å®šçš„å­—æ®µï¼Œargsï¼šå­—æ®µåç§°</li></ul><p><strong>Field</strong> ç±» å¸¸ç”¨æ–¹æ³•ï¼š</p><ul><li><strong>getName()</strong> - è·å–å­—æ®µåç§°</li><li><strong>get()</strong> - è·å–å­—æ®µå€¼</li><li><strong>set()</strong> - è®¾ç½®å­—æ®µå€¼</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;å¼ ä¸‰ &quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è·å–å­—èŠ‚ç å¯¹è±¡</span>
<span class="token class-name">Class</span> clz <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Field</span> name <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

name<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä¿®æ”¹å­—æ®µå€¼</span>
name<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token string">&quot;æå››&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
name<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è·å–æ‰€æœ‰å­—æ®µï¼Œæ™®éä½¿ç”¨ getDeclaredFields()</span>
<span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// éå†å­—æ®µ</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½®ç§æœ‰å­—æ®µå¯è®¿é—®</span>
    field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–æŒ‡å®šå­—æ®µå€¼</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> field<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ¢å¤æƒé™</span>
    field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å†…çœ-introspector" tabindex="-1"><a class="header-anchor" href="#å†…çœ-introspector" aria-hidden="true">#</a> å†…çœ - Introspector</h2><h3 id="ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ä»‹ç»" aria-hidden="true">#</a> ä»‹ç»</h3><p>JavaBeanæ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„ç»„ä»¶,æ— å¤–ä¹å°±æ˜¯æ“ä½œé‡Œé¢çš„å±æ€§.è€Œä¹‹å‰å’±ä»¬è¦è·å–JavaBeanä¸­çš„æ–¹æ³•,å¦‚æœä½¿ç”¨åå°„éå¸¸éº»çƒ¦.SUNå…¬å¸ä¸“é—¨æä¾›äº†ä¸€å¥—æ“ä½œ Javabean å±æ€§çš„APIï¼šå†…çœï¼ˆ<strong>Introspector</strong>ï¼‰</p><h3 id="å†…çœçš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#å†…çœçš„ä½œç”¨" aria-hidden="true">#</a> å†…çœçš„ä½œç”¨</h3><ol><li>è·å–åˆ°å±æ€§åå’Œå±æ€§ç±»å‹ç­‰ç›¸å…³çŠ¶æ€ä¿¡æ¯.</li><li>è·å–å±æ€§å¯¹åº”çš„è¯»å†™æ–¹æ³•æ“ä½œå±æ€§çš„å€¼ç­‰æ“ä½œæ–¹å¼.</li></ol><h3 id="å†…çœç›¸å…³ç±»ä»¥åŠapi" tabindex="-1"><a class="header-anchor" href="#å†…çœç›¸å…³ç±»ä»¥åŠapi" aria-hidden="true">#</a> å†…çœç›¸å…³ç±»ä»¥åŠAPI</h3><p><strong>Introspector</strong></p><p>Introspector ç±»ä¼¼äº<code>BeanInfo</code>çš„é™æ€å·¥å‚ç±»ï¼Œä¸»è¦æ˜¯æä¾›é™æ€æ–¹æ³•é€šè¿‡<code>Class</code>å®ä¾‹è·å–åˆ°<code>BeanInfo</code>ï¼Œå¾—åˆ°<code>BeanInfo</code>ä¹‹åï¼Œå°±èƒ½å¤Ÿè·å–åˆ°å…¶ä»–æè¿°ç¬¦ã€‚ä¸»è¦æ–¹æ³•ï¼š</p><ul><li><code>public static BeanInfo getBeanInfo(Class&lt;?&gt; beanClass)</code>ï¼šé€šè¿‡<code>Class</code>å®ä¾‹è·å–åˆ°<code>BeanInfo</code>å®ä¾‹ã€‚</li></ul><p><strong>BeanInfo</strong></p><p>BeanInfo æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå…·ä½“å®ç°æ˜¯ <code>GenericBeanInfo</code>ï¼Œé€šè¿‡è¿™ä¸ªæ¥å£å¯ä»¥è·å–ä¸€ä¸ªç±»çš„å„ç§ç±»å‹çš„æè¿°ç¬¦ã€‚ä¸»è¦æ–¹æ³•ï¼š</p><ul><li><code>BeanDescriptor getBeanDescriptor()</code>ï¼šè·å–<code>JavaBean</code>æè¿°ç¬¦ã€‚</li><li><code>EventSetDescriptor[] getEventSetDescriptors()</code>ï¼šè·å–<code>JavaBean</code>çš„æ‰€æœ‰çš„ <code>EventSetDescriptor</code>ã€‚</li><li><code>PropertyDescriptor[] getPropertyDescriptors()</code>ï¼šè·å–<code>JavaBean</code>çš„æ‰€æœ‰çš„ <code>PropertyDescriptor</code>ã€‚</li><li><code>MethodDescriptor[] getMethodDescriptors()</code>ï¼šè·å–<code>JavaBean</code>çš„æ‰€æœ‰çš„ <code>MethodDescriptor</code>ã€‚</li></ul><p><strong>PropertyDescriptor</strong></p><p>PropertyDescriptor ç±»è¡¨ç¤º<code>JavaBean</code>ç±»é€šè¿‡å­˜å‚¨å™¨ï¼ˆ<code>Setter</code>å’Œ<code>Getter</code>ï¼‰å¯¼å‡ºä¸€ä¸ªå±æ€§ï¼Œå®ƒåº”è¯¥æ˜¯å†…çœä½“ç³»ä¸­æœ€å¸¸è§çš„ç±»ã€‚ä¸»è¦æ–¹æ³•ï¼š</p><ul><li><code>synchronized Class&lt;?&gt; getPropertyType()</code>ï¼šè·å¾—å±æ€§çš„<code>Class</code>å¯¹è±¡ã€‚</li><li><code>synchronized Method getReadMethod()</code>ï¼šè·å¾—ç”¨äºè¯»å–å±æ€§å€¼ï¼ˆ<code>Getter</code>ï¼‰çš„æ–¹æ³•ï¼›</li><li><code>synchronized Method getWriteMethod()</code>ï¼šè·å¾—ç”¨äºå†™å…¥å±æ€§å€¼ï¼ˆ<code>Setter</code>ï¼‰çš„æ–¹æ³•ã€‚</li><li><code>int hashCode()</code>ï¼šè·å–å¯¹è±¡çš„å“ˆå¸Œå€¼ã€‚</li><li><code>synchronized void setReadMethod(Method readMethod)</code>ï¼šè®¾ç½®ç”¨äºè¯»å–å±æ€§å€¼ï¼ˆ<code>Getter</code>ï¼‰çš„æ–¹æ³•ã€‚</li><li><code>synchronized void setWriteMethod(Method writeMethod)</code>ï¼šè®¾ç½®ç”¨äºå†™å…¥å±æ€§å€¼ï¼ˆ<code>Setter</code>ï¼‰çš„æ–¹æ³•</li></ul><h2 id="å†…çœå®æˆ˜" tabindex="-1"><a class="header-anchor" href="#å†…çœå®æˆ˜" aria-hidden="true">#</a> å†…çœå®æˆ˜</h2><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p><strong>æ³¨æ„ï¼šgetBeanInfo(Class beanClass, Class stopClass) æ–¹æ³•ç¬¬äºŒå‚æ•°è¡¨ç¤ºï¼Œä¸å†…çœ stopClass ç±»ï¼Œé€šå¸¸ä¼ å…¥ Object.class</strong></p></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// ç»™å®šå­—èŠ‚ç å¯¹è±¡è·å– beanInfo å¯¹è±¡</span>
        <span class="token class-name">BeanInfo</span> beanInfo <span class="token operator">=</span> <span class="token class-name">Introspector</span><span class="token punctuation">.</span><span class="token function">getBeanInfo</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è·å– beanInfo å¯¹è±¡çš„ä¿¡æ¯</span>
        <span class="token class-name">PropertyDescriptor</span><span class="token punctuation">[</span><span class="token punctuation">]</span> propertyDescriptors <span class="token operator">=</span> beanInfo<span class="token punctuation">.</span><span class="token function">getPropertyDescriptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å¾ªç¯éå†è¾“å‡º</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyDescriptor</span> pd <span class="token operator">:</span> propertyDescriptors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// è·å–å±æ€§ name</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>pd<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> pd<span class="token punctuation">.</span><span class="token function">getPropertyType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// è·å–å¯è¯»æ–¹æ³•</span>
            <span class="token class-name">Method</span> readMethod <span class="token operator">=</span> pd<span class="token punctuation">.</span><span class="token function">getReadMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>readMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">Method</span> writeMethod <span class="token operator">=</span> pd<span class="token punctuation">.</span><span class="token function">getWriteMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>writeMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IntrospectionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è¾“å‡º</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>age=int
public int cn.zenghr.advanced.domain.User.getAge()
public void cn.zenghr.advanced.domain.User.setAge(int)
------------------------------
name=class java.lang.String
public java.lang.String cn.zenghr.advanced.domain.User.getName()
public void cn.zenghr.advanced.domain.User.setName(java.lang.String)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="javabean-to-map-å®ç°" tabindex="-1"><a class="header-anchor" href="#javabean-to-map-å®ç°" aria-hidden="true">#</a> JavaBean to Map å®ç°</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * java to map äº’è½¬
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanUtil</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">BeanUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * JavaBean å†…çœ è½¬ Map
     *
     * <span class="token keyword">@param</span> <span class="token parameter">obj</span> JavaBean
     * <span class="token keyword">@return</span> è¿”å› map
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">bean2map</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// 1. è·å– beanInfo å¯¹è±¡</span>
            <span class="token class-name">BeanInfo</span> beanInfo <span class="token operator">=</span> <span class="token class-name">Introspector</span><span class="token punctuation">.</span><span class="token function">getBeanInfo</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 2. è·å– beanInfo çš„å±æ€§</span>
            <span class="token class-name">PropertyDescriptor</span><span class="token punctuation">[</span><span class="token punctuation">]</span> propertyDescriptors <span class="token operator">=</span> beanInfo<span class="token punctuation">.</span><span class="token function">getPropertyDescriptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token comment">// 3. å¾ªç¯éå†è·å–å±æ€§ key-value</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyDescriptor</span> pd <span class="token operator">:</span> propertyDescriptors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> key <span class="token operator">=</span> pd<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Object</span> val <span class="token operator">=</span> pd<span class="token punctuation">.</span><span class="token function">getReadMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// æ·»åŠ </span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IntrospectionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IllegalAccessException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InvocationTargetException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * é€šè¿‡åå°„è·å–å­—æ®µ è½¬åŒ– map
     * <span class="token keyword">@param</span> <span class="token parameter">obj</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">bean2mapReflect</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Class</span> clz <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> key <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Object</span> val <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
                field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>


        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IllegalAccessException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token doc-comment comment">/**
     * map to javabean æ³›å‹
     * <span class="token keyword">@param</span> <span class="token parameter">map</span> mapæ•°æ®
     * <span class="token keyword">@param</span> <span class="token parameter">clz</span> ç±»ç±»å‹
     * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> æ³›å‹
     * <span class="token keyword">@return</span> è¿”å›æ³›å‹å¯¹è±¡
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">map2bean</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clz<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// è·å– beanInfo ä¿¡æ¯</span>
            <span class="token class-name">BeanInfo</span> beanInfo <span class="token operator">=</span> <span class="token class-name">Introspector</span><span class="token punctuation">.</span><span class="token function">getBeanInfo</span><span class="token punctuation">(</span>clz<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// è·å– bean çš„å±æ€§</span>
            <span class="token class-name">PropertyDescriptor</span><span class="token punctuation">[</span><span class="token punctuation">]</span> propertyDescriptors <span class="token operator">=</span> beanInfo<span class="token punctuation">.</span><span class="token function">getPropertyDescriptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ç”Ÿæˆ æ³›å‹å®ä¾‹</span>
            <span class="token class-name">T</span> t <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyDescriptor</span> pd <span class="token operator">:</span> propertyDescriptors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> key <span class="token operator">=</span> pd<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Object</span> val <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>

                pd<span class="token punctuation">.</span><span class="token function">getWriteMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> t<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IntrospectionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IllegalAccessException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InstantiationException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InvocationTargetException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,61);function g(h,f){const t=p("RouterLink");return c(),o("div",null,[r,s("p",null,[n("åœ¨å­¦ä¹  JVMå†…å­˜æ¨¡å‹æ—¶ "),l(t,{to:"/passages/2021-04-09-java-lan-basic.html#jvm%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B"},{default:i(()=>[n("JavaåŸºç¡€ - Jvmå†…å­˜æ¨¡å‹")]),_:1}),n(" ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª æ–¹æ³•åŒº("),k,n(") æ˜¯ç”¨äºå­˜å‚¨ ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ç­‰æ•°æ®ï¼Œå½“æˆ‘ä»¬çš„ç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œç”¨åˆ°æŸä¸ªç±»ä¾‹å¦‚ Person ç±»ï¼ŒJvm ä¼šå…ˆæ‰«æç„¶åé€šè¿‡ç±»åŠ è½½å™¨å°† Person çš„ç±»ä¿¡æ¯å­˜å‚¨åˆ° æ–¹æ³•åŒº("),d,n(") ä¸­ï¼Œå†é€šè¿‡æŠ½å– "),v,n(" å­—èŠ‚ç æ–‡ä»¶çš„æ¨¡æ¿æ¥åˆ›å»º "),m,n(" å®ä¾‹ï¼Œæµç¨‹å¦‚ä¸‹ğŸ‘‡")]),b])}const j=e(u,[["render",g],["__file","04.JavaåŸºç¡€ - åå°„æœºåˆ¶.html.vue"]]);export{j as default};
